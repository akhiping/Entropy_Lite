(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qa,Pe,zh,un,Uc,qh,$h,Uh,Rl,Ku,Yu,Hh,Fa={},Wh=[],Xy=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ja=Array.isArray;function sr(t,e){for(var r in e)t[r]=e[r];return t}function Ml(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Me(t,e,r){var n,a,i,s={};for(i in e)i=="key"?n=e[i]:i=="ref"?a=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?Qa.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)s[i]===void 0&&(s[i]=t.defaultProps[i]);return Aa(t,s,n,a,null)}function Aa(t,e,r,n,a){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++zh,__i:-1,__u:0};return a==null&&Pe.vnode!=null&&Pe.vnode(i),i}function Gh(){return{current:null}}function Yt(t){return t.children}function Kt(t,e){this.props=t,this.context=e}function Yn(t,e){if(e==null)return t.__?Yn(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Yn(t):null}function Kh(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Kh(t)}}function Xu(t){(!t.__d&&(t.__d=!0)&&un.push(t)&&!Ji.__r++||Uc!=Pe.debounceRendering)&&((Uc=Pe.debounceRendering)||qh)(Ji)}function Ji(){for(var t,e,r,n,a,i,s,o=1;un.length;)un.length>o&&un.sort($h),t=un.shift(),o=un.length,t.__d&&(r=void 0,a=(n=(e=t).__v).__e,i=[],s=[],e.__P&&((r=sr({},n)).__v=n.__v+1,Pe.vnode&&Pe.vnode(r),Ll(e.__P,r,n,e.__n,e.__P.namespaceURI,32&n.__u?[a]:null,i,a??Yn(n),!!(32&n.__u),s),r.__v=n.__v,r.__.__k[r.__i]=r,Zh(i,r,s),r.__e!=a&&Kh(r)));Ji.__r=0}function Yh(t,e,r,n,a,i,s,o,u,l,c){var f,d,v,h,g,p,m=n&&n.__k||Wh,y=e.length;for(u=Zy(r,e,m,u,y),f=0;f<y;f++)(v=r.__k[f])!=null&&(d=v.__i==-1?Fa:m[v.__i]||Fa,v.__i=f,p=Ll(t,v,d,a,i,s,o,u,l,c),h=v.__e,v.ref&&d.ref!=v.ref&&(d.ref&&Il(d.ref,null,v),c.push(v.ref,v.__c||h,v)),g==null&&h!=null&&(g=h),4&v.__u||d.__k===v.__k?u=Xh(v,u,t):typeof v.type=="function"&&p!==void 0?u=p:h&&(u=h.nextSibling),v.__u&=-7);return r.__e=g,u}function Zy(t,e,r,n,a){var i,s,o,u,l,c=r.length,f=c,d=0;for(t.__k=new Array(a),i=0;i<a;i++)(s=e[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(u=i+d,(s=t.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Aa(null,s,null,null,null):Ja(s)?Aa(Yt,{children:s},null,null,null):s.constructor==null&&s.__b>0?Aa(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,o=null,(l=s.__i=jy(s,r,u,f))!=-1&&(f--,(o=r[l])&&(o.__u|=2)),o==null||o.__v==null?(l==-1&&(a>c?d--:a<c&&d++),typeof s.type!="function"&&(s.__u|=4)):l!=u&&(l==u-1?d--:l==u+1?d++:(l>u?d--:d++,s.__u|=4))):t.__k[i]=null;if(f)for(i=0;i<c;i++)(o=r[i])!=null&&!(2&o.__u)&&(o.__e==n&&(n=Yn(o)),Qh(o,o));return n}function Xh(t,e,r){var n,a;if(typeof t.type=="function"){for(n=t.__k,a=0;n&&a<n.length;a++)n[a]&&(n[a].__=t,e=Xh(n[a],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=Yn(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function yr(t,e){return e=e||[],t==null||typeof t=="boolean"||(Ja(t)?t.some(function(r){yr(r,e)}):e.push(t)),e}function jy(t,e,r,n){var a,i,s=t.key,o=t.type,u=e[r];if(u===null&&t.key==null||u&&s==u.key&&o==u.type&&!(2&u.__u))return r;if(n>(u!=null&&!(2&u.__u)?1:0))for(a=r-1,i=r+1;a>=0||i<e.length;){if(a>=0){if((u=e[a])&&!(2&u.__u)&&s==u.key&&o==u.type)return a;a--}if(i<e.length){if((u=e[i])&&!(2&u.__u)&&s==u.key&&o==u.type)return i;i++}}return-1}function Hc(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||Xy.test(e)?r:r+"px"}function wi(t,e,r,n,a){var i,s;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Hc(t.style,e,"");if(r)for(e in r)n&&r[e]==n[e]||Hc(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Uh,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n?r.u=n.u:(r.u=Rl,t.addEventListener(e,i?Yu:Ku,i)):t.removeEventListener(e,i?Yu:Ku,i);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function Wc(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=Rl++;else if(e.t<r.u)return;return r(Pe.event?Pe.event(e):e)}}}function Ll(t,e,r,n,a,i,s,o,u,l){var c,f,d,v,h,g,p,m,y,b,w,T,E,x,C,S,D,_=e.type;if(e.constructor!=null)return null;128&r.__u&&(u=!!(32&r.__u),i=[o=e.__e=r.__e]),(c=Pe.__b)&&c(e);e:if(typeof _=="function")try{if(m=e.props,y="prototype"in _&&_.prototype.render,b=(c=_.contextType)&&n[c.__c],w=c?b?b.props.value:c.__:n,r.__c?p=(f=e.__c=r.__c).__=f.__E:(y?e.__c=f=new _(m,w):(e.__c=f=new Kt(m,w),f.constructor=_,f.render=Jy),b&&b.sub(f),f.props=m,f.state||(f.state={}),f.context=w,f.__n=n,d=f.__d=!0,f.__h=[],f._sb=[]),y&&f.__s==null&&(f.__s=f.state),y&&_.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=sr({},f.__s)),sr(f.__s,_.getDerivedStateFromProps(m,f.__s))),v=f.props,h=f.state,f.__v=e,d)y&&_.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),y&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(y&&_.getDerivedStateFromProps==null&&m!==v&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(m,w),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(m,f.__s,w)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(f.props=m,f.state=f.__s,f.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(k){k&&(k.__=e)}),T=0;T<f._sb.length;T++)f.__h.push(f._sb[T]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(m,f.__s,w),y&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(v,h,g)})}if(f.context=w,f.props=m,f.__P=t,f.__e=!1,E=Pe.__r,x=0,y){for(f.state=f.__s,f.__d=!1,E&&E(e),c=f.render(f.props,f.state,f.context),C=0;C<f._sb.length;C++)f.__h.push(f._sb[C]);f._sb=[]}else do f.__d=!1,E&&E(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++x<25);f.state=f.__s,f.getChildContext!=null&&(n=sr(sr({},n),f.getChildContext())),y&&!d&&f.getSnapshotBeforeUpdate!=null&&(g=f.getSnapshotBeforeUpdate(v,h)),S=c,c!=null&&c.type===Yt&&c.key==null&&(S=jh(c.props.children)),o=Yh(t,Ja(S)?S:[S],e,r,n,a,i,s,o,u,l),f.base=e.__e,e.__u&=-161,f.__h.length&&s.push(f),p&&(f.__E=f.__=null)}catch(k){if(e.__v=null,u||i!=null)if(k.then){for(e.__u|=u?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,e.__e=o}else for(D=i.length;D--;)Ml(i[D]);else e.__e=r.__e,e.__k=r.__k;Pe.__e(k,e,r)}else i==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):o=e.__e=Qy(r.__e,e,r,n,a,i,s,u,l);return(c=Pe.diffed)&&c(e),128&e.__u?void 0:o}function Zh(t,e,r){for(var n=0;n<r.length;n++)Il(r[n],r[++n],r[++n]);Pe.__c&&Pe.__c(e,t),t.some(function(a){try{t=a.__h,a.__h=[],t.some(function(i){i.call(a)})}catch(i){Pe.__e(i,a.__v)}})}function jh(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ja(t)?t.map(jh):sr({},t)}function Qy(t,e,r,n,a,i,s,o,u){var l,c,f,d,v,h,g,p=r.props,m=e.props,y=e.type;if(y=="svg"?a="http://www.w3.org/2000/svg":y=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((v=i[l])&&"setAttribute"in v==!!y&&(y?v.localName==y:v.nodeType==3)){t=v,i[l]=null;break}}if(t==null){if(y==null)return document.createTextNode(m);t=document.createElementNS(a,y,m.is&&m),o&&(Pe.__m&&Pe.__m(e,i),o=!1),i=null}if(y==null)p===m||o&&t.data==m||(t.data=m);else{if(i=i&&Qa.call(t.childNodes),p=r.props||Fa,!o&&i!=null)for(p={},l=0;l<t.attributes.length;l++)p[(v=t.attributes[l]).name]=v.value;for(l in p)if(v=p[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=v;else if(!(l in m)){if(l=="value"&&"defaultValue"in m||l=="checked"&&"defaultChecked"in m)continue;wi(t,l,null,v,a)}}for(l in m)v=m[l],l=="children"?d=v:l=="dangerouslySetInnerHTML"?c=v:l=="value"?h=v:l=="checked"?g=v:o&&typeof v!="function"||p[l]===v||wi(t,l,v,p[l],a);if(c)o||f&&(c.__html==f.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(f&&(t.innerHTML=""),Yh(e.type=="template"?t.content:t,Ja(d)?d:[d],e,r,n,y=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,s,i?i[0]:r.__k&&Yn(r,0),o,u),i!=null)for(l=i.length;l--;)Ml(i[l]);o||(l="value",y=="progress"&&h==null?t.removeAttribute("value"):h!=null&&(h!==t[l]||y=="progress"&&!h||y=="option"&&h!=p[l])&&wi(t,l,h,p[l],a),l="checked",g!=null&&g!=t[l]&&wi(t,l,g,p[l],a))}return t}function Il(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(a){Pe.__e(a,r)}}function Qh(t,e,r){var n,a;if(Pe.unmount&&Pe.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||Il(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){Pe.__e(i,e)}n.base=n.__P=null}if(n=t.__k)for(a=0;a<n.length;a++)n[a]&&Qh(n[a],e,r||typeof t.type!="function");r||Ml(t.__e),t.__c=t.__=t.__e=void 0}function Jy(t,e,r){return this.constructor(t,r)}function Xn(t,e,r){var n,a,i,s;e==document&&(e=document.documentElement),Pe.__&&Pe.__(t,e),a=(n=typeof r=="function")?null:r&&r.__k||e.__k,i=[],s=[],Ll(e,t=(!n&&r||e).__k=Me(Yt,null,[t]),a||Fa,Fa,e.namespaceURI,!n&&r?[r]:a?null:e.firstChild?Qa.call(e.childNodes):null,i,!n&&r?r:a?a.__e:e.firstChild,n,s),Zh(i,t,s)}function Jh(t,e){Xn(t,e,Jh)}function e0(t,e,r){var n,a,i,s,o=sr({},t.props);for(i in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)i=="key"?n=e[i]:i=="ref"?a=e[i]:o[i]=e[i]===void 0&&s!=null?s[i]:e[i];return arguments.length>2&&(o.children=arguments.length>3?Qa.call(arguments,2):r),Aa(t.type,o,n||t.key,a||t.ref,null)}function Hr(t){function e(r){var n,a;return this.getChildContext||(n=new Set,(a={})[e.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&n.forEach(function(s){s.__e=!0,Xu(s)})},this.sub=function(i){n.add(i);var s=i.componentWillUnmount;i.componentWillUnmount=function(){n&&n.delete(i),s&&s.call(i)}}),r.children}return e.__c="__cC"+Hh++,e.__=t,e.Provider=e.__l=(e.Consumer=function(r,n){return r.children(n)}).contextType=e,e}Qa=Wh.slice,Pe={__e:function(t,e,r,n){for(var a,i,s;e=e.__;)if((a=e.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(t)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,n||{}),s=a.__d),s)return a.__E=a}catch(o){t=o}throw t}},zh=0,Kt.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=sr({},this.state),typeof t=="function"&&(t=t(sr({},r),this.props)),t&&sr(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),Xu(this))},Kt.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Xu(this))},Kt.prototype.render=Yt,un=[],qh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$h=function(t,e){return t.__v.__b-e.__v.__b},Ji.__r=0,Uh=/(PointerCapture)$|Capture$/i,Rl=0,Ku=Wc(!1),Yu=Wc(!0),Hh=0;const t0={},Gc=t=>{let e;const r=new Set,n=(c,f)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const v=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(h=>h(e,v))}},a=()=>e,u={setState:n,getState:a,getInitialState:()=>l,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{(t0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=e=t(n,a,u);return u},r0=t=>t?Gc(t):Gc;var xr,qe,to,Kc,Zn=0,ep=[],Ye=Pe,Yc=Ye.__b,Xc=Ye.__r,Zc=Ye.diffed,jc=Ye.__c,Qc=Ye.unmount,Jc=Ye.__;function wn(t,e){Ye.__h&&Ye.__h(qe,t,Zn||e),Zn=0;var r=qe.__H||(qe.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function ia(t){return Zn=1,Es(tp,t)}function Es(t,e,r){var n=wn(xr++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):tp(void 0,e),function(o){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,o);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=qe,!qe.__f)){var a=function(o,u,l){if(!n.__c.__H)return!0;var c=n.__c.__H.__.filter(function(d){return!!d.__c});if(c.every(function(d){return!d.__N}))return!i||i.call(this,o,u,l);var f=n.__c.props!==o;return c.forEach(function(d){if(d.__N){var v=d.__[0];d.__=d.__N,d.__N=void 0,v!==d.__[0]&&(f=!0)}}),i&&i.call(this,o,u,l)||f};qe.__f=!0;var i=qe.shouldComponentUpdate,s=qe.componentWillUpdate;qe.componentWillUpdate=function(o,u,l){if(this.__e){var c=i;i=void 0,a(o,u,l),i=c}s&&s.call(this,o,u,l)},qe.shouldComponentUpdate=a}return n.__N||n.__}function cr(t,e){var r=wn(xr++,3);!Ye.__s&&Fl(r.__H,e)&&(r.__=t,r.u=e,qe.__H.__h.push(r))}function xn(t,e){var r=wn(xr++,4);!Ye.__s&&Fl(r.__H,e)&&(r.__=t,r.u=e,qe.__h.push(r))}function Ot(t){return Zn=5,Jt(function(){return{current:t}},[])}function Ol(t,e,r){Zn=6,xn(function(){if(typeof t=="function"){var n=t(e());return function(){t(null),n&&typeof n=="function"&&n()}}if(t)return t.current=e(),function(){return t.current=null}},r==null?r:r.concat(t))}function Jt(t,e){var r=wn(xr++,7);return Fl(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function jn(t,e){return Zn=8,Jt(function(){return t},e)}function ht(t){var e=qe.context[t.__c],r=wn(xr++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(qe)),e.props.value):t.__}function Vl(t,e){Ye.useDebugValue&&Ye.useDebugValue(e?e(t):t)}function n0(t){var e=wn(xr++,10),r=ia();return e.__=t,qe.componentDidCatch||(qe.componentDidCatch=function(n,a){e.__&&e.__(n,a),r[1](n)}),[r[0],function(){r[1](void 0)}]}function sa(){var t=wn(xr++,11);if(!t.__){for(var e=qe.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function a0(){for(var t;t=ep.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Fi),t.__H.__h.forEach(Zu),t.__H.__h=[]}catch(e){t.__H.__h=[],Ye.__e(e,t.__v)}}Ye.__b=function(t){qe=null,Yc&&Yc(t)},Ye.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Jc&&Jc(t,e)},Ye.__r=function(t){Xc&&Xc(t),xr=0;var e=(qe=t.__c).__H;e&&(to===qe?(e.__h=[],qe.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Fi),e.__h.forEach(Zu),e.__h=[],xr=0)),to=qe},Ye.diffed=function(t){Zc&&Zc(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ep.push(e)!==1&&Kc===Ye.requestAnimationFrame||((Kc=Ye.requestAnimationFrame)||i0)(a0)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),to=qe=null},Ye.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Fi),r.__h=r.__h.filter(function(n){return!n.__||Zu(n)})}catch(n){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Ye.__e(n,r.__v)}}),jc&&jc(t,e)},Ye.unmount=function(t){Qc&&Qc(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Fi(n)}catch(a){e=a}}),r.__H=void 0,e&&Ye.__e(e,r.__v))};var ef=typeof requestAnimationFrame=="function";function i0(t){var e,r=function(){clearTimeout(n),ef&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);ef&&(e=requestAnimationFrame(r))}function Fi(t){var e=qe,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),qe=e}function Zu(t){var e=qe;t.__c=t.__(),qe=e}function Fl(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function tp(t,e){return typeof e=="function"?e(t):e}function rp(t,e){for(var r in e)t[r]=e[r];return t}function ju(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}function Nl(t,e){var r=e(),n=ia({t:{__:r,u:e}}),a=n[0].t,i=n[1];return xn(function(){a.__=r,a.u=e,ro(a)&&i({t:a})},[t,r,e]),cr(function(){return ro(a)&&i({t:a}),t(function(){ro(a)&&i({t:a})})},[t]),r}function ro(t){var e,r,n=t.u,a=t.__;try{var i=n();return!((e=a)===(r=i)&&(e!==0||1/e==1/r)||e!=e&&r!=r)}catch{return!0}}function zl(t){t()}function ql(t){return t}function $l(){return[!1,zl]}var ei=xn;function es(t,e){this.props=t,this.context=e}function np(t,e){function r(a){var i=this.props.ref,s=i==a.ref;return!s&&i&&(i.call?i(null):i.current=null),e?!e(this.props,a)||!s:ju(this.props,a)}function n(a){return this.shouldComponentUpdate=r,Me(t,a)}return n.displayName="Memo("+(t.displayName||t.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(es.prototype=new Kt).isPureReactComponent=!0,es.prototype.shouldComponentUpdate=function(t,e){return ju(this.props,t)||ju(this.state,e)};var tf=Pe.__b;Pe.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),tf&&tf(t)};var s0=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ul(t){function e(r){var n=rp({},r);return delete n.ref,t(n,r.ref||null)}return e.$$typeof=s0,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var rf=function(t,e){return t==null?null:yr(yr(t).map(e))},Hl={map:rf,forEach:rf,count:function(t){return t?yr(t).length:0},only:function(t){var e=yr(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:yr},o0=Pe.__e;Pe.__e=function(t,e,r,n){if(t.then){for(var a,i=e;i=i.__;)if((a=i.__c)&&a.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),a.__c(t,e)}o0(t,e,r,n)};var nf=Pe.unmount;function ap(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),t.__c.__H=null),(t=rp({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(n){return ap(n,e,r)})),t}function ip(t,e,r){return t&&r&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(n){return ip(n,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=r)),t}function ka(){this.__u=0,this.o=null,this.__b=null}function sp(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function op(t){var e,r,n;function a(i){if(e||(e=t()).then(function(s){r=s.default||s},function(s){n=s}),n)throw n;if(!r)throw e;return Me(r,i)}return a.displayName="Lazy",a.__f=!0,a}function On(){this.i=null,this.l=null}Pe.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),nf&&nf(t)},(ka.prototype=new Kt).__c=function(t,e){var r=e.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var a=sp(n.__v),i=!1,s=function(){i||(i=!0,r.__R=null,a?a(o):o())};r.__R=s;var o=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=ip(u,u.__c.__P,u.__c.__O)}var l;for(n.setState({__a:n.__b=null});l=n.o.pop();)l.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(s,s)},ka.prototype.componentWillUnmount=function(){this.o=[]},ka.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=ap(this.__b,r,n.__O=n.__P)}this.__b=null}var a=e.__a&&Me(Yt,null,t.fallback);return a&&(a.__u&=-33),[Me(Yt,null,e.__a?null:t.children),a]};var af=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};function u0(t){return this.getChildContext=function(){return t.context},t.children}function l0(t){var e=this,r=t.h;if(e.componentWillUnmount=function(){Xn(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),!e.v){for(var n=e.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(a,i){this.childNodes.push(a),e.h.insertBefore(a,i)},removeChild:function(a){this.childNodes.splice(this.childNodes.indexOf(a)>>>1,1),e.h.removeChild(a)}}}Xn(Me(u0,{context:e.context},t.__v),e.v)}function up(t,e){var r=Me(l0,{__v:t,h:e});return r.containerInfo=e,r}(On.prototype=new Kt).__a=function(t){var e=this,r=sp(e.__v),n=e.l.get(t);return n[0]++,function(a){var i=function(){e.props.revealOrder?(n.push(a),af(e,t,n)):a()};r?r(i):i()}},On.prototype.render=function(t){this.i=null,this.l=new Map;var e=yr(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},On.prototype.componentDidUpdate=On.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,r){af(t,r,e)})};var lp=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,c0=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,f0=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,d0=/[A-Z0-9]/g,v0=typeof document<"u",h0=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function cp(t,e,r){return e.__k==null&&(e.textContent=""),Xn(t,e),typeof r=="function"&&r(),t?t.__c:null}function fp(t,e,r){return Jh(t,e),typeof r=="function"&&r(),t?t.__c:null}Kt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Kt.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var sf=Pe.event;function p0(){}function g0(){return this.cancelBubble}function m0(){return this.defaultPrevented}Pe.event=function(t){return sf&&(t=sf(t)),t.persist=p0,t.isPropagationStopped=g0,t.isDefaultPrevented=m0,t.nativeEvent=t};var Wl,y0={enumerable:!1,configurable:!0,get:function(){return this.class}},of=Pe.vnode;Pe.vnode=function(t){typeof t.type=="string"&&function(e){var r=e.props,n=e.type,a={},i=n.indexOf("-")===-1;for(var s in r){var o=r[s];if(!(s==="value"&&"defaultValue"in r&&o==null||v0&&s==="children"&&n==="noscript"||s==="class"||s==="className")){var u=s.toLowerCase();s==="defaultValue"&&"value"in r&&r.value==null?s="value":s==="download"&&o===!0?o="":u==="translate"&&o==="no"?o=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?s="ondblclick":u!=="onchange"||n!=="input"&&n!=="textarea"||h0(r.type)?u==="onfocus"?s="onfocusin":u==="onblur"?s="onfocusout":f0.test(s)&&(s=u):u=s="oninput":i&&c0.test(s)?s=s.replace(d0,"-$&").toLowerCase():o===null&&(o=void 0),u==="oninput"&&a[s=u]&&(s="oninputCapture"),a[s]=o}}n=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=yr(r.children).forEach(function(l){l.props.selected=a.value.indexOf(l.props.value)!=-1})),n=="select"&&a.defaultValue!=null&&(a.value=yr(r.children).forEach(function(l){l.props.selected=a.multiple?a.defaultValue.indexOf(l.props.value)!=-1:a.defaultValue==l.props.value})),r.class&&!r.className?(a.class=r.class,Object.defineProperty(a,"className",y0)):(r.className&&!r.class||r.class&&r.className)&&(a.class=a.className=r.className),e.props=a}(t),t.$$typeof=lp,of&&of(t)};var uf=Pe.__r;Pe.__r=function(t){uf&&uf(t),Wl=t.__c};var lf=Pe.diffed;Pe.diffed=function(t){lf&&lf(t);var e=t.props,r=t.__e;r!=null&&t.type==="textarea"&&"value"in e&&e.value!==r.value&&(r.value=e.value==null?"":e.value),Wl=null};var dp={ReactCurrentDispatcher:{current:{readContext:function(t){return Wl.__n[t.__c].props.value},useCallback:jn,useContext:ht,useDebugValue:Vl,useDeferredValue:ql,useEffect:cr,useId:sa,useImperativeHandle:Ol,useInsertionEffect:ei,useLayoutEffect:xn,useMemo:Jt,useReducer:Es,useRef:Ot,useState:ia,useSyncExternalStore:Nl,useTransition:$l}}},b0="18.3.1";function vp(t){return Me.bind(null,t)}function oa(t){return!!t&&t.$$typeof===lp}function hp(t){return oa(t)&&t.type===Yt}function pp(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function Cs(t){return oa(t)?e0.apply(null,arguments):t}function gp(t){return!!t.__k&&(Xn(null,t),!0)}function mp(t){return t&&(t.base||t.nodeType===1&&t)||null}var yp=function(t,e){return t(e)},bp=function(t,e){return t(e)},wp=Yt,xp=oa,Ss={useState:ia,useId:sa,useReducer:Es,useEffect:cr,useLayoutEffect:xn,useInsertionEffect:ei,useTransition:$l,useDeferredValue:ql,useSyncExternalStore:Nl,startTransition:zl,useRef:Ot,useImperativeHandle:Ol,useMemo:Jt,useCallback:jn,useContext:ht,useDebugValue:Vl,version:"18.3.1",Children:Hl,render:cp,hydrate:fp,unmountComponentAtNode:gp,createPortal:up,createElement:Me,createContext:Hr,createFactory:vp,cloneElement:Cs,createRef:Gh,Fragment:Yt,isValidElement:oa,isElement:xp,isFragment:hp,isMemo:pp,findDOMNode:mp,Component:Kt,PureComponent:es,memo:np,forwardRef:Ul,flushSync:bp,unstable_batchedUpdates:yp,StrictMode:wp,Suspense:ka,SuspenseList:On,lazy:op,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:dp};const w0=Object.freeze(Object.defineProperty({__proto__:null,Children:Hl,Component:Kt,Fragment:Yt,PureComponent:es,StrictMode:wp,Suspense:ka,SuspenseList:On,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:dp,cloneElement:Cs,createContext:Hr,createElement:Me,createFactory:vp,createPortal:up,createRef:Gh,default:Ss,findDOMNode:mp,flushSync:bp,forwardRef:Ul,hydrate:fp,isElement:xp,isFragment:hp,isMemo:pp,isValidElement:oa,lazy:op,memo:np,render:cp,startTransition:zl,unmountComponentAtNode:gp,unstable_batchedUpdates:yp,useCallback:jn,useContext:ht,useDebugValue:Vl,useDeferredValue:ql,useEffect:cr,useErrorBoundary:n0,useId:sa,useImperativeHandle:Ol,useInsertionEffect:ei,useLayoutEffect:xn,useMemo:Jt,useReducer:Es,useRef:Ot,useState:ia,useSyncExternalStore:Nl,useTransition:$l,version:b0},Symbol.toStringTag,{value:"Module"}));function x0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var Tp={exports:{}},Ep={};const Cp=T0(w0);var Sp={exports:{}},Pp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=Cp;function E0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var C0=typeof Object.is=="function"?Object.is:E0,S0=Qn.useState,P0=Qn.useEffect,_0=Qn.useLayoutEffect,D0=Qn.useDebugValue;function A0(t,e){var r=e(),n=S0({inst:{value:r,getSnapshot:e}}),a=n[0].inst,i=n[1];return _0(function(){a.value=r,a.getSnapshot=e,no(a)&&i({inst:a})},[t,r,e]),P0(function(){return no(a)&&i({inst:a}),t(function(){no(a)&&i({inst:a})})},[t]),D0(r),r}function no(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!C0(t,r)}catch{return!0}}function k0(t,e){return e()}var B0=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?k0:A0;Pp.useSyncExternalStore=Qn.useSyncExternalStore!==void 0?Qn.useSyncExternalStore:B0;Sp.exports=Pp;var R0=Sp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=Cp,M0=R0;function L0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var I0=typeof Object.is=="function"?Object.is:L0,O0=M0.useSyncExternalStore,V0=Ps.useRef,F0=Ps.useEffect,N0=Ps.useMemo,z0=Ps.useDebugValue;Ep.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var i=V0(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=N0(function(){function u(v){if(!l){if(l=!0,c=v,v=n(v),a!==void 0&&s.hasValue){var h=s.value;if(a(h,v))return f=h}return f=v}if(h=f,I0(c,v))return h;var g=n(v);return a!==void 0&&a(h,g)?(c=v,h):(c=v,f=g)}var l=!1,c,f,d=r===void 0?null:r;return[function(){return u(e())},d===null?void 0:function(){return u(d())}]},[e,r,n,a]);var o=O0(t,i[0],i[1]);return F0(function(){s.hasValue=!0,s.value=o},[o]),z0(o),o};Tp.exports=Ep;var q0=Tp.exports;const $0=x0(q0),_p={},{useDebugValue:U0}=Ss,{useSyncExternalStoreWithSelector:H0}=$0;let cf=!1;const W0=t=>t;function G0(t,e=W0,r){(_p?"production":void 0)!=="production"&&r&&!cf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),cf=!0);const n=H0(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return U0(n),n}const ff=t=>{(_p?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?r0(t):t,r=(n,a)=>G0(e,n,a);return Object.assign(r,e),r},K0=t=>t?ff(t):ff,Ni="entropy_stickies",Y0=()=>{try{const t=localStorage.getItem(Ni);return t?JSON.parse(t):[]}catch{return[]}},Qu=K0((t,e)=>({stickies:Y0(),addSticky:r=>t(n=>{const a=[...n.stickies,r];return localStorage.setItem(Ni,JSON.stringify(a)),{stickies:a}}),updateSticky:(r,n)=>t(a=>{const i=a.stickies.map(s=>s.id===r?{...s,...n}:s);return localStorage.setItem(Ni,JSON.stringify(i)),{stickies:i}}),removeSticky:r=>t(n=>{const a=n.stickies.filter(i=>i.id!==r);return localStorage.setItem(Ni,JSON.stringify(a)),{stickies:a}})}));function Ju(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function X0(t){if(Array.isArray(t))return t}function Z0(t){if(Array.isArray(t))return Ju(t)}function Wr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ap(n.key),n)}}function Gr(t,e,r){return e&&j0(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vt(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Gl(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,i=u},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw i}}}}function Dp(t,e,r){return(e=Ap(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q0(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J0(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,o=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function eb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ut(t,e){return X0(t)||J0(t,e)||Gl(t,e)||eb()}function ts(t){return Z0(t)||Q0(t)||Gl(t)||tb()}function rb(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ap(t){var e=rb(t,"string");return typeof e=="symbol"?e:e+""}function ct(t){"@babel/helpers - typeof";return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(t)}function Gl(t,e){if(t){if(typeof t=="string")return Ju(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ju(t,e):void 0}}var ot=typeof window>"u"?null:window,df=ot?ot.navigator:null;ot&&ot.document;var nb=ct(""),kp=ct({}),ab=ct(function(){}),ib=typeof HTMLElement>"u"?"undefined":ct(HTMLElement),ti=function(e){return e&&e.instanceString&&je(e.instanceString)?e.instanceString():null},fe=function(e){return e!=null&&ct(e)==nb},je=function(e){return e!=null&&ct(e)===ab},$e=function(e){return!zt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Be=function(e){return e!=null&&ct(e)===kp&&!$e(e)&&e.constructor===Object},sb=function(e){return e!=null&&ct(e)===kp},ne=function(e){return e!=null&&ct(e)===ct(1)&&!isNaN(e)},ob=function(e){return ne(e)&&Math.floor(e)===e},rs=function(e){if(ib!=="undefined")return e!=null&&e instanceof HTMLElement},zt=function(e){return ri(e)||Bp(e)},ri=function(e){return ti(e)==="collection"&&e._private.single},Bp=function(e){return ti(e)==="collection"&&!e._private.single},Kl=function(e){return ti(e)==="core"},Rp=function(e){return ti(e)==="stylesheet"},ub=function(e){return ti(e)==="event"},Or=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},lb=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},cb=function(e){return Be(e)&&ne(e.x1)&&ne(e.x2)&&ne(e.y1)&&ne(e.y2)},fb=function(e){return sb(e)&&je(e.then)},db=function(){return df&&df.userAgent.match(/msie|trident|edge/i)},Jn=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,u=r.apply(i,s),l=n.cache;return(o=l[u])||(o=l[u]=e.apply(i,s)),o};return n.cache={},n},Yl=Jn(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),_s=Jn(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Mp=Jn(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),vf=function(e){return Or(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",vb="rgb[a]?\\(("+lt+"[%]?)\\s*,\\s*("+lt+"[%]?)\\s*,\\s*("+lt+"[%]?)(?:\\s*,\\s*("+lt+"))?\\)",hb="rgb[a]?\\((?:"+lt+"[%]?)\\s*,\\s*(?:"+lt+"[%]?)\\s*,\\s*(?:"+lt+"[%]?)(?:\\s*,\\s*(?:"+lt+"))?\\)",pb="hsl[a]?\\(("+lt+")\\s*,\\s*("+lt+"[%])\\s*,\\s*("+lt+"[%])(?:\\s*,\\s*("+lt+"))?\\)",gb="hsl[a]?\\((?:"+lt+")\\s*,\\s*(?:"+lt+"[%])\\s*,\\s*(?:"+lt+"[%])(?:\\s*,\\s*(?:"+lt+"))?\\)",mb="\\#[0-9a-fA-F]{3}",yb="\\#[0-9a-fA-F]{6}",Lp=function(e,r){return e<r?-1:e>r?1:0},bb=function(e,r){return-1*Lp(e,r)},he=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},wb=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},xb=function(e){var r,n,a,i,s,o,u,l;function c(h,g,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(g-h)*6*p:p<1/2?g:p<2/3?h+(g-h)*(2/3-p)*6:h}var f=new RegExp("^"+pb+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=u=l=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,v=2*i-d;o=Math.round(255*c(v,d,n+1/3)),u=Math.round(255*c(v,d,n)),l=Math.round(255*c(v,d,n-1/3))}r=[o,u,l,s]}return r},Tb=function(e){var r,n=new RegExp("^"+vb+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},Eb=function(e){return Cb[e.toLowerCase()]},Ip=function(e){return($e(e)?e:null)||Eb(e)||wb(e)||Tb(e)||xb(e)},Cb={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Op=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(Be(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},Vp=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(Be(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ao,hf;function ai(){if(hf)return ao;hf=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return ao=t,ao}var io,pf;function Sb(){if(pf)return io;pf=1;var t=typeof xi=="object"&&xi&&xi.Object===Object&&xi;return io=t,io}var so,gf;function Ds(){if(gf)return so;gf=1;var t=Sb(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return so=r,so}var oo,mf;function Pb(){if(mf)return oo;mf=1;var t=Ds(),e=function(){return t.Date.now()};return oo=e,oo}var uo,yf;function _b(){if(yf)return uo;yf=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return uo=e,uo}var lo,bf;function Db(){if(bf)return lo;bf=1;var t=_b(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return lo=r,lo}var co,wf;function Xl(){if(wf)return co;wf=1;var t=Ds(),e=t.Symbol;return co=e,co}var fo,xf;function Ab(){if(xf)return fo;xf=1;var t=Xl(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var c=n.call(s);return l&&(o?s[a]=u:delete s[a]),c}return fo=i,fo}var vo,Tf;function kb(){if(Tf)return vo;Tf=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return vo=r,vo}var ho,Ef;function Fp(){if(Ef)return ho;Ef=1;var t=Xl(),e=Ab(),r=kb(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return ho=s,ho}var po,Cf;function Bb(){if(Cf)return po;Cf=1;function t(e){return e!=null&&typeof e=="object"}return po=t,po}var go,Sf;function ii(){if(Sf)return go;Sf=1;var t=Fp(),e=Bb(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return go=n,go}var mo,Pf;function Rb(){if(Pf)return mo;Pf=1;var t=Db(),e=ai(),r=ii(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=t(l);var f=i.test(l);return f||s.test(l)?o(l.slice(2),f?2:8):a.test(l)?n:+l}return mo=u,mo}var yo,_f;function Mb(){if(_f)return yo;_f=1;var t=ai(),e=Pb(),r=Rb(),n="Expected a function",a=Math.max,i=Math.min;function s(o,u,l){var c,f,d,v,h,g,p=0,m=!1,y=!1,b=!0;if(typeof o!="function")throw new TypeError(n);u=r(u)||0,t(l)&&(m=!!l.leading,y="maxWait"in l,d=y?a(r(l.maxWait)||0,u):d,b="trailing"in l?!!l.trailing:b);function w(A){var B=c,R=f;return c=f=void 0,p=A,v=o.apply(R,B),v}function T(A){return p=A,h=setTimeout(C,u),m?w(A):v}function E(A){var B=A-g,R=A-p,M=u-B;return y?i(M,d-R):M}function x(A){var B=A-g,R=A-p;return g===void 0||B>=u||B<0||y&&R>=d}function C(){var A=e();if(x(A))return S(A);h=setTimeout(C,E(A))}function S(A){return h=void 0,b&&c?w(A):(c=f=void 0,v)}function D(){h!==void 0&&clearTimeout(h),p=0,c=g=f=h=void 0}function _(){return h===void 0?v:S(e())}function k(){var A=e(),B=x(A);if(c=arguments,f=this,g=A,B){if(h===void 0)return T(g);if(y)return clearTimeout(h),h=setTimeout(C,u),w(g)}return h===void 0&&(h=setTimeout(C,u)),v}return k.cancel=D,k.flush=_,k}return yo=s,yo}var Lb=Mb(),si=ni(Lb),bo=ot?ot.performance:null,Np=bo&&bo.now?function(){return bo.now()}:function(){return Date.now()},Ib=function(){if(ot){if(ot.requestAnimationFrame)return function(t){ot.requestAnimationFrame(t)};if(ot.mozRequestAnimationFrame)return function(t){ot.mozRequestAnimationFrame(t)};if(ot.webkitRequestAnimationFrame)return function(t){ot.webkitRequestAnimationFrame(t)};if(ot.msRequestAnimationFrame)return function(t){ot.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Np())},1e3/60)}}(),ns=function(e){return Ib(e)},Tr=Np,ln=9261,zp=65599,In=5381,qp=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln,n=r,a;a=e.next(),!a.done;)n=n*zp+a.value|0;return n},Na=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln;return r*zp+e|0},za=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In;return(r<<5)+r+e|0},Ob=function(e,r){return e*2097152+r},Dr=function(e){return e[0]*2097152+e[1]},Ti=function(e,r){return[Na(e[0],r[0]),za(e[1],r[1])]},Df=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return qp(s,r)},hn=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return qp(s,r)},$p=function(){return Vb(arguments)},Vb=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=hn(a):r=hn(a,r)}return r},Af=!0,Fb=console.warn!=null,Nb=console.trace!=null,Zl=Number.MAX_SAFE_INTEGER||9007199254740991,Up=function(){return!0},as=function(){return!1},kf=function(){return 0},jl=function(){},Ze=function(e){throw new Error(e)},Hp=function(e){if(e!==void 0)Af=!!e;else return Af},Oe=function(e){Hp()&&(Fb?console.warn(e):(console.log(e),Nb&&console.trace()))},zb=function(e){return he({},e)},or=function(e){return e==null?e:$e(e)?e.slice():Be(e)?zb(e):e},qb=function(e){return e.slice()},Wp=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},$b={},Gp=function(){return $b},xt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},Vr=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Ql=function(e){e.splice(0,e.length)},Ub=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Lt=function(e,r,n){return n&&(r=Mp(n,r)),e[r]},pr=function(e,r,n,a){n&&(r=Mp(n,r)),e[r]=a},Hb=function(){function t(){Wr(this,t),this._obj={}}return Gr(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),gr=typeof Map<"u"?Map:Hb,Wb="undefined",Gb=function(){function t(e){if(Wr(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Gr(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),ua=(typeof Set>"u"?"undefined":ct(Set))!==Wb?Set:Gb,As=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Kl(e)){Ze("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){Ze("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new ua,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),u=e.zoom();i.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];$e(r.classes)?l=r.classes:fe(r.classes)&&(l=r.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var d=l[c];!d||d===""||i.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var v=r.style||r.css;v&&(Oe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(v))},Bf=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;Be(n)&&!zt(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!je(a)?a:i,a=je(a)?a:function(){};for(var o=this._private.cy,u=n=fe(n)?this.filter(n):n,l=[],c=[],f={},d={},v={},h=0,g,p=this.byGroup(),m=p.nodes,y=p.edges,b=0;b<u.length;b++){var w=u[b],T=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(v[T]=!0,c.push(w)),d[T]=0)}for(var E=function(){var A=e.bfs?l.shift():l.pop(),B=A.id();if(e.dfs){if(v[B])return 0;v[B]=!0,c.push(A)}var R=d[B],M=f[B],L=M!=null?M.source():null,I=M!=null?M.target():null,N=M==null?void 0:A.same(L)?I[0]:L[0],$;if($=a(A,M,N,h++,R),$===!0)return g=A,1;if($===!1)return 1;for(var O=A.connectedEdges().filter(function(Y){return(!i||Y.source().same(A))&&y.has(Y)}),F=0;F<O.length;F++){var G=O[F],X=G.connectedNodes().filter(function(Y){return!Y.same(A)&&m.has(Y)}),j=X.id();X.length!==0&&!v[j]&&(X=X[0],l.push(X),e.bfs&&(v[j]=!0,c.push(X)),f[j]=G,d[j]=d[B]+1)}},x;l.length!==0&&(x=E(),!(x!==0&&x===1)););for(var C=o.collection(),S=0;S<c.length;S++){var D=c[S],_=f[D.id()];_!=null&&C.push(_),C.push(D)}return{path:o.collection(C),found:o.collection(g)}}},qa={breadthFirstSearch:Bf({bfs:!0}),depthFirstSearch:Bf({dfs:!0})};qa.bfs=qa.breadthFirstSearch;qa.dfs=qa.depthFirstSearch;var zi={exports:{}},Kb=zi.exports,Rf;function Yb(){return Rf||(Rf=1,function(t,e){(function(){var r,n,a,i,s,o,u,l,c,f,d,v,h,g,p;a=Math.floor,f=Math.min,n=function(m,y){return m<y?-1:m>y?1:0},c=function(m,y,b,w,T){var E;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=m.length);b<w;)E=a((b+w)/2),T(y,m[E])<0?w=E:b=E+1;return[].splice.apply(m,[b,b-b].concat(y)),y},o=function(m,y,b){return b==null&&(b=n),m.push(y),g(m,0,m.length-1,b)},s=function(m,y){var b,w;return y==null&&(y=n),b=m.pop(),m.length?(w=m[0],m[0]=b,p(m,0,y)):w=b,w},l=function(m,y,b){var w;return b==null&&(b=n),w=m[0],m[0]=y,p(m,0,b),w},u=function(m,y,b){var w;return b==null&&(b=n),m.length&&b(m[0],y)<0&&(w=[m[0],y],y=w[0],m[0]=w[1],p(m,0,b)),y},i=function(m,y){var b,w,T,E,x,C;for(y==null&&(y=n),E=(function(){C=[];for(var S=0,D=a(m.length/2);0<=D?S<D:S>D;0<=D?S++:S--)C.push(S);return C}).apply(this).reverse(),x=[],w=0,T=E.length;w<T;w++)b=E[w],x.push(p(m,b,y));return x},h=function(m,y,b){var w;if(b==null&&(b=n),w=m.indexOf(y),w!==-1)return g(m,0,w,b),p(m,w,b)},d=function(m,y,b){var w,T,E,x,C;if(b==null&&(b=n),T=m.slice(0,y),!T.length)return T;for(i(T,b),C=m.slice(y),E=0,x=C.length;E<x;E++)w=C[E],u(T,w,b);return T.sort(b).reverse()},v=function(m,y,b){var w,T,E,x,C,S,D,_,k;if(b==null&&(b=n),y*10<=m.length){if(E=m.slice(0,y).sort(b),!E.length)return E;for(T=E[E.length-1],D=m.slice(y),x=0,S=D.length;x<S;x++)w=D[x],b(w,T)<0&&(c(E,w,0,null,b),E.pop(),T=E[E.length-1]);return E}for(i(m,b),k=[],C=0,_=f(y,m.length);0<=_?C<_:C>_;0<=_?++C:--C)k.push(s(m,b));return k},g=function(m,y,b,w){var T,E,x;for(w==null&&(w=n),T=m[b];b>y;){if(x=b-1>>1,E=m[x],w(T,E)<0){m[b]=E,b=x;continue}break}return m[b]=T},p=function(m,y,b){var w,T,E,x,C;for(b==null&&(b=n),T=m.length,C=y,E=m[y],w=2*y+1;w<T;)x=w+1,x<T&&!(b(m[w],m[x])<0)&&(w=x),m[y]=m[w],y=w,w=2*y+1;return m[y]=E,g(m,C,y,b)},r=function(){m.push=o,m.pop=s,m.replace=l,m.pushpop=u,m.heapify=i,m.updateItem=h,m.nlargest=d,m.nsmallest=v;function m(y){this.cmp=y??n,this.nodes=[]}return m.prototype.push=function(y){return o(this.nodes,y,this.cmp)},m.prototype.pop=function(){return s(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},m.prototype.replace=function(y){return l(this.nodes,y,this.cmp)},m.prototype.pushpop=function(y){return u(this.nodes,y,this.cmp)},m.prototype.heapify=function(){return i(this.nodes,this.cmp)},m.prototype.updateItem=function(y){return h(this.nodes,y,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var y;return y=new m,y.nodes=this.nodes.slice(0),y},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,y){return t.exports=y()}(this,function(){return r})}).call(Kb)}(zi)),zi.exports}var wo,Mf;function Xb(){return Mf||(Mf=1,wo=Yb()),wo}var Zb=Xb(),oi=ni(Zb),jb=xt({root:null,weight:function(e){return 1},directed:!1}),Qb={dijkstra:function(e){if(!Be(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=jb(e),a=n.root,i=n.weight,s=n.directed,o=this,u=i,l=fe(a)?this.filter(a)[0]:a[0],c={},f={},d={},v=this.byGroup(),h=v.nodes,g=v.edges;g.unmergeBy(function(R){return R.isLoop()});for(var p=function(M){return c[M.id()]},m=function(M,L){c[M.id()]=L,y.updateItem(M)},y=new oi(function(R,M){return p(R)-p(M)}),b=0;b<h.length;b++){var w=h[b];c[w.id()]=w.same(l)?0:1/0,y.push(w)}for(var T=function(M,L){for(var I=(s?M.edgesTo(L):M.edgesWith(L)).intersect(g),N=1/0,$,O=0;O<I.length;O++){var F=I[O],G=u(F);(G<N||!$)&&(N=G,$=F)}return{edge:$,dist:N}};y.size()>0;){var E=y.pop(),x=p(E),C=E.id();if(d[C]=x,x!==1/0)for(var S=E.neighborhood().intersect(h),D=0;D<S.length;D++){var _=S[D],k=_.id(),A=T(E,_),B=x+A.dist;B<p(_)&&(m(_,B),f[k]={node:E,edge:A.edge})}}return{distanceTo:function(M){var L=fe(M)?h.filter(M)[0]:M[0];return d[L.id()]},pathTo:function(M){var L=fe(M)?h.filter(M)[0]:M[0],I=[],N=L,$=N.id();if(L.length>0)for(I.unshift(L);f[$];){var O=f[$];I.unshift(O.edge),I.unshift(O.node),N=O.node,$=N.id()}return o.spawn(I)}}}},Jb={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,u=function(w){for(var T=0;T<s.length;T++){var E=s[T];if(E.has(w))return T}},l=0;l<i;l++)s[l]=this.spawn(n[l]);for(var c=a.sort(function(b,w){return e(b)-e(w)}),f=0;f<c.length;f++){var d=c[f],v=d.source()[0],h=d.target()[0],g=u(v),p=u(h),m=s[g],y=s[p];g!==p&&(o.merge(d),m.merge(y),s.splice(p,1))}return o}},e1=xt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),t1={aStar:function(e){var r=this.cy(),n=e1(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var l=a.id(),c=i.id(),f={},d={},v={},h=new oi(function($,O){return d[$.id()]-d[O.id()]}),g=new ua,p={},m={},y=function(O,F){h.push(O),g.add(F)},b,w,T=function(){b=h.pop(),w=b.id(),g.delete(w)},E=function(O){return g.has(O)};y(a,l),f[l]=0,d[l]=s(a);for(var x=0;h.size()>0;){if(T(),x++,w===c){for(var C=[],S=i,D=c,_=m[D];C.unshift(S),_!=null&&C.unshift(_),S=p[D],S!=null;)D=S.id(),_=m[D];return{found:!0,distance:f[w],path:this.spawn(C),steps:x}}v[w]=!0;for(var k=b._private.edges,A=0;A<k.length;A++){var B=k[A];if(this.hasElementWithId(B.id())&&!(o&&B.data("source")!==w)){var R=B.source(),M=B.target(),L=R.id()!==w?R:M,I=L.id();if(this.hasElementWithId(I)&&!v[I]){var N=f[w]+u(B);if(!E(I)){f[I]=N,d[I]=N+s(L),y(L,I),p[I]=b,m[I]=B;continue}N<f[I]&&(f[I]=N,d[I]=N+s(L),p[I]=b,m[I]=B)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},r1=xt({weight:function(e){return 1},directed:!1}),n1={floydWarshall:function(e){for(var r=this.cy(),n=r1(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),u=o.nodes,l=o.edges,c=u.length,f=c*c,d=function(G){return u.indexOf(G)},v=function(G){return u[G]},h=new Array(f),g=0;g<f;g++){var p=g%c,m=(g-p)/c;m===p?h[g]=0:h[g]=1/0}for(var y=new Array(f),b=new Array(f),w=0;w<l.length;w++){var T=l[w],E=T.source()[0],x=T.target()[0];if(E!==x){var C=d(E),S=d(x),D=C*c+S,_=s(T);if(h[D]>_&&(h[D]=_,y[D]=S,b[D]=T),!i){var k=S*c+C;!i&&h[k]>_&&(h[k]=_,y[k]=C,b[k]=T)}}}for(var A=0;A<c;A++)for(var B=0;B<c;B++)for(var R=B*c+A,M=0;M<c;M++){var L=B*c+M,I=A*c+M;h[R]+h[I]<h[L]&&(h[L]=h[R]+h[I],y[L]=y[R])}var N=function(G){return(fe(G)?r.filter(G):G)[0]},$=function(G){return d(N(G))},O={distance:function(G,X){var j=$(G),Y=$(X);return h[j*c+Y]},path:function(G,X){var j=$(G),Y=$(X),ee=v(j);if(j===Y)return ee.collection();if(y[j*c+Y]==null)return r.collection();var re=r.collection(),Z=j,V;for(re.merge(ee);j!==Y;)Z=j,j=y[j*c+Y],V=b[Z*c+j],re.merge(V),re.merge(v(j));return re}};return O}},a1=xt({weight:function(e){return 1},directed:!1,root:null}),i1={bellmanFord:function(e){var r=this,n=a1(e),a=n.weight,i=n.directed,s=n.root,o=a,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,v=d.length,h=new gr,g=!1,p=[];s=l.collection(s)[0],f.unmergeBy(function(Ve){return Ve.isLoop()});for(var m=f.length,y=function(se){var oe=h.get(se.id());return oe||(oe={},h.set(se.id(),oe)),oe},b=function(se){return(fe(se)?l.$(se):se)[0]},w=function(se){return y(b(se)).dist},T=function(se){for(var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,de=b(se),pe=[],ve=de;;){if(ve==null)return r.spawn();var ye=y(ve),xe=ye.edge,De=ye.pred;if(pe.unshift(ve[0]),ve.same(oe)&&pe.length>0)break;xe!=null&&pe.unshift(xe),ve=De}return u.spawn(pe)},E=0;E<v;E++){var x=d[E],C=y(x);x.same(s)?C.dist=0:C.dist=1/0,C.pred=null,C.edge=null}for(var S=!1,D=function(se,oe,de,pe,ve,ye){var xe=pe.dist+ye;xe<ve.dist&&!de.same(pe.edge)&&(ve.dist=xe,ve.pred=se,ve.edge=de,S=!0)},_=1;_<v;_++){S=!1;for(var k=0;k<m;k++){var A=f[k],B=A.source(),R=A.target(),M=o(A),L=y(B),I=y(R);D(B,R,A,L,I,M),i||D(R,B,A,I,L,M)}if(!S)break}if(S)for(var N=[],$=0;$<m;$++){var O=f[$],F=O.source(),G=O.target(),X=o(O),j=y(F).dist,Y=y(G).dist;if(j+X<Y||!i&&Y+X<j)if(g||(Oe("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var ee=[];j+X<Y&&ee.push(F),!i&&Y+X<j&&ee.push(G);for(var re=ee.length,Z=0;Z<re;Z++){var V=ee[Z],z=[V];z.push(y(V).edge);for(var U=y(V).pred;z.indexOf(U)===-1;)z.push(U),z.push(y(U).edge),U=y(U).pred;z=z.slice(z.indexOf(U));for(var te=z[0].id(),ae=0,we=2;we<z.length;we+=2)z[we].id()<te&&(te=z[we].id(),ae=we);z=z.slice(ae).concat(z.slice(0,ae)),z.push(z[0]);var Ge=z.map(function(Ve){return Ve.id()}).join(",");N.indexOf(Ge)===-1&&(p.push(u.spawn(z)),N.push(Ge))}}else break}return{distanceTo:w,pathTo:T,hasNegativeWeightCycle:g,negativeWeightCycles:p}}},s1=Math.sqrt(2),o1=function(e,r,n){n.length===0&&Ze("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],u=r[s],l=n,c=l.length-1;c>=0;c--){var f=l[c],d=f[1],v=f[2];(r[d]===o&&r[v]===u||r[d]===u&&r[v]===o)&&l.splice(c,1)}for(var h=0;h<l.length;h++){var g=l[h];g[1]===u?(l[h]=g.slice(),l[h][1]=o):g[2]===u&&(l[h]=g.slice(),l[h][2]=o)}for(var p=0;p<r.length;p++)r[p]===u&&(r[p]=o);return l},xo=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=o1(i,e,r),n--}return r},u1={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(I){return I.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/s1);if(i<2){Ze("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<s;c++){var f=a[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,v=[],h=new Array(i),g=new Array(i),p=new Array(i),m=function(N,$){for(var O=0;O<i;O++)$[O]=N[O]},y=0;y<=o;y++){for(var b=0;b<i;b++)g[b]=b;var w=xo(g,l.slice(),i,u),T=w.slice();m(g,p);var E=xo(g,w,u,2),x=xo(p,T,u,2);E.length<=x.length&&E.length<d?(d=E.length,v=E,m(g,h)):x.length<=E.length&&x.length<d&&(d=x.length,v=x,m(p,h))}for(var C=this.spawn(v.map(function(I){return a[I[0]]})),S=this.spawn(),D=this.spawn(),_=h[0],k=0;k<h.length;k++){var A=h[k],B=n[k];A===_?S.merge(B):D.merge(B)}var R=function(N){var $=e.spawn();return N.forEach(function(O){$.merge(O),O.connectedEdges().forEach(function(F){e.contains(F)&&!C.contains(F)&&$.merge(F)})}),$},M=[R(S),R(D)],L={cut:C,components:M,partition1:S,partition2:D};return L}},l1=function(e){return{x:e.x,y:e.y}},ks=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Kp=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Vn=function(e){return{x:e[0],y:e[1]}},c1=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},f1=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},d1=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},v1=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}i&&e.sort(function(d,v){return d-v});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+o]:(e[f-1+o]+e[f+o])/2},h1=function(e){return Math.PI*e/180},Ei=function(e,r){return Math.atan2(r,e)-Math.PI/2},Jl=Math.log2||function(t){return Math.log(t)/Math.log(2)},ec=function(e){return e>0?1:e<0?-1:0},pn=function(e,r){return Math.sqrt(tn(e,r))},tn=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},p1=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},vt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Hn=function(e,r,n,a){return{x:vt(e.x,r.x,n.x,a),y:vt(e.y,r.y,n.y,a)}},g1=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=pn(e,r),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},$a=function(e,r,n){return Math.max(e,Math.min(n,r))},Ft=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},m1=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},y1=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},b1=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},Yp=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},w1=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},qi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},$i=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=ut(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Lf=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},tc=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},ea=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},x1=function(e,r){return ea(e,r.x,r.y)},T1=function(e,r){return ea(e,r.x1,r.y1)&&ea(e,r.x2,r.y2)},Xp=function(e,r,n,a,i,s,o){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?Fr(i,s):u,c=i/2,f=s/2;l=Math.min(l,c,f);var d=l!==c,v=l!==f,h;if(d){var g=n-c+l-o,p=a-f-o,m=n+c-l+o,y=p;if(h=Rr(e,r,n,a,g,p,m,y,!1),h.length>0)return h}if(v){var b=n+c+o,w=a-f+l-o,T=b,E=a+f-l+o;if(h=Rr(e,r,n,a,b,w,T,E,!1),h.length>0)return h}if(d){var x=n-c+l-o,C=a+f+o,S=n+c-l+o,D=C;if(h=Rr(e,r,n,a,x,C,S,D,!1),h.length>0)return h}if(v){var _=n-c-o,k=a-f+l-o,A=_,B=a+f-l+o;if(h=Rr(e,r,n,a,_,k,A,B,!1),h.length>0)return h}var R;{var M=n-c+l,L=a-f+l;if(R=Sa(e,r,n,a,M,L,l+o),R.length>0&&R[0]<=M&&R[1]<=L)return[R[0],R[1]]}{var I=n+c-l,N=a-f+l;if(R=Sa(e,r,n,a,I,N,l+o),R.length>0&&R[0]>=I&&R[1]<=N)return[R[0],R[1]]}{var $=n+c-l,O=a+f-l;if(R=Sa(e,r,n,a,$,O,l+o),R.length>0&&R[0]>=$&&R[1]>=O)return[R[0],R[1]]}{var F=n-c+l,G=a+f-l;if(R=Sa(e,r,n,a,F,G,l+o),R.length>0&&R[0]<=F&&R[1]>=G)return[R[0],R[1]]}return[]},E1=function(e,r,n,a,i,s,o){var u=o,l=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,s),d=Math.max(a,s);return l-u<=e&&e<=c+u&&f-u<=r&&r<=d+u},C1=function(e,r,n,a,i,s,o,u,l){var c={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(a,u,s)-l,y2:Math.max(a,u,s)+l};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},S1=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,u=(-r+s)/o,l=(-r-s)/o;return[u,l]},P1=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,u,l,c,f,d,v,h;if(u=(3*n-r*r)/9,l=-(27*a)+r*(9*n-2*(r*r)),l/=54,o=u*u*u+l*l,i[1]=0,v=r/3,o>0){f=l+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=l-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-v+f+d,v+=(f+d)/2,i[4]=i[2]=-v,v=Math.sqrt(3)*(-d+f)/2,i[3]=v,i[5]=-v;return}if(i[5]=i[3]=0,o===0){h=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-v+2*h,i[4]=i[2]=-(h+v);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),h=2*Math.sqrt(u),i[0]=-v+h*Math.cos(c/3),i[2]=-v+h*Math.cos((c+2*Math.PI)/3),i[4]=-v+h*Math.cos((c+4*Math.PI)/3)},_1=function(e,r,n,a,i,s,o,u){var l=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*u+4*s*s-4*s*u+u*u,c=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*u-6*s*s+3*s*u,f=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*u-a*r+2*s*s+2*s*r-u*r,d=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,v=[];P1(l,c,f,d,v);for(var h=1e-7,g=[],p=0;p<6;p+=2)Math.abs(v[p+1])<h&&v[p]>=0&&v[p]<=1&&g.push(v[p]);g.push(1),g.push(0);for(var m=-1,y,b,w,T=0;T<g.length;T++)y=Math.pow(1-g[T],2)*n+2*(1-g[T])*g[T]*i+g[T]*g[T]*o,b=Math.pow(1-g[T],2)*a+2*(1-g[T])*g[T]*s+g[T]*g[T]*u,w=Math.pow(y-e,2)+Math.pow(b-r,2),m>=0?w<m&&(m=w):m=w;return m},D1=function(e,r,n,a,i,s){var o=[e-n,r-a],u=[i-n,s-a],l=u[0]*u[0]+u[1]*u[1],c=o[0]*o[0]+o[1]*o[1],f=o[0]*u[0]+o[1]*u[1],d=f*f/l;return f<0?c:d>l?(e-i)*(e-i)+(r-s)*(r-s):c-d},It=function(e,r,n){for(var a,i,s,o,u,l=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],o=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)u=(e-a)/(s-a)*(o-i)+i,u>r&&l++;else continue;return l%2!==0},Er=function(e,r,n,a,i,s,o,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var d=Math.cos(-f),v=Math.sin(-f),h=0;h<c.length/2;h++)c[h*2]=s/2*(n[h*2]*d-n[h*2+1]*v),c[h*2+1]=o/2*(n[h*2+1]*d+n[h*2]*v),c[h*2]+=a,c[h*2+1]+=i;var g;if(l>0){var p=ss(c,-l);g=is(p)}else g=c;return It(e,r,g)},A1=function(e,r,n,a,i,s,o,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(d<=Math.pow(f.radius,2))return!0}return It(e,r,l)},is=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],s=e[f*4+3],f<e.length/4-1?(o=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(o=e[0],u=e[1],l=e[2],c=e[3]);var d=Rr(n,a,i,s,o,u,l,c,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},ss=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-i,c=-(s-a),f=Math.sqrt(l*l+c*c),d=l/f,v=c/f;n[u*4]=a+d*r,n[u*4+1]=i+v*r,n[u*4+2]=s+d*r,n[u*4+3]=o+v*r}return n},k1=function(e,r,n,a,i,s){var o=n-e,u=a-r;o/=i,u/=s;var l=Math.sqrt(o*o+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(a-r)*f+r]},fn=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},Sa=function(e,r,n,a,i,s,o){var u=[n-e,a-r],l=[e-i,r-s],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),d=l[0]*l[0]+l[1]*l[1]-o*o,v=f*f-4*c*d;if(v<0)return[];var h=(-f+Math.sqrt(v))/(2*c),g=(-f-Math.sqrt(v))/(2*c),p=Math.min(h,g),m=Math.max(h,g),y=[];if(p>=0&&p<=1&&y.push(p),m>=0&&m<=1&&y.push(m),y.length===0)return[];var b=y[0]*u[0]+e,w=y[0]*u[1]+r;if(y.length>1){if(y[0]==y[1])return[b,w];var T=y[1]*u[0]+e,E=y[1]*u[1]+r;return[b,w,T,E]}else return[b,w]},To=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Rr=function(e,r,n,a,i,s,o,u,l){var c=e-i,f=n-e,d=o-i,v=r-s,h=a-r,g=u-s,p=d*v-g*c,m=f*v-h*c,y=g*f-d*h;if(y!==0){var b=p/y,w=m/y,T=.001,E=0-T,x=1+T;return E<=b&&b<=x&&E<=w&&w<=x?[e+b*f,r+b*h]:l?[e+b*f,r+b*h]:[]}else return p===0||m===0?To(e,n,o)===o?[o,u]:To(e,n,i)===i?[i,s]:To(i,o,n)===n?[n,a]:[]:[]},Ua=function(e,r,n,a,i,s,o,u){var l=[],c,f=new Array(n.length),d=!0;s==null&&(d=!1);var v;if(d){for(var h=0;h<f.length/2;h++)f[h*2]=n[h*2]*s+a,f[h*2+1]=n[h*2+1]*o+i;if(u>0){var g=ss(f,-u);v=is(g)}else v=f}else v=n;for(var p,m,y,b,w=0;w<v.length/2;w++)p=v[w*2],m=v[w*2+1],w<v.length/2-1?(y=v[(w+1)*2],b=v[(w+1)*2+1]):(y=v[0],b=v[1]),c=Rr(e,r,a,i,p,m,y,b),c.length!==0&&l.push(c[0],c[1]);return l},B1=function(e,r,n,a,i,s,o,u,l){var c=[],f,d=new Array(n.length*2);l.forEach(function(y,b){b===0?(d[d.length-2]=y.startX,d[d.length-1]=y.startY):(d[b*4-2]=y.startX,d[b*4-1]=y.startY),d[b*4]=y.stopX,d[b*4+1]=y.stopY,f=Sa(e,r,a,i,y.cx,y.cy,y.radius),f.length!==0&&c.push(f[0],f[1])});for(var v=0;v<d.length/4;v++)f=Rr(e,r,a,i,d[v*4],d[v*4+1],d[v*4+2],d[v*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var h=[c[0],c[1]],g=Math.pow(h[0]-e,2)+Math.pow(h[1]-r,2),p=1;p<c.length/2;p++){var m=Math.pow(c[p*2]-e,2)+Math.pow(c[p*2+1]-r,2);m<=g&&(h[0]=c[p*2],h[1]=c[p*2+1],g=m)}return h}return c},Ci=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},Dt=function(e,r){var n=el(e,r);return n=Zp(n),n},Zp=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<a;l++)r=e[2*l],n=e[2*l+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);for(var c=2/(o-i),f=2/(u-s),d=0;d<a;d++)r=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var v=0;v<a;v++)n=e[2*v+1]=e[2*v+1]+(-1-s);return e},el=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},Fr=function(e,r){return Math.min(e/4,r/4,8)},jp=function(e,r){return Math.min(e/10,r/10,8)},rc=function(){return 8},R1=function(e,r,n){return[e-2*r+n,2*(r-e),e]},tl=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function M1(t,e){function r(f){for(var d=[],v=0;v<f.length;v++){var h=f[v],g=f[(v+1)%f.length],p={x:g.x-h.x,y:g.y-h.y},m={x:-p.y,y:p.x},y=Math.sqrt(m.x*m.x+m.y*m.y);d.push({x:m.x/y,y:m.y/y})}return d}function n(f,d){var v=1/0,h=-1/0,g=Vt(f),p;try{for(g.s();!(p=g.n()).done;){var m=p.value,y=m.x*d.x+m.y*d.y;v=Math.min(v,y),h=Math.max(h,y)}}catch(b){g.e(b)}finally{g.f()}return{min:v,max:h}}function a(f,d){return!(f.max<d.min||d.max<f.min)}var i=[].concat(ts(r(t)),ts(r(e))),s=Vt(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n(t,u),c=n(e,u);if(!a(l,c))return!1}}catch(f){s.e(f)}finally{s.f()}return!0}var L1=xt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),I1={pageRank:function(e){for(var r=L1(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,d=f*f,v=c.length,h=new Array(d),g=new Array(f),p=(1-n)/f,m=0;m<f;m++){for(var y=0;y<f;y++){var b=m*f+y;h[b]=0}g[m]=0}for(var w=0;w<v;w++){var T=c[w],E=T.data("source"),x=T.data("target");if(E!==x){var C=l.indexOfId(E),S=l.indexOfId(x),D=s(T),_=S*f+C;h[_]+=D,g[C]+=D}}for(var k=1/f+p,A=0;A<f;A++)if(g[A]===0)for(var B=0;B<f;B++){var R=B*f+A;h[R]=k}else for(var M=0;M<f;M++){var L=M*f+A;h[L]=h[L]/g[A]+p}for(var I=new Array(f),N=new Array(f),$,O=0;O<f;O++)I[O]=1;for(var F=0;F<i;F++){for(var G=0;G<f;G++)N[G]=0;for(var X=0;X<f;X++)for(var j=0;j<f;j++){var Y=X*f+j;N[X]+=h[Y]*I[j]}p1(N),$=I,I=N,N=$;for(var ee=0,re=0;re<f;re++){var Z=$[re]-I[re];ee+=Z*Z}if(ee<a)break}var V={rank:function(U){return U=o.collection(U)[0],I[l.indexOf(U)]}};return V}},If=xt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Wn={degreeCentralityNormalized:function(e){e=If(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,v=0,h=0;h<a;h++){var g=n[h],p=g.id();e.root=g;var m=this.degreeCentrality(e);d<m.indegree&&(d=m.indegree),v<m.outdegree&&(v=m.outdegree),c[p]=m.indegree,f[p]=m.outdegree}return{indegree:function(b){return d==0?0:(fe(b)&&(b=r.filter(b)),c[b.id()]/d)},outdegree:function(b){return v===0?0:(fe(b)&&(b=r.filter(b)),f[b.id()]/v)}}}else{for(var i={},s=0,o=0;o<a;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),i[u.id()]=l.degree}return{degree:function(b){return s===0?0:(fe(b)&&(b=r.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=If(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,u=a.alpha;if(i=r.collection(i)[0],o){for(var v=i.connectedEdges(),h=v.filter(function(E){return E.target().same(i)&&n.has(E)}),g=v.filter(function(E){return E.source().same(i)&&n.has(E)}),p=h.length,m=g.length,y=0,b=0,w=0;w<h.length;w++)y+=s(h[w]);for(var T=0;T<g.length;T++)b+=s(g[T]);return{indegree:Math.pow(p,1-u)*Math.pow(y,u),outdegree:Math.pow(m,1-u)*Math.pow(b,u)}}else{for(var l=i.connectedEdges().intersection(n),c=l.length,f=0,d=0;d<l.length;d++)f+=s(l[d]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Wn.dc=Wn.degreeCentrality;Wn.dcn=Wn.degreeCentralityNormalised=Wn.degreeCentralityNormalized;var Of=xt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Gn={closenessCentralityNormalized:function(e){for(var r=Of(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},u=0,l=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<l.length;f++){for(var d=0,v=l[f],h=0;h<l.length;h++)if(f!==h){var g=c.distance(v,l[h]);n?d+=1/g:d+=g}n||(d=1/d),u<d&&(u=d),o[v.id()]=d}return{closeness:function(m){return u==0?0:(fe(m)?m=s.filter(m)[0].id():m=m.id(),o[m]/u)}}},closenessCentrality:function(e){var r=Of(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var d=o.distanceTo(f);s?u+=1/d:u+=d}}return s?u:1/u}};Gn.cc=Gn.closenessCentrality;Gn.ccn=Gn.closenessCentralityNormalised=Gn.closenessCentralityNormalized;var O1=xt({weight:null,directed:!1}),rl={betweennessCentrality:function(e){for(var r=O1(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),u={},l={},c=0,f={set:function(b,w){l[b]=w,w>c&&(c=w)},get:function(b){return l[b]}},d=0;d<o.length;d++){var v=o[d],h=v.id();n?u[h]=v.outgoers().nodes():u[h]=v.openNeighborhood().nodes(),f.set(h,0)}for(var g=function(){for(var b=o[p].id(),w=[],T={},E={},x={},C=new oi(function(X,j){return x[X]-x[j]}),S=0;S<o.length;S++){var D=o[S].id();T[D]=[],E[D]=0,x[D]=1/0}for(E[b]=1,x[b]=0,C.push(b);!C.empty();){var _=C.pop();if(w.push(_),i)for(var k=0;k<u[_].length;k++){var A=u[_][k],B=s.getElementById(_),R=void 0;B.edgesTo(A).length>0?R=B.edgesTo(A)[0]:R=A.edgesTo(B)[0];var M=a(R);A=A.id(),x[A]>x[_]+M&&(x[A]=x[_]+M,C.nodes.indexOf(A)<0?C.push(A):C.updateItem(A),E[A]=0,T[A]=[]),x[A]==x[_]+M&&(E[A]=E[A]+E[_],T[A].push(_))}else for(var L=0;L<u[_].length;L++){var I=u[_][L].id();x[I]==1/0&&(C.push(I),x[I]=x[_]+1),x[I]==x[_]+1&&(E[I]=E[I]+E[_],T[I].push(_))}}for(var N={},$=0;$<o.length;$++)N[o[$].id()]=0;for(;w.length>0;){for(var O=w.pop(),F=0;F<T[O].length;F++){var G=T[O][F];N[G]=N[G]+E[G]/E[O]*(1+N[O])}O!=o[p].id()&&f.set(O,f.get(O)+N[O])}},p=0;p<o.length;p++)g();var m={betweenness:function(b){var w=s.collection(b).id();return f.get(w)},betweennessNormalized:function(b){if(c==0)return 0;var w=s.collection(b).id();return f.get(w)/c}};return m.betweennessNormalised=m.betweennessNormalized,m}};rl.bc=rl.betweennessCentrality;var V1=xt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),F1=function(e){return V1(e)},N1=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},z1=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Qp=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},q1=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+o]*r[o*n+u]}return a},$1=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=q1(e,a,r);return e},U1=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Qp(a,r),a},H1=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},W1=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(e[s*r+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&i.push(a.collection(o))}return i},G1=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},K1=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&G1(e[r],e[n])&&e.splice(n,1);return e},Vf=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=F1(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var u=r.length,l=u*u,c=new Array(l),f,d=0;d<l;d++)c[d]=0;for(var v=0;v<n.length;v++){var h=n[v],g=s[h.source().id()],p=s[h.target().id()],m=N1(h,i.attributes);c[g*u+p]+=m,c[p*u+g]+=m}z1(c,u,i.multFactor),Qp(c,u);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,f=$1(c,u,i.expandFactor),c=U1(f,u,i.inflateFactor),H1(c,f,l,4)||(y=!0),b++;var w=W1(c,u,r,a);return w=K1(w),w},Y1={markovClustering:Vf,mcl:Vf},X1=function(e){return e},Jp=function(e,r){return Math.abs(r-e)},Ff=function(e,r,n){return e+Jp(r,n)},Nf=function(e,r,n){return e+Math.pow(n-r,2)},Z1=function(e){return Math.sqrt(e)},j1=function(e,r,n){return Math.max(e,Jp(r,n))},ga=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:X1,o=a,u,l,c=0;c<e;c++)u=r(c),l=n(c),o=i(o,u,l);return s(o)},ta={euclidean:function(e,r,n){return e>=2?ga(e,r,n,0,Nf,Z1):ga(e,r,n,0,Ff)},squaredEuclidean:function(e,r,n){return ga(e,r,n,0,Nf)},manhattan:function(e,r,n){return ga(e,r,n,0,Ff)},max:function(e,r,n){return ga(e,r,n,-1/0,j1)}};ta["squared-euclidean"]=ta.squaredEuclidean;ta.squaredeuclidean=ta.squaredEuclidean;function Bs(t,e,r,n,a,i){var s;return je(t)?s=t:s=ta[t]||ta.euclidean,e===0&&je(t)?s(a,i):s(e,r,n,a,i)}var Q1=xt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),nc=function(e){return Q1(e)},os=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(f){return n[f]}:function(f){return a[f](n)},u=function(d){return a[d](r)},l=n,c=r;return Bs(e,a.length,o,u,l,c)},Eo=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var c=0;c<r;c++){u=[];for(var f=0;f<a;f++)u[f]=Math.random()*(s[f]-i[f])+i[f];o[c]=u}return o},eg=function(e,r,n,a,i){for(var s=1/0,o=0,u=0;u<r.length;u++){var l=os(n,e,r[u],a,i);l<s&&(s=l,o=u)}return o},tg=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},J1=function(e,r,n){return Math.abs(r-e)<=n},ew=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},tw=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},zf=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];tw(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},qf=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=os("manhattan",r[i],e,n,"kMedoids");return a},rw=function(e){var r=this.cy(),n=this.nodes(),a=null,i=nc(e),s=new Array(i.k),o={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Eo(n,i.k,i.attributes)):ct(i.testCentroids)==="object"?u=i.testCentroids:u=Eo(n,i.k,i.attributes):u=Eo(n,i.k,i.attributes);for(var l=!0,c=0;l&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],o[a.id()]=eg(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var d=0;d<i.k;d++){var v=tg(d,n,o);if(v.length!==0){for(var h=i.attributes.length,g=u[d],p=new Array(h),m=new Array(h),y=0;y<h;y++){m[y]=0;for(var b=0;b<v.length;b++)a=v[b],m[y]+=i.attributes[y](a);p[y]=m[y]/v.length,J1(p[y],g[y],i.sensitivityThreshold)||(l=!0)}u[d]=p,s[d]=r.collection(v)}}c++}return s},nw=function(e){var r=this.cy(),n=this.nodes(),a=null,i=nc(e),s=new Array(i.k),o,u={},l,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(ct(i.testCentroids)==="object"?o=i.testCentroids:o=zf(n,i.k)):o=zf(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var v=0;v<n.length;v++)a=n[v],u[a.id()]=eg(a,o,i.distance,i.attributes,"kMedoids");f=!1;for(var h=0;h<o.length;h++){var g=tg(h,n,u);if(g.length!==0){c[h]=qf(o[h],g,i.attributes);for(var p=0;p<g.length;p++)l=qf(g[p],g,i.attributes),l<c[h]&&(c[h]=l,o[h]=g[p],f=!0);s[h]=r.collection(g)}}d++}return s},aw=function(e,r,n,a,i){for(var s,o,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){s=0,o=0;for(var d=0;d<r.length;d++)s+=a[d][c]*i.attributes[f](r[d]),o+=a[d][c];e[c][f]=s/o}},iw=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,u,l,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){o=0;for(var v=0;v<n.length;v++)u=os(i.distance,a[d],n[f],i.attributes,"cmeans"),l=os(i.distance,a[d],n[v],i.attributes,"cmeans"),o+=Math.pow(u/l,c);e[d][f]=1/o}},sw=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,u,l=0;l<r.length;l++){o=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[l][c]>o&&(o=r[l][c],u=c);i[u].push(e[l])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},$f=function(e){var r=this.cy(),n=this.nodes(),a=nc(e),i,s,o,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var v=0,h=0;h<a.k;h++)o[d][h]=Math.random(),v+=o[d][h];for(var g=0;g<a.k;g++)o[d][g]=o[d][g]/v}s=new Array(a.k);for(var p=0;p<a.k;p++)s[p]=new Array(a.attributes.length);l=new Array(n.length);for(var m=0;m<n.length;m++)l[m]=new Array(a.k);for(var y=!0,b=0;y&&b<a.maxIterations;)y=!1,aw(s,n,o,l,a),iw(o,u,s,n,a),ew(o,u,a.sensitivityThreshold)||(y=!0),b++;return i=sw(n,o,a,r),{clusters:i,degreeOfMembership:o}},ow={kMeans:rw,kMedoids:nw,fuzzyCMeans:$f,fcm:$f},uw=xt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),lw={single:"min",complete:"max"},cw=function(e){var r=uw(e),n=lw[r.linkage];return n!=null&&(r.linkage=n),r},Uf=function(e,r,n,a,i){for(var s=0,o=1/0,u,l=i.attributes,c=function(S,D){return Bs(i.distance,l.length,function(_){return l[_](S)},function(_){return l[_](D)},S,D)},f=0;f<e.length;f++){var d=e[f].key,v=n[d][a[d]];v<o&&(s=d,o=v)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=r[s],g=r[a[s]],p;i.mode==="dendrogram"?p={left:h,right:g,key:h.key}:p={value:h.value.concat(g.value),key:h.key},e[h.index]=p,e.splice(g.index,1),r[h.key]=p;for(var m=0;m<e.length;m++){var y=e[m];h.key===y.key?u=1/0:i.linkage==="min"?(u=n[h.key][y.key],n[h.key][y.key]>n[g.key][y.key]&&(u=n[g.key][y.key])):i.linkage==="max"?(u=n[h.key][y.key],n[h.key][y.key]<n[g.key][y.key]&&(u=n[g.key][y.key])):i.linkage==="mean"?u=(n[h.key][y.key]*h.size+n[g.key][y.key]*g.size)/(h.size+g.size):i.mode==="dendrogram"?u=c(y.value,h.value):u=c(y.value[0],h.value[0]),n[h.key][y.key]=n[y.key][h.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(a[w]===h.key||a[w]===g.key){for(var T=w,E=0;E<e.length;E++){var x=e[E].key;n[w][x]<n[w][T]&&(T=x)}a[w]=T}e[b].index=b}return h.key=g.key=h.index=g.index=null,!0},Fn=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&Fn(e.left,r),e.right&&Fn(e.right,r)))},nl=function(e,r){if(!e)return"";if(e.left&&e.right){var n=nl(e.left,r),a=nl(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},al=function(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&Fn(e.left,a),e.right&&Fn(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Fn(e.left,a),e.right&&Fn(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=al(e.left,r-1,n)),e.right&&(i=al(e.right,r-1,n)),a.concat(i))},Hf=function(e){for(var r=this.cy(),n=this.nodes(),a=cw(e),i=a.attributes,s=function(b,w){return Bs(a.distance,i.length,function(T){return i[T](b)},function(T){return i[T](w)},b,w)},o=[],u=[],l=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=d,c[f]=d,u[f]=[],l[f]=0}for(var v=0;v<o.length;v++)for(var h=0;h<=v;h++){var g=void 0;a.mode==="dendrogram"?g=v===h?1/0:s(o[v].value,o[h].value):g=v===h?1/0:s(o[v].value[0],o[h].value[0]),u[v][h]=g,u[h][v]=g,g<u[v][l[v]]&&(l[v]=h)}for(var p=Uf(o,c,u,l,a);p;)p=Uf(o,c,u,l,a);var m;return a.mode==="dendrogram"?(m=al(o[0],a.dendrogramDepth,r),a.addDendrogram&&nl(o[0],r)):(m=new Array(o.length),o.forEach(function(y,b){y.key=y.index=null,m[b]=r.collection(y.value)})),m},fw={hierarchicalClustering:Hf,hca:Hf},dw=xt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),vw=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||Ze("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ne(n)||Ze("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),dw(e)},hw=function(e,r,n,a){var i=function(o,u){return a[u](o)};return-Bs(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},pw=function(e,r){var n=null;return r==="median"?n=v1(e):r==="mean"?n=d1(e):r==="min"?n=c1(e):r==="max"?n=f1(e):n=r,n},gw=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Wf=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];r[i*e+l]>o&&(s=l,o=r[i*e+l])}s>0&&a.push(s)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},mw=function(e,r,n){for(var a=Wf(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var u=-1,l=-1/0,c=0;c<s.length;c++){for(var f=0,d=0;d<s.length;d++)f+=r[s[d]*e+s[c]];f>l&&(u=c,l=f)}n[i]=s[u]}return a=Wf(e,r,n),a},Gf=function(e){for(var r=this.cy(),n=this.nodes(),a=vw(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,u,l,c,f,d;o=n.length,u=o*o,l=new Array(u);for(var v=0;v<u;v++)l[v]=-1/0;for(var h=0;h<o;h++)for(var g=0;g<o;g++)h!==g&&(l[h*o+g]=hw(a.distance,n[h],n[g],a.attributes));c=pw(l,a.preference);for(var p=0;p<o;p++)l[p*o+p]=c;f=new Array(u);for(var m=0;m<u;m++)f[m]=0;d=new Array(u);for(var y=0;y<u;y++)d[y]=0;for(var b=new Array(o),w=new Array(o),T=new Array(o),E=0;E<o;E++)b[E]=0,w[E]=0,T[E]=0;for(var x=new Array(o*a.minIterations),C=0;C<x.length;C++)x[C]=0;var S;for(S=0;S<a.maxIterations;S++){for(var D=0;D<o;D++){for(var _=-1/0,k=-1/0,A=-1,B=0,R=0;R<o;R++)b[R]=f[D*o+R],B=d[D*o+R]+l[D*o+R],B>=_?(k=_,_=B,A=R):B>k&&(k=B);for(var M=0;M<o;M++)f[D*o+M]=(1-a.damping)*(l[D*o+M]-_)+a.damping*b[M];f[D*o+A]=(1-a.damping)*(l[D*o+A]-k)+a.damping*b[A]}for(var L=0;L<o;L++){for(var I=0,N=0;N<o;N++)b[N]=d[N*o+L],w[N]=Math.max(0,f[N*o+L]),I+=w[N];I-=w[L],w[L]=f[L*o+L],I+=w[L];for(var $=0;$<o;$++)d[$*o+L]=(1-a.damping)*Math.min(0,I-w[$])+a.damping*b[$];d[L*o+L]=(1-a.damping)*(I-w[L])+a.damping*b[L]}for(var O=0,F=0;F<o;F++){var G=d[F*o+F]+f[F*o+F]>0?1:0;x[S%a.minIterations*o+F]=G,O+=G}if(O>0&&(S>=a.minIterations-1||S==a.maxIterations-1)){for(var X=0,j=0;j<o;j++){T[j]=0;for(var Y=0;Y<a.minIterations;Y++)T[j]+=x[Y*o+j];(T[j]===0||T[j]===a.minIterations)&&X++}if(X===o)break}}for(var ee=gw(o,f,d),re=mw(o,l,ee),Z={},V=0;V<ee.length;V++)Z[ee[V]]=[];for(var z=0;z<n.length;z++){var U=i[n[z].id()],te=re[U];te!=null&&Z[te].push(n[z])}for(var ae=new Array(ee.length),we=0;we<ee.length;we++)ae[we]=r.collection(Z[ee[we]]);return ae},yw={affinityPropagation:Gf,ap:Gf},bw=xt({root:void 0,directed:!1}),ww={hierholzer:function(e){if(!Be(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=bw(e),a=n.root,i=n.directed,s=this,o=!1,u,l,c;a&&(c=fe(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?s.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.indegree(!0),T=y.outdegree(!0),E=w-T,x=T-w;E==1?u?o=!0:u=b:x==1?l?o=!0:l=b:(x>1||E>1)&&(o=!0),f[b]=[],y.outgoers().forEach(function(C){C.isEdge()&&f[b].push(C.id())})}else d[b]=[void 0,y.target().id()]}):s.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.degree(!0);w%2&&(u?l?o=!0:l=b:u=b),f[b]=[],y.connectedEdges().forEach(function(T){return f[b].push(T.id())})}else d[b]=[y.source().id(),y.target().id()]});var v={found:!1,trail:void 0};if(o)return v;if(l&&u)if(i){if(c&&l!=c)return v;c=l}else{if(c&&l!=c&&u!=c)return v;c||(c=l)}else c||(c=s[0].id());var h=function(b){for(var w=b,T=[b],E,x,C;f[w].length;)E=f[w].shift(),x=d[E][0],C=d[E][1],w!=C?(f[C]=f[C].filter(function(S){return S!=E}),w=C):!i&&w!=x&&(f[x]=f[x].filter(function(S){return S!=E}),w=x),T.unshift(E),T.unshift(w);return T},g=[],p=[];for(p=h(c);p.length!=1;)f[p[0]].length==0?(g.unshift(s.getElementById(p.shift())),g.unshift(s.getElementById(p.shift()))):p=h(p.shift()).concat(p);g.unshift(s.getElementById(p.shift()));for(var m in f)if(f[m].length)return v;return v.found=!0,v.trail=this.spawn(g,!0),v}},Si=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},u=function(d,v){for(var h=s.length-1,g=[],p=e.spawn();s[h].x!=d||s[h].y!=v;)g.push(s.pop().edge),h--;g.push(s.pop().edge),g.forEach(function(m){var y=m.connectedNodes().intersection(e);p.merge(m),y.forEach(function(b){var w=b.id(),T=b.connectedEdges().intersection(e);p.merge(b),r[w].cutVertex?p.merge(T.filter(function(E){return E.isLoop()})):p.merge(T)})}),i.push(p)},l=function(d,v,h){d===h&&(a+=1),r[v]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(v).connectedEdges().intersection(e);if(g.size()===0)i.push(e.spawn(e.getElementById(v)));else{var p,m,y,b;g.forEach(function(w){p=w.source().id(),m=w.target().id(),y=p===v?m:p,y!==h&&(b=w.id(),o[b]||(o[b]=!0,s.push({x:v,y,edge:w})),y in r?r[v].low=Math.min(r[v].low,r[y].id):(l(d,y,v),r[v].low=Math.min(r[v].low,r[y].low),r[v].id<=r[y].low&&(r[v].cutVertex=!0,u(v,y))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(a=0,l(d,d),r[d].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},xw={hopcroftTarjanBiconnected:Si,htbc:Si,htb:Si,hopcroftTarjanBiconnectedComponents:Si},Pi=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function(l){i.push(l),r[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(g){var p=g.target().id();p!==l&&(p in r||o(p),r[p].explored||(r[l].low=Math.min(r[l].low,r[p].low)))}),r[l].index===r[l].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),r[d].low=r[l].index,r[d].explored=!0,d===l)break}var v=f.edgesWith(f),h=f.merge(v);a.push(h),s=s.difference(h)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||o(l)}}),{cut:s,components:a}},Tw={tarjanStronglyConnected:Pi,tsc:Pi,tscc:Pi,tarjanStronglyConnectedComponents:Pi},rg={};[qa,Qb,Jb,t1,n1,i1,u1,I1,Wn,Gn,rl,Y1,ow,fw,yw,ww,xw,Tw].forEach(function(t){he(rg,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var ng=0,ag=1,ig=2,er=function(e){if(!(this instanceof er))return new er(e);this.id="Thenable/1.0.7",this.state=ng,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};er.prototype={fulfill:function(e){return Kf(this,ag,"fulfillValue",e)},reject:function(e){return Kf(this,ig,"rejectReason",e)},then:function(e,r){var n=this,a=new er;return n.onFulfilled.push(Xf(e,a,"fulfill")),n.onRejected.push(Xf(r,a,"reject")),sg(n),a.proxy}};var Kf=function(e,r,n,a){return e.state===ng&&(e.state=r,e[n]=a,sg(e)),e},sg=function(e){e.state===ag?Yf(e,"onFulfilled",e.fulfillValue):e.state===ig&&Yf(e,"onRejected",e.rejectReason)},Yf=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Xf=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}og(r,i)}}},og=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(ct(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):og(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};er.all=function(t){return new er(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,l){n[u]=l,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var u=t[o],l=u!=null&&u.then!=null;if(l)u.then(function(f){i(o,f)},function(f){r(f)});else{var c=u;i(o,c)}})(s)})};er.resolve=function(t){return new er(function(e,r){e(t)})};er.reject=function(t){return new er(function(e,r){r(t)})};var la=typeof Promise<"u"?Promise:er,il=function(e,r,n){var a=Kl(e),i=!a,s=this._private=he({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&je(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},gn=il.prototype;he(gn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),zt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new la(function(a,i){n.push(function(){a()})})}});gn.complete=gn.completed;gn.run=gn.play;gn.running=gn.playing;var Ew={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var c=o.style();r=he({},r,n);var f=Object.keys(r).length===0;if(f)return new il(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var d=r.renderedPosition,v=o.pan(),h=o.zoom();r.position=Kp(d,h,v)}if(u&&r.panBy!=null){var g=r.panBy,p=o.pan();r.pan={x:p.x+g.x,y:p.y+g.y}}var m=r.center||r.centre;if(u&&m!=null){var y=o.getCenterPan(m.eles,r.zoom);y!=null&&(r.pan=y)}if(u&&r.fit!=null){var b=r.fit,w=o.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(r.pan=w.pan,r.zoom=w.zoom)}if(u&&Be(r.zoom)){var T=o.getZoomedViewport(r.zoom);T!=null?(T.zoomed&&(r.zoom=T.zoom),T.panned&&(r.pan=T.pan)):r.zoom=null}return new il(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=he({},r,n));for(var u=0;u<s.length;u++){var l=s[u],c=l.animated()&&(r.queue===void 0||r.queue),f=l.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],c=l._private,f=c.animation.current,d=0;d<f.length;d++){var v=f[d],h=v._private;n&&(h.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},Co,Zf;function Rs(){if(Zf)return Co;Zf=1;var t=Array.isArray;return Co=t,Co}var So,jf;function Cw(){if(jf)return So;jf=1;var t=Rs(),e=ii(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return So=a,So}var Po,Qf;function Sw(){if(Qf)return Po;Qf=1;var t=Fp(),e=ai(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==a||u==r||u==i}return Po=s,Po}var _o,Jf;function Pw(){if(Jf)return _o;Jf=1;var t=Ds(),e=t["__core-js_shared__"];return _o=e,_o}var Do,ed;function _w(){if(ed)return Do;ed=1;var t=Pw(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Do=r,Do}var Ao,td;function Dw(){if(td)return Ao;td=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Ao=r,Ao}var ko,rd;function Aw(){if(rd)return ko;rd=1;var t=Sw(),e=_w(),r=ai(),n=Dw(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,c=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!r(d)||e(d))return!1;var v=t(d)?c:i;return v.test(n(d))}return ko=f,ko}var Bo,nd;function kw(){if(nd)return Bo;nd=1;function t(e,r){return e==null?void 0:e[r]}return Bo=t,Bo}var Ro,ad;function ac(){if(ad)return Ro;ad=1;var t=Aw(),e=kw();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Ro=r,Ro}var Mo,id;function Ms(){if(id)return Mo;id=1;var t=ac(),e=t(Object,"create");return Mo=e,Mo}var Lo,sd;function Bw(){if(sd)return Lo;sd=1;var t=Ms();function e(){this.__data__=t?t(null):{},this.size=0}return Lo=e,Lo}var Io,od;function Rw(){if(od)return Io;od=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Io=t,Io}var Oo,ud;function Mw(){if(ud)return Oo;ud=1;var t=Ms(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return Oo=a,Oo}var Vo,ld;function Lw(){if(ld)return Vo;ld=1;var t=Ms(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Vo=n,Vo}var Fo,cd;function Iw(){if(cd)return Fo;cd=1;var t=Ms(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Fo=r,Fo}var No,fd;function Ow(){if(fd)return No;fd=1;var t=Bw(),e=Rw(),r=Mw(),n=Lw(),a=Iw();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,No=i,No}var zo,dd;function Vw(){if(dd)return zo;dd=1;function t(){this.__data__=[],this.size=0}return zo=t,zo}var qo,vd;function ug(){if(vd)return qo;vd=1;function t(e,r){return e===r||e!==e&&r!==r}return qo=t,qo}var $o,hd;function Ls(){if(hd)return $o;hd=1;var t=ug();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return $o=e,$o}var Uo,pd;function Fw(){if(pd)return Uo;pd=1;var t=Ls(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return Uo=n,Uo}var Ho,gd;function Nw(){if(gd)return Ho;gd=1;var t=Ls();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Ho=e,Ho}var Wo,md;function zw(){if(md)return Wo;md=1;var t=Ls();function e(r){return t(this.__data__,r)>-1}return Wo=e,Wo}var Go,yd;function qw(){if(yd)return Go;yd=1;var t=Ls();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Go=e,Go}var Ko,bd;function $w(){if(bd)return Ko;bd=1;var t=Vw(),e=Fw(),r=Nw(),n=zw(),a=qw();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Ko=i,Ko}var Yo,wd;function Uw(){if(wd)return Yo;wd=1;var t=ac(),e=Ds(),r=t(e,"Map");return Yo=r,Yo}var Xo,xd;function Hw(){if(xd)return Xo;xd=1;var t=Ow(),e=$w(),r=Uw();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Xo=n,Xo}var Zo,Td;function Ww(){if(Td)return Zo;Td=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Zo=t,Zo}var jo,Ed;function Is(){if(Ed)return jo;Ed=1;var t=Ww();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return jo=e,jo}var Qo,Cd;function Gw(){if(Cd)return Qo;Cd=1;var t=Is();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Qo=e,Qo}var Jo,Sd;function Kw(){if(Sd)return Jo;Sd=1;var t=Is();function e(r){return t(this,r).get(r)}return Jo=e,Jo}var eu,Pd;function Yw(){if(Pd)return eu;Pd=1;var t=Is();function e(r){return t(this,r).has(r)}return eu=e,eu}var tu,_d;function Xw(){if(_d)return tu;_d=1;var t=Is();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return tu=e,tu}var ru,Dd;function Zw(){if(Dd)return ru;Dd=1;var t=Hw(),e=Gw(),r=Kw(),n=Yw(),a=Xw();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ru=i,ru}var nu,Ad;function jw(){if(Ad)return nu;Ad=1;var t=Zw(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,nu=r,nu}var au,kd;function Qw(){if(kd)return au;kd=1;var t=jw(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return au=r,au}var iu,Bd;function lg(){if(Bd)return iu;Bd=1;var t=Qw(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(r,"$1"):o||s)}),i});return iu=n,iu}var su,Rd;function cg(){if(Rd)return su;Rd=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return su=t,su}var ou,Md;function Jw(){if(Md)return ou;Md=1;var t=Xl(),e=cg(),r=Rs(),n=ii(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return ou=s,ou}var uu,Ld;function fg(){if(Ld)return uu;Ld=1;var t=Jw();function e(r){return r==null?"":t(r)}return uu=e,uu}var lu,Id;function dg(){if(Id)return lu;Id=1;var t=Rs(),e=Cw(),r=lg(),n=fg();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return lu=a,lu}var cu,Od;function ic(){if(Od)return cu;Od=1;var t=ii();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return cu=e,cu}var fu,Vd;function ex(){if(Vd)return fu;Vd=1;var t=dg(),e=ic();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return fu=r,fu}var du,Fd;function tx(){if(Fd)return du;Fd=1;var t=ex();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return du=e,du}var rx=tx(),nx=ni(rx),vu,Nd;function ax(){if(Nd)return vu;Nd=1;var t=ac(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return vu=e,vu}var hu,zd;function ix(){if(zd)return hu;zd=1;var t=ax();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return hu=e,hu}var pu,qd;function sx(){if(qd)return pu;qd=1;var t=ix(),e=ug(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&t(i,s,o)}return pu=a,pu}var gu,$d;function ox(){if($d)return gu;$d=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return gu=r,gu}var mu,Ud;function ux(){if(Ud)return mu;Ud=1;var t=sx(),e=dg(),r=ox(),n=ai(),a=ic();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var c=-1,f=o.length,d=f-1,v=s;v!=null&&++c<f;){var h=a(o[c]),g=u;if(h==="__proto__"||h==="constructor"||h==="prototype")return s;if(c!=d){var p=v[h];g=l?l(p,h,v):void 0,g===void 0&&(g=n(p)?p:r(o[c+1])?[]:{})}t(v,h,g),v=v[h]}return s}return mu=i,mu}var yu,Hd;function lx(){if(Hd)return yu;Hd=1;var t=ux();function e(r,n,a){return r==null?r:t(r,n,a)}return yu=e,yu}var cx=lx(),fx=ni(cx),bu,Wd;function dx(){if(Wd)return bu;Wd=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return bu=t,bu}var wu,Gd;function vx(){if(Gd)return wu;Gd=1;var t=cg(),e=dx(),r=Rs(),n=ii(),a=lg(),i=ic(),s=fg();function o(u){return r(u)?t(u,i):n(u)?[u]:e(a(s(u)))}return wu=o,wu}var hx=vx(),px=ni(hx),gx={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=he({},r,e),function(a,i){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],c=u?o[0]:o;if(fe(a)){var f=a.indexOf(".")!==-1,d=f&&px(a);if(s.allowGetting&&i===void 0){var v;return c&&(s.beforeGet(c),d&&c._private[s.field][a]===void 0?v=nx(c._private[s.field],d):v=c._private[s.field][a]),v}else if(s.allowSetting&&i!==void 0){var h=!s.immutableKeys[a];if(h){var g=Dp({},a,i);s.beforeSet(o,g);for(var p=0,m=l.length;p<m;p++){var y=l[p];s.canSet(y)&&(d&&c._private[s.field][a]===void 0?fx(y._private[s.field],d,i):y._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&Be(a)){var b=a,w,T,E=Object.keys(b);s.beforeSet(o,b);for(var x=0;x<E.length;x++){w=E[x],T=b[w];var C=!s.immutableKeys[w];if(C)for(var S=0;S<l.length;S++){var D=l[S];s.canSet(D)&&(D._private[s.field][w]=T)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&je(a)){var _=a;o.on(s.bindingEvent,_)}else if(s.allowGetting&&a===void 0){var k;return c&&(s.beforeGet(c),k=c._private[s.field]),k}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=he({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,u=o?s:[s];if(fe(a)){for(var l=a.split(/\s+/),c=l.length,f=0;f<c;f++){var d=l[f];if(!Or(d)){var v=!i.immutableKeys[d];if(v)for(var h=0,g=u.length;h<g;h++)u[h]._private[i.field][d]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var p=0,m=u.length;p<m;p++)for(var y=u[p]._private[i.field],b=Object.keys(y),w=0;w<b.length;w++){var T=b[w],E=!i.immutableKeys[T];E&&(y[T]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},mx={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new la(function(o,u){var l=function(v){i.off.apply(i,f),o(v)},c=s.concat([l]),f=c.concat([]);i.on.apply(i,c)})}}},Ie={};[Ew,gx,mx].forEach(function(t){he(Ie,t)});var yx={animate:Ie.animate(),animation:Ie.animation(),animated:Ie.animated(),clearQueue:Ie.clearQueue(),delay:Ie.delay(),delayAnimation:Ie.delayAnimation(),stop:Ie.stop()},Ui={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(h){return n.push(h)}),n}else $e(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new ua(e),s=0;s<r.length;s++){for(var o=r[s],u=o._private,l=u.classes,c=!1,f=0;f<e.length;f++){var d=e[f],v=l.has(d);if(!v){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){$e(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],v=l.has(d),h=!1;r||a&&!v?(l.add(d),h=!0):(!r||a&&v)&&(l.delete(d),h=!0),!c&&h&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Ui.className=Ui.classNames=Ui.classes;var ke={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ke.variable="(?:[\\w-.]|(?:\\\\"+ke.metaChar+"))+";ke.className="(?:[\\w-]|(?:\\\\"+ke.metaChar+"))+";ke.value=ke.string+"|"+ke.number;ke.id=ke.variable;(function(){var t,e,r;for(t=ke.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],ke.comparatorOp+="|@"+e;for(t=ke.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(ke.comparatorOp+="|\\!"+e)})();var Ne=function(){return{checks:[]}},ie={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},sl=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return bb(t.selector,e.selector)}),bx=function(){for(var t={},e,r=0;r<sl.length;r++)e=sl[r],t[e.selector]=e.matches;return t}(),wx=function(e,r){return bx[e](r)},xx="("+sl.map(function(t){return t.selector}).join("|")+")",_n=function(e){return e.replace(new RegExp("\\\\("+ke.metaChar+")","g"),function(r,n){return n})},Ar=function(e,r,n){e[e.length-1]=n},ol=[{name:"group",query:!0,regex:"("+ke.group+")",populate:function(e,r,n){var a=ut(n,1),i=a[0];r.checks.push({type:ie.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:xx,populate:function(e,r,n){var a=ut(n,1),i=a[0];r.checks.push({type:ie.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ke.id+")",populate:function(e,r,n){var a=ut(n,1),i=a[0];r.checks.push({type:ie.ID,value:_n(i)})}},{name:"className",query:!0,regex:"\\.("+ke.className+")",populate:function(e,r,n){var a=ut(n,1),i=a[0];r.checks.push({type:ie.CLASS,value:_n(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ke.variable+")\\s*\\]",populate:function(e,r,n){var a=ut(n,1),i=a[0];r.checks.push({type:ie.DATA_EXIST,field:_n(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ke.variable+")\\s*("+ke.comparatorOp+")\\s*("+ke.value+")\\s*\\]",populate:function(e,r,n){var a=ut(n,3),i=a[0],s=a[1],o=a[2],u=new RegExp("^"+ke.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:ie.DATA_COMPARE,field:_n(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ke.boolOp+")\\s*("+ke.variable+")\\s*\\]",populate:function(e,r,n){var a=ut(n,2),i=a[0],s=a[1];r.checks.push({type:ie.DATA_BOOL,field:_n(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ke.meta+")\\s*("+ke.comparatorOp+")\\s*("+ke.number+")\\s*\\]\\]",populate:function(e,r,n){var a=ut(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:ie.META_COMPARE,field:_n(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:ke.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Ne();return o}},{name:"directedEdge",separator:!0,regex:ke.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=r,i=Ne();return n.checks.push({type:ie.DIRECTED_EDGE,source:a,target:i}),Ar(e,r,n),e.edgeCount++,i}else{var s=Ne(),o=r,u=Ne();return s.checks.push({type:ie.NODE_SOURCE,source:o,target:u}),Ar(e,r,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:ke.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=r,i=Ne();return n.checks.push({type:ie.UNDIRECTED_EDGE,nodes:[a,i]}),Ar(e,r,n),e.edgeCount++,i}else{var s=Ne(),o=r,u=Ne();return s.checks.push({type:ie.NODE_NEIGHBOR,node:o,neighbor:u}),Ar(e,r,s),u}}},{name:"child",separator:!0,regex:ke.child,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=Ne(),i=e[e.length-1];return n.checks.push({type:ie.CHILD,parent:i,child:a}),Ar(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ne(),o=e[e.length-1],u=Ne(),l=Ne(),c=Ne(),f=Ne();return s.checks.push({type:ie.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:ie.TRUE}],f.checks.push({type:ie.TRUE}),u.checks.push({type:ie.PARENT,parent:f,child:c}),Ar(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var d=Ne(),v=Ne(),h=[{type:ie.PARENT,parent:d,child:v}];return d.checks=r.checks,r.checks=h,e.compoundCount++,v}}},{name:"descendant",separator:!0,regex:ke.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ne(),a=Ne(),i=e[e.length-1];return n.checks.push({type:ie.DESCENDANT,ancestor:i,descendant:a}),Ar(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ne(),o=e[e.length-1],u=Ne(),l=Ne(),c=Ne(),f=Ne();return s.checks.push({type:ie.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:ie.TRUE}],f.checks.push({type:ie.TRUE}),u.checks.push({type:ie.ANCESTOR,ancestor:f,descendant:c}),Ar(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var d=Ne(),v=Ne(),h=[{type:ie.ANCESTOR,ancestor:d,descendant:v}];return d.checks=r.checks,r.checks=h,e.compoundCount++,v}}},{name:"subject",modifier:!0,regex:ke.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Oe("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ie.DIRECTED_EDGE?a.type=ie.NODE_TARGET:i===ie.UNDIRECTED_EDGE&&(a.type=ie.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];ol.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Tx=function(e){for(var r,n,a,i=0;i<ol.length;i++){var s=ol[i],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,r=s,a=o;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:e}},Ex=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},Cx=function(e){var r=this,n=r.inputText=e,a=r[0]=Ne();for(r.length=1,n=Ex(n);;){var i=Tx(n);if(i.expr==null)return Oe("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var c=r[l];if(c.compoundCount>0&&c.edgeCount>0)return Oe("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Oe("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Oe("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Sx=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return fe(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,v=c.value;switch(d){case ie.GROUP:{var h=e(v);return h.substring(0,h.length-1)}case ie.DATA_COMPARE:{var g=c.field,p=c.operator;return"["+g+n(e(p))+r(v)+"]"}case ie.DATA_BOOL:{var m=c.operator,y=c.field;return"["+e(m)+y+"]"}case ie.DATA_EXIST:{var b=c.field;return"["+b+"]"}case ie.META_COMPARE:{var w=c.operator,T=c.field;return"[["+T+n(e(w))+r(v)+"]]"}case ie.STATE:return v;case ie.ID:return"#"+v;case ie.CLASS:return"."+v;case ie.PARENT:case ie.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case ie.ANCESTOR:case ie.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case ie.COMPOUND_SPLIT:{var E=i(c.left,f),x=i(c.subject,f),C=i(c.right,f);return E+(E.length>0?" ":"")+x+C}case ie.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,v,h){return d+(f===c&&h===0?"$":"")+a(v,f)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=i(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},Px={parse:Cx,toString:Sx},vg=function(e,r,n){var a,i=fe(e),s=ne(e),o=fe(n),u,l,c=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||o||c)&&(u=!i&&!s?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},_x=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Dx=function(e){return e!==void 0},sc=function(e,r){return e.data(r)},Ax=function(e,r){return e[r]()},Je=[],Ke=function(e,r){return e.checks.every(function(n){return Je[n.type](n,r)})};Je[ie.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Je[ie.STATE]=function(t,e){var r=t.value;return wx(r,e)};Je[ie.ID]=function(t,e){var r=t.value;return e.id()===r};Je[ie.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Je[ie.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return vg(Ax(e,r),n,a)};Je[ie.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return vg(sc(e,r),n,a)};Je[ie.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return _x(sc(e,r),n)};Je[ie.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,Dx(sc(e,r))};Je[ie.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Ke(r,a)&&Ke(n,i)||Ke(n,a)&&Ke(r,i)};Je[ie.NODE_NEIGHBOR]=function(t,e){return Ke(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Ke(t.neighbor,r)})};Je[ie.DIRECTED_EDGE]=function(t,e){return Ke(t.source,e.source())&&Ke(t.target,e.target())};Je[ie.NODE_SOURCE]=function(t,e){return Ke(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Ke(t.target,r)})};Je[ie.NODE_TARGET]=function(t,e){return Ke(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Ke(t.source,r)})};Je[ie.CHILD]=function(t,e){return Ke(t.child,e)&&Ke(t.parent,e.parent())};Je[ie.PARENT]=function(t,e){return Ke(t.parent,e)&&e.children().some(function(r){return Ke(t.child,r)})};Je[ie.DESCENDANT]=function(t,e){return Ke(t.descendant,e)&&e.ancestors().some(function(r){return Ke(t.ancestor,r)})};Je[ie.ANCESTOR]=function(t,e){return Ke(t.ancestor,e)&&e.descendants().some(function(r){return Ke(t.descendant,r)})};Je[ie.COMPOUND_SPLIT]=function(t,e){return Ke(t.subject,e)&&Ke(t.left,e)&&Ke(t.right,e)};Je[ie.TRUE]=function(){return!0};Je[ie.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Je[ie.FILTER]=function(t,e){var r=t.value;return r(e)};var kx=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ie.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(Ke(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},Bx=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Ke(a,e))return!0}return!1},Rx={matches:Bx,filter:kx},Nr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||fe(e)&&e.match(/^\s*$/)||(zt(e)?this.addQuery({checks:[{type:ie.COLLECTION,value:e.collection()}]}):je(e)?this.addQuery({checks:[{type:ie.FILTER,value:e}]}):fe(e)?this.parse(e)||(this.invalid=!0):Ze("A selector must be created from a string; found "))},zr=Nr.prototype;[Px,Rx].forEach(function(t){return he(zr,t)});zr.text=function(){return this.inputText};zr.size=function(){return this.length};zr.eq=function(t){return this[t]};zr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};zr.addQuery=function(t){this[this.length++]=t};zr.selector=zr.toString;var Mr={allAre:function(e){var r=new Nr(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Nr(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Mr.allAreNeighbours=Mr.allAreNeighbors;Mr.has=Mr.contains;Mr.equal=Mr.equals=Mr.same;var Gt=function(e,r){return function(a,i,s,o){var u=a,l=this,c;if(u==null?c="":zt(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,d=f.traversalCache=f.traversalCache||{},v=d[r]=d[r]||[],h=hn(c),g=v[h];return g||(v[h]=e.call(l,a,i,s,o))}else return e.call(l,a,i,s,o)}},ra={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Gt(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function oc(t,e,r,n){for(var a=[],i=new ua,s=t.cy(),o=s.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?a.push(l):o&&n(a,i,l)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),o&&n(a,i,c)}return t}function hg(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}ra.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return oc(this,t,e,hg)};function pg(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}ra.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return oc(this,t,e,pg)};function Mx(t,e,r){pg(t,e,r),hg(t,e,r)}ra.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return oc(this,t,e,Mx)};ra.ancestors=ra.parents;var Ha,gg;Ha=gg={data:Ie.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ie.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ie.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ie.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ie.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ie.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Ha.attr=Ha.data;Ha.removeAttr=Ha.removeData;var Lx=gg,Os={};function xu(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}he(Os,{degree:xu(function(t,e){return e.source().same(e.target())?2:1}),indegree:xu(function(t,e){return e.target().same(t)?1:0}),outdegree:xu(function(t,e){return e.source().same(t)?1:0})});function Dn(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}he(Os,{minDegree:Dn("degree",function(t,e){return t<e}),maxDegree:Dn("degree",function(t,e){return t>e}),minIndegree:Dn("indegree",function(t,e){return t<e}),maxIndegree:Dn("indegree",function(t,e){return t>e}),minOutdegree:Dn("outdegree",function(t,e){return t<e}),maxOutdegree:Dn("outdegree",function(t,e){return t>e})});he(Os,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Qt,mg,yg=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},Kd={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){yg(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Qt=mg={position:Ie.data(Kd),silentPosition:Ie.data(he({},Kd,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){yg(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Be(e))r?this.silentPosition(e):this.position(e);else if(je(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Be(e)?(a={x:ne(e.x)?e.x:0,y:ne(e.y)?e.y:0},n=r):fe(e)&&ne(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+a.x,y:u.y+a.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return Be(e)?this.shift(e,!0):fe(e)&&ne(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=Be(e)?e:void 0,u=o!==void 0||r!==void 0&&fe(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];r!==void 0?c.position(e,(r-s[e])/i):o!==void 0&&c.position(Kp(o,i,s))}else{var f=n.position();return o=ks(f,i,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=Be(e)?e:void 0,s=i!==void 0||r!==void 0&&fe(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],c=o?l.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var v=d?c.position():{x:0,y:0};r!==void 0?l.position(e,r+v[e]):i!==void 0&&l.position({x:i.x+v.x,y:i.y+v.y})}else{var h=n.position(),g=o?n.parent():null,p=g&&g.length>0,m=p;p&&(g=g[0]);var y=m?g.position():{x:0,y:0};return i={x:h.x-y.x,y:h.y-y.y},e===void 0?i:i[e]}else if(!s)return;return this}};Qt.modelPosition=Qt.point=Qt.position;Qt.modelPositions=Qt.points=Qt.positions;Qt.renderedPoint=Qt.renderedPosition;Qt.relativePoint=Qt.relativePosition;var Ix=mg,Kn,Kr;Kn=Kr={};Kr.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:u,w:s-i,h:u-o}};Kr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Kr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),d=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function v(S,D,_){var k=0,A=0,B=D+_;return S>0&&B>0&&(k=D/B*S,A=_/B*S),{biasDiff:k,biasComplementDiff:A}}function h(S,D,_,k){if(_.units==="%")switch(k){case"width":return S>0?_.pfValue*S:0;case"height":return D>0?_.pfValue*D:0;case"average":return S>0&&D>0?_.pfValue*(S+D)/2:0;case"min":return S>0&&D>0?S>D?_.pfValue*D:_.pfValue*S:0;case"max":return S>0&&D>0?S>D?_.pfValue*S:_.pfValue*D:0;default:return 0}else return _.units==="px"?_.pfValue:0}var g=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var p=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var m=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var y=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=v(c.width.val-f.w,g,p),w=b.biasDiff,T=b.biasComplementDiff,E=v(c.height.val-f.h,m,y),x=E.biasDiff,C=E.biasComplementDiff;o.autoPadding=h(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,c.width.val),d.x=(-w+f.x1+f.x2+T)/2,o.autoHeight=Math.max(f.h,c.height.val),d.y=(-x+f.y1+f.y2+C)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Wt=function(e){return e===1/0||e===-1/0?0:e},jt=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},rn=function(e,r){return r==null?e:jt(e,r.x1,r.y1,r.x2,r.y2)},ma=function(e,r,n){return Lt(e,r,n)},_i=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-s,f.y1=l-s,f.x2=u+s,f.y2=l+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,qi(f,1),jt(e,f.x1,f.y1,f.x2,f.y2)}}},Tu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),c=ma(s,"labelWidth",n),f=ma(s,"labelHeight",n),d=ma(s,"labelX",n),v=ma(s,"labelY",n),h=r.pstyle(a+"text-margin-x").pfValue,g=r.pstyle(a+"text-margin-y").pfValue,p=r.isEdge(),m=r.pstyle(a+"text-rotation"),y=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,w=b/2,T=r.pstyle("text-background-padding").pfValue,E=2,x=f,C=c,S=C/2,D=x/2,_,k,A,B;if(p)_=d-S,k=d+S,A=v-D,B=v+D;else{switch(u.value){case"left":_=d-C,k=d;break;case"center":_=d-S,k=d+S;break;case"right":_=d,k=d+C;break}switch(l.value){case"top":A=v-x,B=v;break;case"center":A=v-D,B=v+D;break;case"bottom":A=v,B=v+x;break}}var R=h-Math.max(y,w)-T-E,M=h+Math.max(y,w)+T+E,L=g-Math.max(y,w)-T-E,I=g+Math.max(y,w)+T+E;_+=R,k+=M,A+=L,B+=I;var N=n||"main",$=i.labelBounds,O=$[N]=$[N]||{};O.x1=_,O.y1=A,O.x2=k,O.y2=B,O.w=k-_,O.h=B-A,O.leftPad=R,O.rightPad=M,O.topPad=L,O.botPad=I;var F=p&&m.strValue==="autorotate",G=m.pfValue!=null&&m.pfValue!==0;if(F||G){var X=F?ma(i.rstyle,"labelAngle",n):m.pfValue,j=Math.cos(X),Y=Math.sin(X),ee=(_+k)/2,re=(A+B)/2;if(!p){switch(u.value){case"left":ee=k;break;case"right":ee=_;break}switch(l.value){case"top":re=B;break;case"bottom":re=A;break}}var Z=function(Ve,se){return Ve=Ve-ee,se=se-re,{x:Ve*j-se*Y+ee,y:Ve*Y+se*j+re}},V=Z(_,A),z=Z(_,B),U=Z(k,A),te=Z(k,B);_=Math.min(V.x,z.x,U.x,te.x),k=Math.max(V.x,z.x,U.x,te.x),A=Math.min(V.y,z.y,U.y,te.y),B=Math.max(V.y,z.y,U.y,te.y)}var ae=N+"Rot",we=$[ae]=$[ae]||{};we.x1=_,we.y1=A,we.x2=k,we.y2=B,we.w=k-_,we.h=B-A,jt(e,_,A,k,B),jt(i.labelBounds.all,_,A,k,B)}return e}},Ox=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,s=r.pstyle("shape").value,o=a+i,u=(e.w+o*2)/e.w,l=(e.h+o*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(s)?(u=(e.w+o*2.4)/e.w,f=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?u=(e.w+o*2.4)/e.w:s==="star"?(u=(e.w+o*2.8)/e.w,l=(e.h+o*2.6)/e.h,f=-o/3.8):s==="triangle"?(u=(e.w+o*2.8)/e.w,l=(e.h+o*2.4)/e.h,f=-o/1.4):s==="vee"&&(u=(e.w+o*4.4)/e.w,l=(e.h+o*3.8)/e.h,f=-o*.5);var d=e.h*l-e.h,v=e.w*u-e.w;if($i(e,[Math.ceil(d/2),Math.ceil(v/2)]),c!=0||f!==0){var h=b1(e,c,f);Yp(e,h)}}}},Vx=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=Ft(),o=e._private,u=e.isNode(),l=e.isEdge(),c,f,d,v,h,g,p=o.rstyle,m=u&&a?e.pstyle("bounds-expansion").pfValue:[0],y=function(Ge){return Ge.pstyle("display").value!=="none"},b=!a||y(e)&&(!l||y(e.source())&&y(e.target()));if(b){var w=0,T=0;a&&r.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(T=e.pstyle("overlay-padding").value));var E=0,x=0;a&&r.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(x=e.pstyle("underlay-padding").value));var C=Math.max(T,x),S=0,D=0;if(a&&(S=e.pstyle("width").pfValue,D=S/2),u&&r.includeNodes){var _=e.position();h=_.x,g=_.y;var k=e.outerWidth(),A=k/2,B=e.outerHeight(),R=B/2;c=h-A,f=h+A,d=g-R,v=g+R,jt(s,c,d,f,v),a&&r.includeOutlines&&Ox(s,e)}else if(l&&r.includeEdges)if(a&&!i){var M=e.pstyle("curve-style").strValue;if(c=Math.min(p.srcX,p.midX,p.tgtX),f=Math.max(p.srcX,p.midX,p.tgtX),d=Math.min(p.srcY,p.midY,p.tgtY),v=Math.max(p.srcY,p.midY,p.tgtY),c-=D,f+=D,d-=D,v+=D,jt(s,c,d,f,v),M==="haystack"){var L=p.haystackPts;if(L&&L.length===2){if(c=L[0].x,d=L[0].y,f=L[1].x,v=L[1].y,c>f){var I=c;c=f,f=I}if(d>v){var N=d;d=v,v=N}jt(s,c-D,d-D,f+D,v+D)}}else if(M==="bezier"||M==="unbundled-bezier"||M.endsWith("segments")||M.endsWith("taxi")){var $;switch(M){case"bezier":case"unbundled-bezier":$=p.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":$=p.linePts;break}if($!=null)for(var O=0;O<$.length;O++){var F=$[O];c=F.x-D,f=F.x+D,d=F.y-D,v=F.y+D,jt(s,c,d,f,v)}}}else{var G=e.source(),X=G.position(),j=e.target(),Y=j.position();if(c=X.x,f=Y.x,d=X.y,v=Y.y,c>f){var ee=c;c=f,f=ee}if(d>v){var re=d;d=v,v=re}c-=D,f+=D,d-=D,v+=D,jt(s,c,d,f,v)}if(a&&r.includeEdges&&l&&(_i(s,e,"mid-source"),_i(s,e,"mid-target"),_i(s,e,"source"),_i(s,e,"target")),a){var Z=e.pstyle("ghost").value==="yes";if(Z){var V=e.pstyle("ghost-offset-x").pfValue,z=e.pstyle("ghost-offset-y").pfValue;jt(s,s.x1+V,s.y1+z,s.x2+V,s.y2+z)}}var U=o.bodyBounds=o.bodyBounds||{};Lf(U,s),$i(U,m),qi(U,1),a&&(c=s.x1,f=s.x2,d=s.y1,v=s.y2,jt(s,c-C,d-C,f+C,v+C));var te=o.overlayBounds=o.overlayBounds||{};Lf(te,s),$i(te,m),qi(te,1);var ae=o.labelBounds=o.labelBounds||{};ae.all!=null?y1(ae.all):ae.all=Ft(),a&&r.includeLabels&&(r.includeMainLabels&&Tu(s,e,null),l&&(r.includeSourceLabels&&Tu(s,e,"source"),r.includeTargetLabels&&Tu(s,e,"target")))}return s.x1=Wt(s.x1),s.y1=Wt(s.y1),s.x2=Wt(s.x2),s.y2=Wt(s.y2),s.w=Wt(s.x2-s.x1),s.h=Wt(s.y2-s.y1),s.w>0&&s.h>0&&b&&($i(s,m),qi(s,1)),s},bg=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},wg=function(e){var r=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return Df([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return Df([r(i.x),r(i.y)])}},Yd=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?Xd:bg(r),o=s===Xd;if(n.bbCache==null?(a=Vx(e,Wa),n.bbCache=a,n.bbCachePosKey=wg(e)):a=n.bbCache,!o){var u=e.isNode();a=Ft(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?rn(a,n.overlayBounds):rn(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?rn(a,n.labelBounds.all):(r.includeMainLabels&&rn(a,n.labelBounds.mainRot),r.includeSourceLabels&&rn(a,n.labelBounds.sourceRot),r.includeTargetLabels&&rn(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Wa={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Xd=bg(Wa),Zd=xt(Wa);Kr.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=Jn(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==wg(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Wa:t=Zd(t),e=Yd(this[0],t);else{e=Ft(),t=t||Wa;var a=Zd(t),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var l=i[u];n(l)&&l.dirtyBoundingBoxCache(),rn(e,Yd(l,a))}}return e.x1=Wt(e.x1),e.y1=Wt(e.y1),e.x2=Wt(e.x2),e.y2=Wt(e.y2),e.w=Wt(e.x2-e.x1),e.h=Wt(e.y2-e.y1),e};Kr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Kr.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),Be(t)){var i=t;t=function(){return i}}var s=function(c,f){return c._private.bbAtOldPos=t(c,f)},o=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=m1(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};Kn.boundingbox=Kn.bb=Kn.boundingBox;Kn.renderedBoundingbox=Kn.renderedBoundingBox;var Fx=Kr,Pa,ui;Pa=ui={};var xg=function(e){e.uppercaseName=vf(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=vf(e.outerName),Pa[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},Pa["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return o+l+c}else return 1},Pa["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Pa["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};xg({name:"width"});xg({name:"height"});ui.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};ui.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};ui.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Nx=ui,zx=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},qx=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return ks(r(e),n.zoom(),n.pan())}},$x=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return ks(s,i,a)})}},Ux=function(e){return e.renderer().getControlPoints(e)},Hx=function(e){return e.renderer().getSegmentPoints(e)},Wx=function(e){return e.renderer().getSourceEndpoint(e)},Gx=function(e){return e.renderer().getTargetEndpoint(e)},Kx=function(e){return e.renderer().getEdgeMidpoint(e)},jd={controlPoints:{get:Ux,mult:!0},segmentPoints:{get:Hx,mult:!0},sourceEndpoint:{get:Wx},targetEndpoint:{get:Gx},midpoint:{get:Kx}},Yx=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Xx=Object.keys(jd).reduce(function(t,e){var r=jd[e],n=Yx(e);return t[e]=function(){return zx(this,r.get)},r.mult?t[n]=function(){return $x(this,r.get)}:t[n]=function(){return qx(this,r.get)},t},{}),Zx=he({},Ix,Fx,Nx,Xx);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Tg=function(e,r){this.recycle(e,r)};function ya(){return!1}function Di(){return!0}Tg.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ya,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Di:ya):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Di;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Di;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Di,this.stopPropagation()},isDefaultPrevented:ya,isPropagationStopped:ya,isImmediatePropagationStopped:ya};var Eg=/^([^.]+)(\.(?:[^.]+))?$/,jx=".*",Cg={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Qd=Object.keys(Cg),Qx={};function Vs(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qx,e=arguments.length>1?arguments[1]:void 0,r=0;r<Qd.length;r++){var n=Qd[r];this[n]=t[n]||Cg[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var qr=Vs.prototype,Sg=function(e,r,n,a,i,s,o){je(a)&&(i=a,a=null),o&&(s==null?s=o:s=he({},s,o));for(var u=$e(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!Or(c)){var f=c.match(Eg);if(f){var d=f[1],v=f[2]?f[2]:null,h=r(e,c,d,v,a,i,s);if(h===!1)break}}}},Jd=function(e,r){return e.addEventFields(e.context,r),new Tg(r.type,r)},Jx=function(e,r,n){if(ub(n)){r(e,n);return}else if(Be(n)){r(e,Jd(e,n));return}for(var a=$e(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!Or(s)){var o=s.match(Eg);if(o){var u=o[1],l=o[2]?o[2]:null,c=Jd(e,{type:u,namespace:l,target:e.context});r(e,c)}}}};qr.on=qr.addListener=function(t,e,r,n,a){return Sg(this,function(i,s,o,u,l,c,f){je(c)&&i.listeners.push({event:s,callback:c,type:o,namespace:u,qualifier:l,conf:f})},t,e,r,n,a),this};qr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};qr.removeListener=qr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=qb(this.listeners));for(var i=this.listeners,s=function(l){var c=i[l];Sg(a,function(f,d,v,h,g,p){if((c.type===v||t==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!g||f.qualifierCompare(c.qualifier,g))&&(!p||c.callback===p))return i.splice(l,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};qr.removeAllListeners=function(){return this.removeListener("*")};qr.emit=qr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,$e(e)||(e=[e]),Jx(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(){var c=n[u];if(c.type===s.type&&(!c.namespace||c.namespace===s.namespace||c.namespace===jx)&&i.eventMatches(i.context,c,s)){var f=[s];e!=null&&Ub(f,e),i.beforeEmit(i.context,c,s),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(h){return h!==c}));var d=i.callbackContext(i.context,c,s),v=c.callback.apply(d,f);i.afterEmit(i.context,c,s),v===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};var eT={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ri(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ai=function(e){return fe(e)?new Nr(e):e},Pg={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Vs(eT,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=Ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=Ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=Ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=Ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Ie.eventAliasesOn(Pg);var _g={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(fe(e)||zt(e))return new Nr(e).filter(this);if(je(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){fe(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(fe(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,u=s?i:a,l=0;l<o.length;l++){var c=o[l];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;fe(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],d=f._private.data.id,v=l.hasElementWithId(d);v||n.push(f)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;fe(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,u=function(c,f,d){for(var v=0;v<c.length;v++){var h=c[v],g=h._private.data.id,p=f.hasElementWithId(g);p?i.merge(h):d.push(h)}};return u(s,o,n),u(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(fe(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&fe(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!i.has(u);if(l){var c=this.length++;this[c]=o,i.set(u,{ele:o,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&fe(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u>n&&(n=u,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u<n&&(n=u,a=o)}return{value:n,ele:a}}},Le=_g;Le.u=Le["|"]=Le["+"]=Le.union=Le.or=Le.add;Le["\\"]=Le["!"]=Le["-"]=Le.difference=Le.relativeComplement=Le.subtract=Le.not;Le.n=Le["&"]=Le["."]=Le.and=Le.intersection=Le.intersect;Le["^"]=Le["(+)"]=Le["(-)"]=Le.symmetricDifference=Le.symdiff=Le.xor;Le.fnFilter=Le.filterFn=Le.stdFilter=Le.filter;Le.complement=Le.abscomp=Le.absoluteComplement;var tT={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Dg=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Zl:0}var s=i(e)-i(r);if(s!==0)return s;function o(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=o(e)-o(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},us={forEach:function(e,r){if(je(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!je(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Dg)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Zl-1}else{var i=r.source,s=r.target,o=i.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};us.each=us.forEach;var rT=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":ct(Symbol))!=e&&ct(Symbol.iterator)!=e;r&&(us[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return Dp({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};rT();var nT=xt({nodeDimensionsIncludeLabels:!1}),Hi={layoutDimensions:function(e){e=nT(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(T){return!T.isParent()}),i=this.cy(),s=r.eles,o=function(E){return E.id()},u=Jn(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(E,x,C){var S={x:x.x1+x.w/2,y:x.y1+x.h/2},D={x:(C.x-S.x)*E,y:(C.y-S.y)*E};return{x:S.x+D.x,y:S.y+D.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var E=Ft(),x=0;x<a.length;x++){var C=a[x],S=u(C,x);w1(E,S.x,S.y)}return E},d=f(),v=Jn(function(T,E){var x=u(T,E);if(c){var C=Math.abs(r.spacingFactor);x=l(C,d,x)}return r.transform!=null&&(x=r.transform(T,x)),x},o);if(r.animate){for(var h=0;h<a.length;h++){var g=a[h],p=v(g,h),m=r.animateFilter==null||r.animateFilter(g,h);if(m){var y=g.animation({position:p,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}else g.position(p)}if(r.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(v),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var w=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}e.animations.forEach(function(T){return T.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),la.all(e.animations.map(function(T){return T.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(v),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(he({},e,{eles:this}))}};Hi.createLayout=Hi.makeLayout=Hi.layout;function Ag(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Fs(t,e){return t=hn(t),function(n){return Ag(t,e,n)}}function Ns(t,e){t=hn(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Ag(t,r,a)}}var bt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Be(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(fe(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Eu(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function uc(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||Eu(i,n);var u=o.source,l=o.target;return r(u)&&(!s||Eu(u,r))&&(u===l||r(l)&&(!s||Eu(l,r)))}}}var ca=Fs("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});bt.takesUpSpace=Ns("takesUpSpace",uc({ok:ca}));var aT=Fs("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&ca(t)}),iT=Fs("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&ca(t)});bt.interactive=Ns("interactive",uc({ok:aT,parentOk:iT,edgeOkViaNode:ca}));bt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var sT=Fs("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&ca(t)}),oT=ca;bt.visible=Ns("visible",uc({ok:sT,edgeOkViaNode:oT}));bt.hidden=function(){var t=this[0];if(t)return!t.visible()};bt.isBundledBezier=Ns("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});bt.bypass=bt.css=bt.style;bt.renderedCss=bt.renderedStyle;bt.removeBypass=bt.removeCss=bt.removeStyle;bt.pstyle=bt.parsedStyle;var Lr={};function ev(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&je(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&$e(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[t.field]=t.value,c&&r.push(u))}var d=this.spawn(r);d.updateStyle(),d.emit(t.event),s&&d.emit(s)}return this}}function fa(t){Lr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Lr[t.on]=ev({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Lr[t.off]=ev({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}fa({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});fa({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});fa({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});fa({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Lr.deselect=Lr.unselect;Lr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};fa({field:"active",on:"activate",off:"unactivate"});fa({field:"pannable",on:"panify",off:"unpanify"});Lr.inactive=function(){var t=this[0];if(t)return!t._private.active};var St={},tv=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),c=0;c<l.length;c++){var f=l[c],d=f.source(),v=f.target();if(e.noIncomingEdges&&v===o&&d!==o||e.noOutgoingEdges&&d===o&&v!==o){u=!0;break}}u||i.push(o)}}return this.spawn(i,!0).filter(n)}},rv=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],c=l.source(),f=l.target();e.outgoing&&c===s?(a.push(l),a.push(f)):e.incoming&&f===s&&(a.push(l),a.push(c))}}return this.spawn(a,!0).filter(r)}},nv=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],c=l.id();i[c]||(i[c]=!0,a.push(l),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};St.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};he(St,{roots:tv({noIncomingEdges:!0}),leaves:tv({noOutgoingEdges:!0}),outgoers:Gt(rv({outgoing:!0}),"outgoers"),successors:nv({outgoing:!0}),incomers:Gt(rv({incoming:!0}),"incomers"),predecessors:nv({})});he(St,{neighborhood:Gt(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],u=o.source(),l=o.target(),c=a===u?l:u;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});St.neighbourhood=St.neighborhood;St.closedNeighbourhood=St.closedNeighborhood;St.openNeighbourhood=St.openNeighborhood;he(St,{source:Gt(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Gt(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:av({attr:"source"}),targets:av({attr:"target"})});function av(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}he(St,{edgesWith:Gt(iv(),"edgesWith"),edgesTo:Gt(iv({thisIsSrc:!0}),"edgesTo")});function iv(t){return function(r){var n=[],a=this._private.cy,i=t||{};fe(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var l=o[u],c=l._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),d=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),v=f||d;v&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(l))}return this.spawn(n,!0)}}he(St,{connectedEdges:Gt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Gt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Gt(sv(),"parallelEdges"),codirectedEdges:Gt(sv({codirected:!0}),"codirectedEdges")});function sv(t){var e={codirected:!1};return t=he({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var u=i[o],l=u._private,c=l.source,f=c._private.data.id,d=l.data.target,v=c._private.edges,h=0;h<v.length;h++){var g=v[h],p=g._private.data,m=p.target,y=p.source,b=m===d&&y===f,w=f===m&&d===y;(s.codirected&&b||!s.codirected&&(b||w))&&a.push(g)}return this.spawn(a,!0).filter(n)}}he(St,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=n.collection();s.push(c);var f=i[0];o(f,c),r.bfs({directed:!1,roots:f,visit:function(v){return o(v,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(v){r.has(v)&&c.has(v.source())&&c.has(v.target())&&c.merge(v)})})};do u();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});St.componentsOf=St.components;var wt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Ze("A collection must have a reference to the core");return}var i=new gr,s=!1;if(!r)r=[];else if(r.length>0&&Be(r[0])&&!ri(r[0])){s=!0;for(var o=[],u=new ua,l=0,c=r.length;l<c;l++){var f=r[l];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=Wp();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var v=new As(e,f,!1);o.push(v),u.add(d.id)}r=o}this.length=0;for(var h=0,g=r.length;h<g;h++){var p=r[h][0];if(p!=null){var m=p._private.data.id;(!n||!i.has(m))&&(n&&i.set(m,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var b=this.lazyMap=new gr,w=this.eles,T=0;T<w.length;T++){var E=w[T];b.set(E.id(),{index:T,ele:E})}}},n&&(this._private.map=i),s&&!a&&this.restore()},We=As.prototype=wt.prototype=Object.create(Array.prototype);We.instanceString=function(){return"collection"};We.spawn=function(t,e){return new wt(this.cy(),t,e)};We.spawnSelf=function(){return this.spawn(this)};We.cy=function(){return this._private.cy};We.renderer=function(){return this._private.cy.renderer()};We.element=function(){return this[0]};We.collection=function(){return Bp(this)?this:new wt(this._private.cy,[this])};We.unique=function(){return new wt(this._private.cy,this,!0)};We.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};We.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new wt(e)};We.$id=We.getElementById;We.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};We.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};We.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};We.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Be(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),u!=null&&u!=a.target&&(s.target=""+u,i=!0),i&&(e=e.move(s))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(g,p,m){var y=t[g];y!=null&&y!==n[g]&&(y?e[p]():e[m]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var d={data:or(n.data),position:or(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var v=0;return n.classes.forEach(function(h){return d.classes+=v++===0?h:" "+h}),d}}};We.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};We.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new As(t,a,!1);e.push(i)}return new wt(t,e)};We.copy=We.clone;We.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,u=0,l=r.length;u<l;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):s.push(c))}o=i.concat(s);var f,d=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var v=o[f],h=v._private,g=h.data;if(v.clearTraversalCache(),!(!e&&!h.removed)){if(g.id===void 0)g.id=Wp();else if(ne(g.id))g.id=""+g.id;else if(Or(g.id)||!fe(g.id)){Ze("Can not create element with invalid string ID `"+g.id+"`"),d();continue}else if(n.hasElementWithId(g.id)){Ze("Can not create second element with ID `"+g.id+"`"),d();continue}}var p=g.id;if(v.isNode()){var m=h.position;m.x==null&&(m.x=0),m.y==null&&(m.y=0)}if(v.isEdge()){for(var y=v,b=["source","target"],w=b.length,T=!1,E=0;E<w;E++){var x=b[E],C=g[x];ne(C)&&(C=g[x]=""+g[x]),C==null||C===""?(Ze("Can not create edge `"+p+"` with unspecified "+x),T=!0):n.hasElementWithId(C)||(Ze("Can not create edge `"+p+"` with nonexistant "+x+" `"+C+"`"),T=!0)}if(T){d();continue}var S=n.getElementById(g.source),D=n.getElementById(g.target);S.same(D)?S._private.edges.push(y):(S._private.edges.push(y),D._private.edges.push(y)),y._private.source=S,y._private.target=D}h.map=new gr,h.map.set(p,{ele:v,index:0}),h.removed=!1,e&&n.addToPool(v)}for(var _=0;_<i.length;_++){var k=i[_],A=k._private.data;ne(A.parent)&&(A.parent=""+A.parent);var B=A.parent,R=B!=null;if(R||k._private.parent){var M=k._private.parent?n.collection().merge(k._private.parent):n.getElementById(B);if(M.empty())A.parent=void 0;else if(M[0].removed())Oe("Node added with missing parent, reference to parent removed"),A.parent=void 0,k._private.parent=null;else{for(var L=!1,I=M;!I.empty();){if(k.same(I)){L=!0,A.parent=void 0;break}I=I.parent()}L||(M[0]._private.children.push(k),k._private.parent=M[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var N=o.length===r.length?r:new wt(n,o),$=0;$<N.length;$++){var O=N[$];O.isNode()||(O.parallelEdges().clearTraversalCache(),O.source().clearTraversalCache(),O.target().clearTraversalCache())}var F;a.hasCompoundNodes?F=n.collection().merge(N).merge(N.connectedNodes()).merge(N.parent()):F=N,F.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?N.emitAndNotify("add"):e&&N.emit("add")}return r};We.removed=function(){var t=this[0];return t&&t._private.removed};We.inside=function(){var t=this[0];return t&&!t._private.removed};We.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(B){for(var R=B._private.edges,M=0;M<R.length;M++)u(R[M])}function o(B){for(var R=B._private.children,M=0;M<R.length;M++)u(R[M])}function u(B){var R=a[B.id()];e&&B.removed()||R||(a[B.id()]=!0,B.isNode()?(n.push(B),s(B),o(B)):n.unshift(B))}for(var l=0,c=r.length;l<c;l++){var f=r[l];u(f)}function d(B,R){var M=B._private.edges;Vr(M,R),B.clearTraversalCache()}function v(B){B.clearTraversalCache()}var h=[];h.ids={};function g(B,R){R=R[0],B=B[0];var M=B._private.children,L=B.id();Vr(M,R),R._private.parent=null,h.ids[L]||(h.ids[L]=!0,h.push(B))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var p=0;p<n.length;p++){var m=n[p];if(m.isEdge()){var y=m.source()[0],b=m.target()[0];d(y,m),d(b,m);for(var w=m.parallelEdges(),T=0;T<w.length;T++){var E=w[T];v(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var x=m.parent();x.length!==0&&g(x,m)}e&&(m._private.removed=!0)}var C=i._private.elements;i._private.hasCompoundNodes=!1;for(var S=0;S<C.length;S++){var D=C[S];if(D.isParent()){i._private.hasCompoundNodes=!0;break}}var _=new wt(this.cy(),n);_.size()>0&&(t?_.emitAndNotify("remove"):e&&_.emit("remove"));for(var k=0;k<h.length;k++){var A=h[k];(!e||!A.removed())&&A.updateStyle()}return _};We.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var h=r[v],g=h._private.data;h.isEdge()&&(u&&(g.source=s),l&&(g.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var v=r.remove(n,a);v.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var g=r[h],p=g._private.data;g.isNode()&&(p.parent=d)}v.restore(n,a)}),r.emitAndNotify("move")}}return this};[rg,yx,Ui,Mr,ra,Lx,Os,Zx,Pg,_g,tT,us,Hi,bt,Lr,St].forEach(function(t){he(We,t)});var uT={add:function(e){var r,n=this;if(zt(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new wt(n,i)}}else if($e(e)){var u=e;r=new wt(n,u)}else if(Be(e)&&($e(e.nodes)||$e(e.edges))){for(var l=e,c=[],f=["nodes","edges"],d=0,v=f.length;d<v;d++){var h=f[d],g=l[h];if($e(g))for(var p=0,m=g.length;p<m;p++){var y=he({group:h},g[p]);c.push(y)}}r=new wt(n,c)}else{var b=e;r=new As(n,b).collection()}return r},remove:function(e){if(!zt(e)){if(fe(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function lT(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=c?new Float32Array(u):new Array(u);function v(D,_){return 1-3*_+3*D}function h(D,_){return 3*_-6*D}function g(D){return 3*D}function p(D,_,k){return((v(_,k)*D+h(_,k))*D+g(_))*D}function m(D,_,k){return 3*v(_,k)*D*D+2*h(_,k)*D+g(_)}function y(D,_){for(var k=0;k<a;++k){var A=m(_,t,r);if(A===0)return _;var B=p(_,t,r)-D;_-=B/A}return _}function b(){for(var D=0;D<u;++D)d[D]=p(D*l,t,r)}function w(D,_,k){var A,B,R=0;do B=_+(k-_)/2,A=p(B,t,r)-D,A>0?k=B:_=B;while(Math.abs(A)>s&&++R<o);return B}function T(D){for(var _=0,k=1,A=u-1;k!==A&&d[k]<=D;++k)_+=l;--k;var B=(D-d[k])/(d[k+1]-d[k]),R=_+B*l,M=m(R,t,r);return M>=i?y(D,R):M===0?R:w(D,_,_+l)}var E=!1;function x(){E=!0,(t!==e||r!==n)&&b()}var C=function(_){return E||x(),t===e&&r===n?_:_===0?0:_===1?1:p(T(_),e,n)};C.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var S="generateBezier("+[t,e,r,n]+")";return C.toString=function(){return S},C}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var cT=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),u=e(n,a,o),l=1/6*(i.dx+2*(s.dx+o.dx)+u.dx),c=1/6*(i.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+c*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,d,v,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,d=s!==null,d?(l=n(a,i),v=l/s*f):v=f;h=r(h||o,v),u.push(1+h.x),l+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return d?function(g){return u[g*(u.length-1)|0]}:l}}(),Ue=function(e,r,n,a){var i=lT(e,r,n,a);return function(s,o,u){return s+(o-s)*i(u)}},Wi={linear:function(e,r,n){return e+(r-e)*n},ease:Ue(.25,.1,.25,1),"ease-in":Ue(.42,0,1,1),"ease-out":Ue(0,0,.58,1),"ease-in-out":Ue(.42,0,.58,1),"ease-in-sine":Ue(.47,0,.745,.715),"ease-out-sine":Ue(.39,.575,.565,1),"ease-in-out-sine":Ue(.445,.05,.55,.95),"ease-in-quad":Ue(.55,.085,.68,.53),"ease-out-quad":Ue(.25,.46,.45,.94),"ease-in-out-quad":Ue(.455,.03,.515,.955),"ease-in-cubic":Ue(.55,.055,.675,.19),"ease-out-cubic":Ue(.215,.61,.355,1),"ease-in-out-cubic":Ue(.645,.045,.355,1),"ease-in-quart":Ue(.895,.03,.685,.22),"ease-out-quart":Ue(.165,.84,.44,1),"ease-in-out-quart":Ue(.77,0,.175,1),"ease-in-quint":Ue(.755,.05,.855,.06),"ease-out-quint":Ue(.23,1,.32,1),"ease-in-out-quint":Ue(.86,0,.07,1),"ease-in-expo":Ue(.95,.05,.795,.035),"ease-out-expo":Ue(.19,1,.22,1),"ease-in-out-expo":Ue(1,0,0,1),"ease-in-circ":Ue(.6,.04,.98,.335),"ease-out-circ":Ue(.075,.82,.165,1),"ease-in-out-circ":Ue(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Wi.linear;var a=cT(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":Ue};function ov(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function uv(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function An(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=uv(t,a),o=uv(e,a);if(ne(s)&&ne(o))return ov(i,s,o,r,n);if($e(s)&&$e(o)){for(var u=[],l=0;l<o.length;l++){var c=s[l],f=o[l];if(c!=null&&f!=null){var d=ov(i,c,f,r,n);u.push(d)}else u.push(f)}return u}}function fT(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,u=s.startTime,l=n?t:t.cy(),c=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=Wi.linear;else{var f;if(fe(o)){var d=c.parse("transition-timing-function",o);f=d.value}else f=o;var v,h;fe(f)?(v=f,h=[]):(v=f[1],h=f.slice(2).map(function(N){return+N})),h.length>0?(v==="spring"&&h.push(s.duration),s.easingImpl=Wi[v].apply(null,h)):s.easingImpl=Wi[v]}var g=s.easingImpl,p;if(s.duration===0?p=1:p=(r-u)/s.duration,s.applying&&(p=s.progress),p<0?p=0:p>1&&(p=1),s.delay==null){var m=s.startPosition,y=s.position;if(y&&a&&!t.locked()){var b={};ba(m.x,y.x)&&(b.x=An(m.x,y.x,p,g)),ba(m.y,y.y)&&(b.y=An(m.y,y.y,p,g)),t.position(b)}var w=s.startPan,T=s.pan,E=i.pan,x=T!=null&&n;x&&(ba(w.x,T.x)&&(E.x=An(w.x,T.x,p,g)),ba(w.y,T.y)&&(E.y=An(w.y,T.y,p,g)),t.emit("pan"));var C=s.startZoom,S=s.zoom,D=S!=null&&n;D&&(ba(C,S)&&(i.zoom=$a(i.minZoom,An(C,S,p,g),i.maxZoom)),t.emit("zoom")),(x||D)&&t.emit("viewport");var _=s.style;if(_&&_.length>0&&a){for(var k=0;k<_.length;k++){var A=_[k],B=A.name,R=A,M=s.startStyle[B],L=c.properties[M.name],I=An(M,R,p,g,L);c.overrideBypass(t,B,I)}t.emit("style")}}return s.progress=p,p}function ba(t,e){return t==null||e==null?!1:ne(t)&&ne(e)?!0:!!(t&&e)}function dT(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function lv(t,e){var r=e._private.aniEles,n=[];function a(c,f){var d=c._private,v=d.animation.current,h=d.animation.queue,g=!1;if(v.length===0){var p=h.shift();p&&v.push(p)}for(var m=function(E){for(var x=E.length-1;x>=0;x--){var C=E[x];C()}E.splice(0,E.length)},y=v.length-1;y>=0;y--){var b=v[y],w=b._private;if(w.stopped){v.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,m(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||dT(c,b,t),fT(c,b,t,f),w.applying&&(w.applying=!1),m(w.frames),w.step!=null&&w.step(t),b.completed()&&(v.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,m(w.completes)),g=!0)}return!f&&v.length===0&&h.length===0&&n.push(c),g}for(var i=!1,s=0;s<r.length;s++){var o=r[s],u=a(o);i=i||u}var l=a(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var vT={animate:Ie.animate(),animation:Ie.animation(),animated:Ie.animated(),clearQueue:Ie.clearQueue(),delay:Ie.delay(),delayAnimation:Ie.delayAnimation(),stop:Ie.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&ns(function(i){lv(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){lv(s,e)},n.beforeRenderPriorities.animations):r()}},hT={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ri(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},ki=function(e){return fe(e)?new Nr(e):e},kg={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Vs(hT,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,ki(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,ki(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,ki(r),n),this},once:function(e,r,n){return this.emitter().one(e,ki(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Ie.eventAliasesOn(kg);var ul={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};ul.jpeg=ul.jpg;var Gi={layout:function(e){var r=this;if(e==null){Ze("Layout options must be specified to make a layout");return}if(e.name==null){Ze("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){Ze("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;fe(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(he({},e,{cy:r,eles:i}));return s}};Gi.createLayout=Gi.makeLayout=Gi.layout;var pT={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},gT=xt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),ll={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){Ze("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Oe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=gT(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};ll.invalidateDimensions=ll.resize;var Ki={collection:function(e,r){return fe(e)?this.$(e):zt(e)?e.collection():$e(e)?(r||(r={}),new wt(this,e,r.unique,r.removed)):new wt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Ki.elements=Ki.filter=Ki.$;var gt={},Ba="t",mT="f";gt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&a.push(s)}}return a};gt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},u=0;u<r.length;u++){var l=r[u],c=t[u]===Ba,f=e[u]===Ba,d=c!==f,v=l.mappedProperties.length>0;if(d||f&&v){var h=void 0;d&&v||d?h=l.properties:v&&(h=l.mappedProperties);for(var g=0;g<h.length;g++){for(var p=h[g],m=p.name,y=!1,b=u+1;b<r.length;b++){var w=r[b],T=e[b]===Ba;if(T&&(y=w.properties[p.name]!=null,y))break}!o[m]&&!y&&(o[m]=!0,s.push(m))}}}return n[a]=s,s};gt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=Ba:r+=mT}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};gt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===Ba;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];a[l.name]=l}}return n[e]=a,a};gt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var u=a[o],l=e[u],c=r.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,d=f.fnValue=l.value(r);if(d===f.prevFnValue)continue}var v=i[u]={prev:c};n.applyParsedProperty(r,l),v.next=r.pstyle(u),v.next&&v.next.bypass&&(v.next=v.next.bypassed)}}return{diffProps:i}};gt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(U,te,ae){return r.getPropertiesHash(U,te,ae)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var c=a[l];e.styleKeys[c]=[ln,In]}for(var f=function(U,te){return e.styleKeys[te][0]=Na(U,e.styleKeys[te][0])},d=function(U,te){return e.styleKeys[te][1]=za(U,e.styleKeys[te][1])},v=function(U,te){f(U,te),d(U,te)},h=function(U,te){for(var ae=0;ae<U.length;ae++){var we=U.charCodeAt(ae);f(we,te),d(we,te)}},g=2e9,p=function(U){return-128<U&&U<128&&Math.floor(U)!==U?g-(U*1024|0):U},m=0;m<n.length;m++){var y=n[m],b=u[y];if(b!=null){var w=this.properties[y],T=w.type,E=w.groupKey,x=void 0;w.hashOverride!=null?x=w.hashOverride(t,b):b.pfValue!=null&&(x=b.pfValue);var C=w.enums==null?b.value:null,S=x!=null,D=C!=null,_=S||D,k=b.units;if(T.number&&_&&!T.multiple){var A=S?x:C;v(p(A),E),!S&&k!=null&&h(k,E)}else h(b.strValue,E)}}for(var B=[ln,In],R=0;R<a.length;R++){var M=a[R],L=e.styleKeys[M];B[0]=Na(L[0],B[0]),B[1]=za(L[1],B[1])}e.styleKey=Ob(B[0],B[1]);var I=e.styleKeys;e.labelDimsKey=Dr(I.labelDimensions);var N=i(t,["label"],I.labelDimensions);if(e.labelKey=Dr(N),e.labelStyleKey=Dr(Ti(I.commonLabel,N)),!o){var $=i(t,["source-label"],I.labelDimensions);e.sourceLabelKey=Dr($),e.sourceLabelStyleKey=Dr(Ti(I.commonLabel,$));var O=i(t,["target-label"],I.labelDimensions);e.targetLabelKey=Dr(O),e.targetLabelStyleKey=Dr(Ti(I.commonLabel,O))}if(o){var F=e.styleKeys,G=F.nodeBody,X=F.nodeBorder,j=F.nodeOutline,Y=F.backgroundImage,ee=F.compound,re=F.pie,Z=F.stripe,V=[G,X,j,Y,ee,re,Z].filter(function(z){return z!=null}).reduce(Ti,[ln,In]);e.nodeKey=Dr(V),e.hasPie=re!=null&&re[0]!==ln&&re[1]!==In,e.hasStripe=Z!=null&&Z[0]!==ln&&Z[1]!==In}return s!==e.styleKey};gt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};gt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,u=n.bypass,l=a[n.name],c=l&&l.bypass,f=t._private,d="mapping",v=function(G){return G==null?null:G.pfValue!=null?G.pfValue:G.value},h=function(){var G=v(l),X=v(n);r.checkTriggers(t,n.name,G,X)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,h(),!0):!1:(h(),!0);var g=function(){Oe("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var p=n.field.split("."),m=f.data,y=0;y<p.length&&m;y++){var b=p[y];m=m[b]}if(m==null)return g(),!1;var w;if(ne(m)){var T=n.fieldMax-n.fieldMin;T===0?w=0:w=(m-n.fieldMin)/T}else return Oe("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),o.color){var E=n.valueMin[0],x=n.valueMax[0],C=n.valueMin[1],S=n.valueMax[1],D=n.valueMin[2],_=n.valueMax[2],k=n.valueMin[3]==null?1:n.valueMin[3],A=n.valueMax[3]==null?1:n.valueMax[3],B=[Math.round(E+(x-E)*w),Math.round(C+(S-C)*w),Math.round(D+(_-D)*w),Math.round(k+(A-k)*w)];i={bypass:n.bypass,name:n.name,value:B,strValue:"rgb("+B[0]+", "+B[1]+", "+B[2]+")"}}else if(o.number){var R=n.valueMin+(n.valueMax-n.valueMin)*w;i=this.parse(n.name,R,n.bypass,d)}else return!1;if(!i)return g(),!1;i.mapping=n,n=i;break}case s.data:{for(var M=n.field.split("."),L=f.data,I=0;I<M.length&&L;I++){var N=M[I];L=L[N]}if(L!=null&&(i=this.parse(n.name,L,n.bypass,d)),!i)return g(),!1;i.mapping=n,n=i;break}case s.fn:{var $=n.value,O=n.fnValue!=null?n.fnValue:$(t);if(n.prevFnValue=O,O==null)return Oe("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,O,n.bypass,d),!i)return Oe("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=or(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):c?l.bypassed=n:a[n.name]=n,h(),!0};gt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],u=a[o];u!=null&&(u.bypass?u.bypassed=null:a[o]=null)}}};gt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};gt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},u=!1,l=0;l<a.length;l++){var c=a[l],f=t.pstyle(c),d=e[c];if(d){var v=d.prev,h=v,g=d.next!=null?d.next:f,p=!1,m=void 0,y=1e-6;h&&(ne(h.pfValue)&&ne(g.pfValue)?(p=g.pfValue-h.pfValue,m=h.pfValue+y*p):ne(h.value)&&ne(g.value)?(p=g.value-h.value,m=h.value+y*p):$e(h.value)&&$e(g.value)&&(p=h.value[0]!==g.value[0]||h.value[1]!==g.value[1]||h.value[2]!==g.value[2],m=h.strValue),p&&(o[c]=g.strValue,this.applyBypass(t,c,m),u=!0))}}if(!u)return;n.transitioning=!0,new la(function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};gt.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);t.removed()||o!=null&&o(r,n,t)&&i(s)};gt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};gt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};gt.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};gt.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};gt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var li={};li.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var u=a.properties[o],l=u.name,c=this.parse(l,r,!0);c&&i.push(c)}}else if(fe(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if(Be(e)){var d=e;n=r;for(var v=Object.keys(d),h=0;h<v.length;h++){var g=v[h],p=d[g];if(p===void 0&&(p=d[_s(g)]),p!==void 0){var m=this.parse(g,p,!0);m&&i.push(m)}}}else return!1;if(i.length===0)return!1;for(var y=!1,b=0;b<t.length;b++){for(var w=t[b],T={},E=void 0,x=0;x<i.length;x++){var C=i[x];if(n){var S=w.pstyle(C.name);E=T[C.name]={prev:S}}y=this.applyParsedProperty(w,or(C))||y,n&&(E.next=w.pstyle(C.name))}y&&this.updateStyleHints(w),n&&this.updateTransitions(w,T,s)}return y};li.overrideBypass=function(t,e,r){e=Yl(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,l,r)}};li.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};li.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var f="",d=this.parse(u,f,!0),v=s[l.name]={prev:c};this.applyParsedProperty(i,d),v.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};var lc={};lc.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};lc.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var lr={};lr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};lr.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[_s(i.name)]=s)}return n}};lr.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};lr.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(r&&i.number&&o!=null&&ne(o)){var c=t.cy().zoom(),f=function(p){return p*c},d=function(p,m){return f(p)+m},v=$e(o),h=v?u.every(function(g){return g!=null}):u!=null;return h?v?o.map(function(g,p){return d(g,u[p])}).join(" "):d(o,u):v?o.map(function(g){return fe(g)?g:""+f(g)}).join(" "):""+f(o)}else if(l!=null)return l}return null}};lr.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&(Be(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};lr.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],u=n[o],l=a[o]||a[Yl(o)],c=this.parse(l.name,u);c&&r.push(c)}return r};lr.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Na(o,n[0]),n[1]=za(o,n[1]);else for(s=i.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=Na(o,n[0]),n[1]=za(o,n[1]);return n};lr.getPropertiesHash=lr.getNonDefaultPropertiesHash;var zs={};zs.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var u=s[o],l=i[u];e.css(u,l)}}return e};zs.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};zs.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var cc={};cc.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Oe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new Nr(f);if(d.invalid){Oe("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var v=c[2],h=!1;i=v;for(var g=[];;){var p=i.match(/^\s*$/);if(p)break;var m=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!m){Oe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),h=!0;break}s=m[0];var y=m[1],b=m[2],w=e.properties[y];if(!w){Oe("Skipping property: Invalid property name in: "+s),u();continue}var T=r.parse(y,b);if(!T){Oe("Skipping property: Invalid property definition in: "+s),u();continue}g.push({name:y,val:b}),u()}if(h){o();break}r.selector(f);for(var E=0;E<g.length;E++){var x=g[E];r.css(x.name,x.val)}o()}return r};cc.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var it={};(function(){var t=lt,e=hb,r=gb,n=mb,a=yb,i=function(z){return"^"+z+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(z){var U=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+z+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];it.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(z,U){switch(z.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return fe(z[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(z){var U=z.length;return U===1||U===2||U===4}}};var u={zeroNonZero:function(z,U){return(z==null||U==null)&&z!==U||z==0&&U!=0?!0:z!=0&&U==0},any:function(z,U){return z!=U},emptyNonEmpty:function(z,U){var te=Or(z),ae=Or(U);return te&&!ae||!te&&ae}},l=it.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],v=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],h=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],g=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],p=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(z,U,te){return z===U?!1:te.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],m=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(z,U){return U.value==="label"?-z.poolIndex():U.pfValue},T=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],x=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],C=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],S=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],D=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(z,U){return z===U?!1:z==="bezier"||U==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],_=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],k=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],A=[];it.pieBackgroundN=16,A.push({name:"pie-size",type:l.sizeMaybePercent}),A.push({name:"pie-hole",type:l.sizeMaybePercent}),A.push({name:"pie-start-angle",type:l.angle});for(var B=1;B<=it.pieBackgroundN;B++)A.push({name:"pie-"+B+"-background-color",type:l.color}),A.push({name:"pie-"+B+"-background-size",type:l.percent}),A.push({name:"pie-"+B+"-background-opacity",type:l.zeroOneNumber});var R=[];it.stripeBackgroundN=16,R.push({name:"stripe-size",type:l.sizeMaybePercent}),R.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var M=1;M<=it.stripeBackgroundN;M++)R.push({name:"stripe-"+M+"-background-color",type:l.color}),R.push({name:"stripe-"+M+"-background-size",type:l.percent}),R.push({name:"stripe-"+M+"-background-opacity",type:l.zeroOneNumber});var L=[],I=it.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(V){I.forEach(function(z){var U=z+"-"+V.name,te=V.type,ae=V.triggersBounds;L.push({name:U,type:te,triggersBounds:ae})})},{});var N=it.properties=[].concat(g,b,p,m,y,_,h,v,c,f,d,T,E,x,C,A,R,S,D,L,k),$=it.propertyGroups={behavior:g,transition:b,visibility:p,overlay:m,underlay:y,ghost:_,commonLabel:h,labelDimensions:v,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:T,nodeBorder:E,nodeOutline:x,backgroundImage:C,pie:A,stripe:R,compound:S,edgeLine:D,edgeArrow:L,core:k},O=it.propertyGroupNames={},F=it.propertyGroupKeys=Object.keys($);F.forEach(function(V){O[V]=$[V].map(function(z){return z.name}),$[V].forEach(function(z){return z.groupKey=V})});var G=it.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];it.propertyNames=N.map(function(V){return V.name});for(var X=0;X<N.length;X++){var j=N[X];N[j.name]=j}for(var Y=0;Y<G.length;Y++){var ee=G[Y],re=N[ee.pointsTo],Z={name:ee.name,alias:!0,pointsTo:re};N.push(Z),N[ee.name]=Z}})();it.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};it.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=he({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=it.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=it.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return it.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,d=l.value;u[f]=d}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};it.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var qs={};qs.parse=function(t,e,r,n){var a=this;if(je(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,u=$p(t,o,s,i),l=a.propCache=a.propCache||[],c;return(c=l[u])||(c=l[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=or(c),c&&(c.value=or(c.value))),c};qs.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Oe("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Oe("The style value of `label` is deprecated for `"+a.name+"`"),a};qs.parseImpl=function(t,e,r,n){var a=this;t=Yl(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=fe(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(je(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(r)return!1;var d=o.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(e))){if(r||l.multiple)return!1;var v=o.mapData;if(!(l.color||l.number))return!1;var h=this.parse(t,f[4]);if(!h||h.mapped)return!1;var g=this.parse(t,f[5]);if(!g||g.mapped)return!1;if(h.pfValue===g.pfValue||h.strValue===g.strValue)return Oe("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+h.strValue+"`"),this.parse(t,h.strValue);if(l.color){var p=h.value,m=g.value,y=p[0]===m[0]&&p[1]===m[1]&&p[2]===m[2]&&(p[3]===m[3]||(p[3]==null||p[3]===1)&&(m[3]==null||m[3]===1));if(y)return!1}return{name:t,value:f,strValue:""+e,mapped:v,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:h.value,valueMax:g.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):$e(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],T=[],E=[],x="",C=!1,S=0;S<b.length;S++){var D=a.parse(t,b[S],r,"multiple");C=C||fe(D.value),w.push(D.value),E.push(D.pfValue!=null?D.pfValue:D.value),T.push(D.units),x+=(S>0?" ":"")+D.strValue}return l.validate&&!l.validate(w,T)?null:l.singleEnum&&C?w.length===1&&fe(w[0])?{name:t,value:w[0],strValue:w[0],bypass:r}:null:{name:t,value:w,pfValue:E,strValue:x,bypass:r,units:T}}var _=function(){for(var Z=0;Z<l.enums.length;Z++){var V=l.enums[Z];if(V===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var k,A="px";if(l.units&&(k=l.units),l.implicitUnits&&(A=l.implicitUnits),!l.unitless)if(u){var B="px|em"+(l.allowPercent?"|\\%":"");k&&(B=k);var R=e.match("^("+lt+")("+B+")?$");R&&(e=R[1],k=R[2]||A)}else(!k||l.implicitUnits)&&(k=A);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,_();if(l.integer&&!ob(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var M={name:t,value:e,strValue:""+e+(k||""),units:k,bypass:r};return l.unitless||k!=="px"&&k!=="em"?M.pfValue=e:M.pfValue=k==="px"||!k?e:this.getEmSizeInPixels()*e,(k==="ms"||k==="s")&&(M.pfValue=k==="ms"?e:1e3*e),(k==="deg"||k==="rad")&&(M.pfValue=k==="rad"?e:h1(e)),k==="%"&&(M.pfValue=e/100),M}else if(l.propList){var L=[],I=""+e;if(I!=="none"){for(var N=I.split(/\s*,\s*|\s+/),$=0;$<N.length;$++){var O=N[$].trim();a.properties[O]?L.push(O):Oe("`"+O+"` is not a valid property name")}if(L.length===0)return null}return{name:t,value:L,strValue:L.length===0?"none":L.join(" "),bypass:r}}else if(l.color){var F=Ip(e);return F?{name:t,value:F,pfValue:F,strValue:"rgb("+F[0]+","+F[1]+","+F[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var G=_();if(G)return G}for(var X=l.regexes?l.regexes:[l.regex],j=0;j<X.length;j++){var Y=new RegExp(X[j]),ee=Y.exec(e);if(ee)return{name:t,value:l.singleRegexMatchValue?ee[1]:ee,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?_():null};var pt=function(e){if(!(this instanceof pt))return new pt(e);if(!Kl(e)){Ze("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Pt=pt.prototype;Pt.instanceString=function(){return"style"};Pt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Pt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Pt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Pt.selector=function(t){var e=t==="core"?null:new Nr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Pt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[_s(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Pt.style=Pt.css;Pt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};Pt.append=function(t){return Rp(t)?t.appendToStyle(this):$e(t)?this.appendFromJson(t):fe(t)&&this.appendFromString(t),this};pt.fromJson=function(t,e){var r=new pt(t);return r.fromJson(e),r};pt.fromString=function(t,e){return new pt(t).fromString(e)};[gt,li,lc,lr,zs,cc,it,qs].forEach(function(t){he(Pt,t)});pt.types=Pt.types;pt.properties=Pt.properties;pt.propertyGroups=Pt.propertyGroups;pt.propertyGroupNames=Pt.propertyGroupNames;pt.propertyGroupKeys=Pt.propertyGroupKeys;var yT={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return Rp(e)?r.style=e.generateStyle(this):$e(e)?r.style=pt.fromJson(this,e):fe(e)?r.style=pt.fromString(this,e):r.style=pt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},bT="single",mn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=bT),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(fe(e[0]))return n=e[0],r[n];if(Be(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,ne(s)&&(r.x=s),ne(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ne(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Be(e)&&(o=n[0],u=o.x,l=o.y,ne(u)&&(a.x+=u),ne(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&ne(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ne(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(fe(e)){var a=e;e=this.$(a)}else if(cb(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else zt(e)||(e=this.mutableElements());if(!(zt(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(r=ne(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*r)/n.w,(o-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return ne(e)&&ne(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):ne(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:ne(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),ne(e)?s=e:Be(e)&&(s=e.level,e.position!=null?i=ks(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!ne(s)||s===a||i!=null&&(!ne(i.x)||!ne(i.y)))return null;if(i!=null){var u=n,l=a,c=s,f={x:-c/l*(i.x-u.x)+i.x,y:-c/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(ne(e.zoom)||(n=!1),Be(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;ne(l.x)&&(r.pan.x=l.x,o=!1),ne(l.y)&&(r.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(fe(e)){var n=e;e=this.mutableElements().filter(n)}else zt(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};mn.centre=mn.center;mn.autolockNodes=mn.autolock;mn.autoungrabifyNodes=mn.autoungrabify;var Ga={data:Ie.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ie.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ie.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ie.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ga.attr=Ga.data;Ga.removeAttr=Ga.removeData;var Ka=function(e){var r=this;e=he({},e);var n=e.container;n&&!rs(n)&&rs(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=ot!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=he({name:s?"grid":"null"},o.layout),o.renderer=he({name:s?"canvas":"null"},o.renderer);var u=function(h,g,p){return g!==void 0?g:p!==void 0?p:h},l=this._private={container:n,ready:!1,options:o,elements:new wt(this),listeners:[],aniEles:new wt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:ne(o.zoom)?o.zoom:1,pan:{x:Be(o.pan)&&ne(o.pan.x)?o.pan.x:0,y:Be(o.pan)&&ne(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(h,g){var p=h.some(fb);if(p)return la.all(h).then(g);g(h)};l.styleEnabled&&r.setStyle([]);var f=he({},o,o.renderer);r.initRenderer(f);var d=function(h,g,p){r.notifications(!1);var m=r.mutableElements();m.length>0&&m.remove(),h!=null&&(Be(h)||$e(h))&&r.add(h),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",g),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",p),r.emit("done")});var y=he({},r._private.options.layout);y.eles=r.elements(),r.layout(y).run()};c([o.style,o.elements],function(v){var h=v[0],g=v[1];l.styleEnabled&&r.style().append(h),d(g,function(){r.startAnimationLoop(),l.ready=!0,je(o.ready)&&r.on("ready",o.ready);for(var p=0;p<i.length;p++){var m=i[p];r.on("ready",m)}a&&(a.readies=[]),r.emit("ready")},o.done)})},ls=Ka.prototype;he(ls,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return ot;var r=this._private.container.ownerDocument;return r===void 0||r==null?ot:r.defaultView||ot},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!rs(e)&&rs(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(he({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return or(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(w){return r.getElementById(w.id())};if(Be(e)){if(r.startBatch(),e.elements){var s={},o=function(w,T){for(var E=[],x=[],C=0;C<w.length;C++){var S=w[C];if(!S.data.id){Oe("cy.json() cannot handle elements without an ID attribute");continue}var D=""+S.data.id,_=r.getElementById(D);s[D]=!0,_.length!==0?x.push({ele:_,json:S}):(T&&(S.group=T),E.push(S))}r.add(E);for(var k=0;k<x.length;k++){var A=x[k],B=A.ele,R=A.json;B.json(R)}};if($e(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];$e(f)&&o(f,c)}var d=r.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?d.merge(b):b.remove()}),d.forEach(function(b){return b.children().move({parent:null})}),d.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<v.length;h++){var g=v[h];e[g]!=null&&r[g](e[g])}return r.endBatch(),this}else{var p=!!e,m={};p?m.elements=this.elements().map(function(b){return b.json()}):(m.elements={},a.forEach(function(b){var w=b.group();m.elements[w]||(m.elements[w]=[]),m.elements[w].push(b.json())})),this._private.styleEnabled&&(m.style=r.style().json()),m.data=or(r.data());var y=n.options;return m.zoomingEnabled=n.zoomingEnabled,m.userZoomingEnabled=n.userZoomingEnabled,m.zoom=n.zoom,m.minZoom=n.minZoom,m.maxZoom=n.maxZoom,m.panningEnabled=n.panningEnabled,m.userPanningEnabled=n.userPanningEnabled,m.pan=or(n.pan),m.boxSelectionEnabled=n.boxSelectionEnabled,m.renderer=or(y.renderer),m.hideEdgesOnViewport=y.hideEdgesOnViewport,m.textureOnViewport=y.textureOnViewport,m.wheelSensitivity=y.wheelSensitivity,m.motionBlur=y.motionBlur,m.multiClickDebounceTime=y.multiClickDebounceTime,m}}});ls.$id=ls.getElementById;[uT,vT,kg,ul,Gi,pT,ll,Ki,yT,mn,Ga].forEach(function(t){he(ls,t)});var wT={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},xT={maximal:!1,acyclic:!1},kn=function(e){return e.scratch("breadthfirst")},cv=function(e,r){return e.scratch("breadthfirst",r)};function Bg(t){this.options=he({},wT,xT,t)}Bg.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(se){return se.isChildless()}),a=r,i=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,o=!!t.boundingBox,u=e.extent(),l=Ft(o?t.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(zt(t.roots))c=t.roots;else if($e(t.roots)){for(var f=[],d=0;d<t.roots.length;d++){var v=t.roots[d],h=e.getElementById(v);f.push(h)}c=e.collection(f)}else if(fe(t.roots))c=e.$(t.roots);else if(i)c=n.roots();else{var g=r.components();c=e.collection();for(var p=function(){var oe=g[m],de=oe.maxDegree(!1),pe=oe.filter(function(ve){return ve.degree(!1)===de});c=c.add(pe)},m=0;m<g.length;m++)p()}var y=[],b={},w=function(oe,de){y[de]==null&&(y[de]=[]);var pe=y[de].length;y[de].push(oe),cv(oe,{index:pe,depth:de})},T=function(oe,de){var pe=kn(oe),ve=pe.depth,ye=pe.index;y[ve][ye]=null,oe.isChildless()&&w(oe,de)};a.bfs({roots:c,directed:t.directed,visit:function(oe,de,pe,ve,ye){var xe=oe[0],De=xe.id();xe.isChildless()&&w(xe,ye),b[De]=!0}});for(var E=[],x=0;x<n.length;x++){var C=n[x];b[C.id()]||E.push(C)}var S=function(oe){for(var de=y[oe],pe=0;pe<de.length;pe++){var ve=de[pe];if(ve==null){de.splice(pe,1),pe--;continue}cv(ve,{depth:oe,index:pe})}},D=function(oe,de){for(var pe=kn(oe),ve=oe.incomers().filter(function(rt){return rt.isNode()&&r.has(rt)}),ye=-1,xe=oe.id(),De=0;De<ve.length;De++){var ze=ve[De],Qe=kn(ze);ye=Math.max(ye,Qe.depth)}if(pe.depth<=ye){if(!t.acyclic&&de[xe])return null;var Re=ye+1;return T(oe,Re),de[xe]=Re,!0}return!1};if(i&&s){var _=[],k={},A=function(oe){return _.push(oe)},B=function(){return _.shift()};for(n.forEach(function(se){return _.push(se)});_.length>0;){var R=B(),M=D(R,k);if(M)R.outgoers().filter(function(se){return se.isNode()&&r.has(se)}).forEach(A);else if(M===null){Oe("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var L=0;if(t.avoidOverlap)for(var I=0;I<n.length;I++){var N=n[I],$=N.layoutDimensions(t),O=$.w,F=$.h;L=Math.max(L,O,F)}var G={},X=function(oe){if(G[oe.id()])return G[oe.id()];for(var de=kn(oe).depth,pe=oe.neighborhood(),ve=0,ye=0,xe=0;xe<pe.length;xe++){var De=pe[xe];if(!(De.isEdge()||De.isParent()||!n.has(De))){var ze=kn(De);if(ze!=null){var Qe=ze.index,Re=ze.depth;if(!(Qe==null||Re==null)){var rt=y[Re].length;Re<de&&(ve+=Qe/rt,ye++)}}}}return ye=Math.max(1,ye),ve=ve/ye,ye===0&&(ve=0),G[oe.id()]=ve,ve},j=function(oe,de){var pe=X(oe),ve=X(de),ye=pe-ve;return ye===0?Lp(oe.id(),de.id()):ye};t.depthSort!==void 0&&(j=t.depthSort);for(var Y=y.length,ee=0;ee<Y;ee++)y[ee].sort(j),S(ee);for(var re=[],Z=0;Z<E.length;Z++)re.push(E[Z]);var V=function(){for(var oe=0;oe<Y;oe++)S(oe)};re.length&&(y.unshift(re),Y=y.length,V());for(var z=0,U=0;U<Y;U++)z=Math.max(y[U].length,z);var te={x:l.x1+l.w/2,y:l.y1+l.h/2},ae=n.reduce(function(se,oe){return function(de){return{w:se.w===-1?de.w:(se.w+de.w)/2,h:se.h===-1?de.h:(se.h+de.h)/2}}(oe.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),we=Math.max(Y===1?0:o?(l.h-t.padding*2-ae.h)/(Y-1):(l.h-t.padding*2-ae.h)/(Y+1),L),Ge=y.reduce(function(se,oe){return Math.max(se,oe.length)},0),Ve=function(oe){var de=kn(oe),pe=de.depth,ve=de.index;if(t.circle){var ye=Math.min(l.w/2/Y,l.h/2/Y);ye=Math.max(ye,L);var xe=ye*pe+ye-(Y>0&&y[0].length<=3?ye/2:0),De=2*Math.PI/y[pe].length*ve;return pe===0&&y[0].length===1&&(xe=1),{x:te.x+xe*Math.cos(De),y:te.y+xe*Math.sin(De)}}else{var ze=y[pe].length,Qe=Math.max(ze===1?0:o?(l.w-t.padding*2-ae.w)/((t.grid?Ge:ze)-1):(l.w-t.padding*2-ae.w)/((t.grid?Ge:ze)+1),L),Re={x:te.x+(ve+1-(ze+1)/2)*Qe,y:te.y+(pe+1-(Y+1)/2)*we};return Re}};return r.nodes().layoutPositions(this,t,Ve),this};var TT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Rg(t){this.options=he({},TT,t)}Rg.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=Ft(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var v=i[d],h=v.layoutDimensions(e),g=h.w,p=h.h;f=Math.max(f,g,p)}if(ne(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(s.h,s.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var m=Math.cos(l)-Math.cos(0),y=Math.sin(l)-Math.sin(0),b=Math.sqrt(f*f/(m*m+y*y));c=Math.max(b,c)}var w=function(E,x){var C=e.startAngle+x*l*(a?1:-1),S=c*Math.cos(C),D=c*Math.sin(C),_={x:o.x+S,y:o.y+D};return _};return n.nodes().layoutPositions(this,e,w),this};var ET={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Mg(t){this.options=he({},ET,t)}Mg.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=Ft(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),u.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var v=0;v<i.length;v++){var h=i[v],g=h.layoutDimensions(e);l=Math.max(l,g.w,g.h)}u.sort(function(ae,we){return we.value-ae.value});for(var p=e.levelWidth(i),m=[[]],y=m[0],b=0;b<u.length;b++){var w=u[b];if(y.length>0){var T=Math.abs(y[0].value-w.value);T>=p&&(y=[],m.push(y))}y.push(w)}var E=l+e.minNodeSpacing;if(!e.avoidOverlap){var x=m.length>0&&m[0].length>1,C=Math.min(s.w,s.h)/2-E,S=C/(m.length+x?1:0);E=Math.min(E,S)}for(var D=0,_=0;_<m.length;_++){var k=m[_],A=e.sweep===void 0?2*Math.PI-2*Math.PI/k.length:e.sweep,B=k.dTheta=A/Math.max(1,k.length-1);if(k.length>1&&e.avoidOverlap){var R=Math.cos(B)-Math.cos(0),M=Math.sin(B)-Math.sin(0),L=Math.sqrt(E*E/(R*R+M*M));D=Math.max(L,D)}k.r=D,D+=E}if(e.equidistant){for(var I=0,N=0,$=0;$<m.length;$++){var O=m[$],F=O.r-N;I=Math.max(I,F)}N=0;for(var G=0;G<m.length;G++){var X=m[G];G===0&&(N=X.r),X.r=N,N+=I}}for(var j={},Y=0;Y<m.length;Y++)for(var ee=m[Y],re=ee.dTheta,Z=ee.r,V=0;V<ee.length;V++){var z=ee[V],U=e.startAngle+(r?1:-1)*re*V,te={x:o.x+Z*Math.cos(U),y:o.y+Z*Math.sin(U)};j[z.node.id()]=te}return a.nodes().layoutPositions(this,e,function(ae){var we=ae.id();return j[we]}),this};var Cu,CT={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function $s(t){this.options=he({},CT,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}$s.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Cu=!0:Cu=!1;var n=ST(e,r,t);Cu&&_T(n),t.randomize&&DT(n);var a=Tr(),i=function(){AT(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(d){return!(r.stopped||d>=t.numIter||(kT(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var d=t.eles.nodes(),v=Ig(n,t,d);d.layoutPositions(r,t,v)}},u=0,l=!0;if(t.animate===!0){var c=function(){for(var d=0;l&&d<t.refresh;)l=s(u),u++,d++;if(!l)dv(n,t),o();else{var v=Tr();v-a>=t.animationThreshold&&i(),ns(c)}};c()}else{for(;l;)l=s(u),u++;dv(n,t),o()}return this};$s.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};$s.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ST=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=Ft(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],d=0;d<f.length;d++){var v=f[d];l[v.id()]=c}for(var c=0;c<o.nodeSize;c++){var h=i[c],g=h.layoutDimensions(n),p={};p.isLocked=h.locked(),p.id=h.data("id"),p.parentId=h.data("parent"),p.cmptId=l[h.id()],p.children=[],p.positionX=h.position("x"),p.positionY=h.position("y"),p.offsetX=0,p.offsetY=0,p.height=g.w,p.width=g.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(h.style("padding")),p.padRight=parseFloat(h.style("padding")),p.padTop=parseFloat(h.style("padding")),p.padBottom=parseFloat(h.style("padding")),p.nodeRepulsion=je(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,o.layoutNodes.push(p),o.idToIndex[p.id]=c}for(var m=[],y=0,b=-1,w=[],c=0;c<o.nodeSize;c++){var h=o.layoutNodes[c],T=h.parentId;T!=null?o.layoutNodes[o.idToIndex[T]].children.push(h.id):(m[++b]=h.id,w.push(h.id))}for(o.graphSet.push(w);y<=b;){var E=m[y++],x=o.idToIndex[E],v=o.layoutNodes[x],C=v.children;if(C.length>0){o.graphSet.push(C);for(var c=0;c<C.length;c++)m[++b]=C[c]}}for(var c=0;c<o.graphSet.length;c++)for(var S=o.graphSet[c],d=0;d<S.length;d++){var D=o.idToIndex[S[d]];o.indexToGraph[D]=c}for(var c=0;c<o.edgeSize;c++){var _=a[c],k={};k.id=_.data("id"),k.sourceId=_.data("source"),k.targetId=_.data("target");var A=je(n.idealEdgeLength)?n.idealEdgeLength(_):n.idealEdgeLength,B=je(n.edgeElasticity)?n.edgeElasticity(_):n.edgeElasticity,R=o.idToIndex[k.sourceId],M=o.idToIndex[k.targetId],L=o.indexToGraph[R],I=o.indexToGraph[M];if(L!=I){for(var N=PT(k.sourceId,k.targetId,o),$=o.graphSet[N],O=0,p=o.layoutNodes[R];$.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],O++;for(p=o.layoutNodes[M];$.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],O++;A*=O*n.nestingFactor}k.idealLength=A,k.elasticity=B,o.layoutEdges.push(k)}return o},PT=function(e,r,n){var a=Lg(e,r,0,n);return 2>a.count?0:a.graph},Lg=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var u=i[o],l=a.idToIndex[u],c=a.layoutNodes[l].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=Lg(e,r,f,a);if(d.count!==0)if(d.count===1){if(s++,s===2)break}else return d}}return{count:s,graph:n}},_T,DT=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},Ig=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var l=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},AT=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=Ig(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},kT=function(e,r,n){BT(e,r),LT(e),IT(e,r),OT(e),VT(e)},BT=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];RT(o,l,e,r)}},fv=function(e){return-1+2*e*Math.random()},RT=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;o===0&&u===0&&(o=fv(l),u=fv(l));var c=MT(e,r,o,u);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(o*o+u*u),v=f*o/d,h=f*u/d;else var g=cs(e,o,u),p=cs(r,-1*o,-1*u),m=p.x-g.x,y=p.y-g.y,b=m*m+y*y,d=Math.sqrt(b),f=(e.nodeRepulsion+r.nodeRepulsion)/b,v=f*m/d,h=f*y/d;e.isLocked||(e.offsetX-=v,e.offsetY-=h),r.isLocked||(r.offsetX+=v,r.offsetY+=h)}},MT=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},cs=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,u=n/r,l=s/o,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+s/2,c):0<r&&-1*l<=u&&u<=l?(c.x=a+o/2,c.y=i+o*n/2/r,c):0>r&&-1*l<=u&&u<=l?(c.x=a-o/2,c.y=i-o*n/2/r,c):0<n&&(u<=-1*l||u>=l)?(c.x=a+s*r/2/n,c.y=i+s/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=a-s*r/2/n,c.y=i-s/2),c)},LT=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,c=u.positionY-s.positionY;if(!(l===0&&c===0)){var f=cs(s,l,c),d=cs(u,-1*l,-1*c),v=d.x-f.x,h=d.y-f.y,g=Math.sqrt(v*v+h*h),p=Math.pow(a.idealLength-g,2)/a.elasticity;if(g!==0)var m=p*v/g,y=p*h/g;else var m=0,y=0;s.isLocked||(s.offsetX+=m,s.offsetY+=y),u.isLocked||(u.offsetX-=m,u.offsetY-=y)}}},IT=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],o=c.positionX,u=c.positionY;for(var f=0;f<s;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var v=o-d.positionX,h=u-d.positionY,g=Math.sqrt(v*v+h*h);if(g>n){var p=r.gravity*v/g,m=r.gravity*h/g;d.offsetX+=p,d.offsetY+=m}}}}},OT=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,d=0;d<l.length;d++){var v=e.layoutNodes[e.idToIndex[l[d]]];v.offsetX+=c,v.offsetY+=f,n[++i]=l[d]}u.offsetX=0,u.offsetY=0}}},VT=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=FT(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,Og(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},FT=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},Og=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return Og(a,r)}},dv=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,u=a[o]=a[o]||[];u.push(s)}for(var l=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}a.sort(function(y,b){return b.w*b.h-y.w*y.h});for(var v=0,h=0,g=0,p=0,m=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=v-c.x1,d.positionY+=h-c.y1)}v+=c.w+r.componentSpacing,g+=c.w+r.componentSpacing,p=Math.max(p,c.h),g>m&&(h+=p+r.componentSpacing,v=0,g=0,p=0)}}},NT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Vg(t){this.options=he({},NT,t)}Vg.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Ft(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(G){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),u=Math.round(o),l=Math.round(i.w/i.h*o),c=function(X){if(X==null)return Math.min(u,l);var j=Math.min(u,l);j==u?u=X:l=X},f=function(X){if(X==null)return Math.max(u,l);var j=Math.max(u,l);j==u?u=X:l=X},d=e.rows,v=e.cols!=null?e.cols:e.columns;if(d!=null&&v!=null)u=d,l=v;else if(d!=null&&v==null)u=d,l=Math.ceil(s/u);else if(d==null&&v!=null)l=v,u=Math.ceil(s/l);else if(l*u>s){var h=c(),g=f();(h-1)*g>=s?c(h-1):(g-1)*h>=s&&f(g-1)}else for(;l*u<s;){var p=c(),m=f();(m+1)*p>=s?f(m+1):c(p+1)}var y=i.w/l,b=i.h/u;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var w=0;w<a.length;w++){var T=a[w],E=T._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var x=T.layoutDimensions(e),C=e.avoidOverlapPadding,S=x.w+C,D=x.h+C;y=Math.max(y,S),b=Math.max(b,D)}for(var _={},k=function(X,j){return!!_["c-"+X+"-"+j]},A=function(X,j){_["c-"+X+"-"+j]=!0},B=0,R=0,M=function(){R++,R>=l&&(R=0,B++)},L={},I=0;I<a.length;I++){var N=a[I],$=e.position(N);if($&&($.row!==void 0||$.col!==void 0)){var O={row:$.row,col:$.col};if(O.col===void 0)for(O.col=0;k(O.row,O.col);)O.col++;else if(O.row===void 0)for(O.row=0;k(O.row,O.col);)O.row++;L[N.id()]=O,A(O.row,O.col)}}var F=function(X,j){var Y,ee;if(X.locked()||X.isParent())return!1;var re=L[X.id()];if(re)Y=re.col*y+y/2+i.x1,ee=re.row*b+b/2+i.y1;else{for(;k(B,R);)M();Y=R*y+y/2+i.x1,ee=B*b+b/2+i.y1,A(B,R),M()}return{x:Y,y:ee}};a.layoutPositions(this,e,F)}return this};var zT={ready:function(){},stop:function(){}};function fc(t){this.options=he({},zT,t)}fc.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};fc.prototype.stop=function(){return this};var qT={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Fg(t){this.options=he({},qT,t)}Fg.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=je(t.positions);function a(i){if(t.positions==null)return l1(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s??null}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var $T={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Ng(t){this.options=he({},$T,t)}Ng.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Ft(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var UT=[{name:"breadthfirst",impl:Bg},{name:"circle",impl:Rg},{name:"concentric",impl:Mg},{name:"cose",impl:$s},{name:"grid",impl:Vg},{name:"null",impl:fc},{name:"preset",impl:Fg},{name:"random",impl:Ng}];function zg(t){this.options=t,this.notifications=0}var vv=function(){},hv=function(){throw new Error("A headless instance can not render images")};zg.prototype={recalculateRenderedStyle:vv,notify:function(){this.notifications++},init:vv,isHeadless:function(){return!0},png:hv,jpg:hv};var dc={};dc.arrowShapeWidth=.3;dc.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,c,f,d,v,h,g){var p=v.x-f/2-g,m=v.x+f/2+g,y=v.y-f/2-g,b=v.y+f/2+g,w=p<=l&&l<=m&&y<=c&&c<=b;return w},n=function(l,c,f,d,v){var h=l*Math.cos(d)-c*Math.sin(d),g=l*Math.sin(d)+c*Math.cos(d),p=h*f,m=g*f,y=p+v.x,b=m+v.y;return{x:y,y:b}},a=function(l,c,f,d){for(var v=[],h=0;h<l.length;h+=2){var g=l[h],p=l[h+1];v.push(n(g,p,c,f,d))}return v},i=function(l){for(var c=[],f=0;f<l.length;f++){var d=l[f];c.push(d.x,d.y)}return c},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,c){fe(c)&&(c=t[c]),t[l]=he({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,v,h,g,p,m){var y=i(a(this.points,h+2*m,g,p)),b=It(d,v,y);return b},roughCollide:r,draw:function(d,v,h,g){var p=a(this.points,v,h,g);e.arrowShapeImpl("polygon")(d,p)},spacing:function(d){return 0},gap:s},c)};o("none",{collide:as,roughCollide:as,draw:jl,spacing:kf,gap:kf}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,c,f,d,v){var h=a(this.points,c,f,d),g=this.controlPoint,p=n(g[0],g[1],c,f,d);e.arrowShapeImpl(this.name)(l,h,p)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,d,v,h,g){var p=i(a(this.points,f+2*g,d,v)),m=i(a(this.pointsTee,f+2*g,d,v)),y=It(l,c,p)||It(l,c,m);return y},draw:function(l,c,f,d,v){var h=a(this.points,c,f,d),g=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(l,h,g)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,d,v,h,g){var p=v,m=Math.pow(p.x-l,2)+Math.pow(p.y-c,2)<=Math.pow((f+2*g)*this.radius,2),y=i(a(this.points,f+2*g,d,v));return It(l,c,y)||m},draw:function(l,c,f,d,v){var h=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(l,h,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),d=c/l,v=3,h=5;return f[v]=f[v]-d,f[h]=f[h]-d,f},collide:function(l,c,f,d,v,h,g){var p=i(a(this.points,f+2*g,d,v)),m=i(a(this.crossLinePts(f,h),f+2*g,d,v)),y=It(l,c,p)||It(l,c,m);return y},draw:function(l,c,f,d,v){var h=a(this.points,c,f,d),g=a(this.crossLinePts(c,v),c,f,d);e.arrowShapeImpl(this.name)(l,h,g)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,c,f,d,v,h,g){var p=v,m=Math.pow(p.x-l,2)+Math.pow(p.y-c,2)<=Math.pow((f+2*g)*this.radius,2);return m},draw:function(l,c,f,d,v){e.arrowShapeImpl(this.name)(l,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Tn={};Tn.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),u=r.zoom(),l=((t-a)/s-o.x)/u,c=((e-i)/s-o.y)/u;return[l,c]};Tn.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(m){return parseFloat(r.getPropertyValue(m))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,u=a.left+a.right,l=a.top+a.bottom,c=i.left+i.right,f=e.width/(s+c),d=s-u,v=o-l,h=e.left+a.left+i.left,g=e.top+a.top+i.top;return this.containerBB=[h,g,d,v,f]};Tn.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Tn.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Tn.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,d=(n?8:2)/u,v=1/0,h,g;r&&(s=s.interactive);function p(x,C){if(x.isNode()){if(g)return;g=x,o.push(x)}if(x.isEdge()&&(C==null||C<v))if(h){if(h.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var S=0;S<o.length;S++)if(o[S].isEdge()){o[S]=x,h=x,v=C??v;break}}}else o.push(x),h=x,v=C??v}function m(x){var C=x.outerWidth()+2*f,S=x.outerHeight()+2*f,D=C/2,_=S/2,k=x.position(),A=x.pstyle("corner-radius").value==="auto"?"auto":x.pstyle("corner-radius").pfValue,B=x._private.rscratch;if(k.x-D<=t&&t<=k.x+D&&k.y-_<=e&&e<=k.y+_){var R=i.nodeShapes[a.getNodeShape(x)];if(R.checkPoint(t,e,0,C,S,k.x,k.y,A,B))return p(x,0),!0}}function y(x){var C=x._private,S=C.rscratch,D=x.pstyle("width").pfValue,_=x.pstyle("arrow-scale").value,k=D/2+c,A=k*k,B=k*2,I=C.source,N=C.target,R;if(S.edgeType==="segments"||S.edgeType==="straight"||S.edgeType==="haystack"){for(var M=S.allpts,L=0;L+3<M.length;L+=2)if(E1(t,e,M[L],M[L+1],M[L+2],M[L+3],B)&&A>(R=D1(t,e,M[L],M[L+1],M[L+2],M[L+3])))return p(x,R),!0}else if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"){for(var M=S.allpts,L=0;L+5<S.allpts.length;L+=4)if(C1(t,e,M[L],M[L+1],M[L+2],M[L+3],M[L+4],M[L+5],B)&&A>(R=_1(t,e,M[L],M[L+1],M[L+2],M[L+3],M[L+4],M[L+5])))return p(x,R),!0}for(var I=I||C.source,N=N||C.target,$=a.getArrowWidth(D,_),O=[{name:"source",x:S.arrowStartX,y:S.arrowStartY,angle:S.srcArrowAngle},{name:"target",x:S.arrowEndX,y:S.arrowEndY,angle:S.tgtArrowAngle},{name:"mid-source",x:S.midX,y:S.midY,angle:S.midsrcArrowAngle},{name:"mid-target",x:S.midX,y:S.midY,angle:S.midtgtArrowAngle}],L=0;L<O.length;L++){var F=O[L],G=i.arrowShapes[x.pstyle(F.name+"-arrow-shape").value],X=x.pstyle("width").pfValue;if(G.roughCollide(t,e,$,F.angle,{x:F.x,y:F.y},X,c)&&G.collide(t,e,$,F.angle,{x:F.x,y:F.y},X,c))return p(x),!0}l&&o.length>0&&(m(I),m(N))}function b(x,C,S){return Lt(x,C,S)}function w(x,C){var S=x._private,D=d,_;C?_=C+"-":_="",x.boundingBox();var k=S.labelBounds[C||"main"],A=x.pstyle(_+"label").value,B=x.pstyle("text-events").strValue==="yes";if(!(!B||!A)){var R=b(S.rscratch,"labelX",C),M=b(S.rscratch,"labelY",C),L=b(S.rscratch,"labelAngle",C),I=x.pstyle(_+"text-margin-x").pfValue,N=x.pstyle(_+"text-margin-y").pfValue,$=k.x1-D-I,O=k.x2+D-I,F=k.y1-D-N,G=k.y2+D-N;if(L){var X=Math.cos(L),j=Math.sin(L),Y=function(te,ae){return te=te-R,ae=ae-M,{x:te*X-ae*j+R,y:te*j+ae*X+M}},ee=Y($,F),re=Y($,G),Z=Y(O,F),V=Y(O,G),z=[ee.x+I,ee.y+N,Z.x+I,Z.y+N,V.x+I,V.y+N,re.x+I,re.y+N];if(It(t,e,z))return p(x),!0}else if(ea(k,t,e))return p(x),!0}}for(var T=s.length-1;T>=0;T--){var E=s[T];E.isNode()?m(E)||w(E):y(E)||w(E)||w(E,"source")||w(E,"target")}return o};Tn.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],u=Math.min(t,r),l=Math.max(t,r),c=Math.min(e,n),f=Math.max(e,n);t=u,r=l,e=c,n=f;var d=Ft({x1:t,y1:e,x2:r,y2:n});function v(A,B,R){return Lt(A,B,R)}function h(A,B){var R=A._private,M=s,L="";A.boundingBox();var I=R.labelBounds.main,N=v(R.rscratch,"labelX",B),$=v(R.rscratch,"labelY",B),O=v(R.rscratch,"labelAngle",B),F=A.pstyle(L+"text-margin-x").pfValue,G=A.pstyle(L+"text-margin-y").pfValue,X=I.x1-M-F,j=I.x2+M-F,Y=I.y1-M-G,ee=I.y2+M-G;if(O){var re=Math.cos(O),Z=Math.sin(O),V=function(U,te){return U=U-N,te=te-$,{x:U*re-te*Z+N,y:U*Z+te*re+$}};return[V(X,Y),V(j,Y),V(j,ee),V(X,ee)]}else return[{x:X,y:Y},{x:j,y:Y},{x:j,y:ee},{x:X,y:ee}]}for(var g=0;g<a.length;g++){var p=a[g];if(p.isNode()){var m=p,y=m.pstyle("text-events").strValue==="yes",b=m.pstyle("box-select-labels").strValue==="yes",w=m.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:b&&y});if(tc(d,w)){var T=h(m),E=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}];M1(T,E)&&o.push(m)}}else{var x=p,C=x._private,S=C.rscratch;if(S.startX!=null&&S.startY!=null&&!ea(d,S.startX,S.startY)||S.endX!=null&&S.endY!=null&&!ea(d,S.endX,S.endY))continue;if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"||S.edgeType==="segments"||S.edgeType==="haystack"){for(var D=C.rstyle.bezierPts||C.rstyle.linePts||C.rstyle.haystackPts,_=!0,k=0;k<D.length;k++)if(!x1(d,D[k])){_=!1;break}_&&o.push(x)}else(S.edgeType==="haystack"||S.edgeType==="straight")&&o.push(x)}}return o};var fs={};fs.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,c,f,d,v,m,y;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],v=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,v=e.arrowEndY),m=e.midX,y=e.midY,i)u=c-e.segpts[0],l=f-e.segpts[1];else if(a||s||o||n){var h=e.allpts,g=vt(h[0],h[2],h[4],.1),p=vt(h[1],h[3],h[5],.1);u=c-g,l=f-p}else u=c-m,l=f-y;e.srcArrowAngle=Ei(u,l);var m=e.midX,y=e.midY;if(r&&(m=(c+d)/2,y=(f+v)/2),u=d-c,l=v-f,i){var h=e.allpts;if(h.length/2%2===0){var b=h.length/2,w=b-2;u=h[b]-h[w],l=h[b+1]-h[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=h.length/2-1,w=b-2;u=h[b]-h[w],l=h[b+1]-h[w+1]}}else if(a||s||o){var h=e.allpts,T=e.ctrlpts,E,x,C,S;if(T.length/2%2===0){var D=h.length/2-1,_=D+2,k=_+2;E=vt(h[D],h[_],h[k],0),x=vt(h[D+1],h[_+1],h[k+1],0),C=vt(h[D],h[_],h[k],1e-4),S=vt(h[D+1],h[_+1],h[k+1],1e-4)}else{var _=h.length/2-1,D=_-2,k=_+2;E=vt(h[D],h[_],h[k],.4999),x=vt(h[D+1],h[_+1],h[k+1],.4999),C=vt(h[D],h[_],h[k],.5),S=vt(h[D+1],h[_+1],h[k+1],.5)}u=C-E,l=S-x}if(e.midtgtArrowAngle=Ei(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var b=h.length/2-1,A=b+2;u=-(h[A]-h[b]),l=-(h[A+1]-h[b+1])}}}if(e.midsrcArrowAngle=Ei(u,l),i)u=d-e.segpts[e.segpts.length-2],l=v-e.segpts[e.segpts.length-1];else if(a||s||o||n){var h=e.allpts,B=h.length,g=vt(h[B-6],h[B-4],h[B-2],.9),p=vt(h[B-5],h[B-3],h[B-1],.9);u=d-g,l=v-p}else u=d-m,l=v-y;e.tgtArrowAngle=Ei(u,l)};fs.getArrowWidth=fs.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var cl,fl,ir={},Ut={},pv,gv,cn,Yi,hr,Qr,nn,nr,Bn,Bi,qg,$g,dl,vl,mv,yv=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},HT=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},WT=function(e,r,n,a,i){if(e!==mv?yv(r,e,ir):HT(Ut,ir),yv(r,n,Ut),pv=ir.nx*Ut.ny-ir.ny*Ut.nx,gv=ir.nx*Ut.nx-ir.ny*-Ut.ny,hr=Math.asin(Math.max(-1,Math.min(1,pv))),Math.abs(hr)<1e-6){cl=r.x,fl=r.y,nn=Bn=0;return}cn=1,Yi=!1,gv<0?hr<0?hr=Math.PI+hr:(hr=Math.PI-hr,cn=-1,Yi=!0):hr>0&&(cn=-1,Yi=!0),r.radius!==void 0?Bn=r.radius:Bn=a,Qr=hr/2,Bi=Math.min(ir.len/2,Ut.len/2),i?(nr=Math.abs(Math.cos(Qr)*Bn/Math.sin(Qr)),nr>Bi?(nr=Bi,nn=Math.abs(nr*Math.sin(Qr)/Math.cos(Qr))):nn=Bn):(nr=Math.min(Bi,Bn),nn=Math.abs(nr*Math.sin(Qr)/Math.cos(Qr))),dl=r.x+Ut.nx*nr,vl=r.y+Ut.ny*nr,cl=dl-Ut.ny*nn*cn,fl=vl+Ut.nx*nn*cn,qg=r.x+ir.nx*nr,$g=r.y+ir.ny*nr,mv=r};function Ug(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function vc(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(WT(t,e,r,n,a),{cx:cl,cy:fl,radius:nn,startX:qg,startY:$g,stopX:dl,stopY:vl,startAngle:ir.ang+Math.PI/2*cn,endAngle:Ut.ang-Math.PI/2*cn,counterClockwise:Yi})}var Ya=.01,GT=Math.sqrt(2*Ya),_t={};_t.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(T,E,x,C){var S=C-E,D=x-T,_=Math.sqrt(D*D+S*S);return{x:-S/_,y:D/_}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(t.source()[0],s),d=ut(f,2),v=d[0],h=d[1],g=this.manualEndptToPx(t.target()[0],o),p=ut(g,2),m=p[0],y=p[1],b={x1:v,y1:h,x2:m,y2:y};a=l(v,h,m,y),i=b}else Oe("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};_t.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),c=s.width(),f=o.width(),d=s.height(),v=o.height(),h=r.pstyle("haystack-radius").value,g=h/2;a.haystackPts=a.allpts=[a.source.x*c*g+u.x,a.source.y*d*g+u.y,a.target.x*f*g+l.x,a.target.y*v*g+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};_t.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<o;c++){var f=n.pfValue[c],d=a.pfValue[c],v=1-f,h=f,g=this.findMidptPtsEtc(t,e),p=g.midptPts,m=g.vectorNormInverse,y={x:p.x1*v+p.x2*h,y:p.y1*v+p.y2*h};r.segpts.push(y.x+m.x*d,y.y+m.y*d),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),r.isArcRadius.push((s.pfValue[c]!==void 0?s.pfValue[c]:l)==="arc-radius")}};_t.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=r,v=f;n&&(d=0,v=u);var h=l-Math.PI/2,g=h-c/2,p=h+c/2,m=l+"_"+c;d=i[m]===void 0?i[m]=0:++i[m],a.ctrlpts=[s.x+Math.cos(g)*1.4*v*(d/3+1),s.y+Math.sin(g)*1.4*v*(d/3+1),s.x+Math.cos(p)*1.4*v*(d/3+1),s.y+Math.sin(p)*1.4*v*(d/3+1)]};_t.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),v=d?d.pfValue[0]:void 0,h=r,g=f;n&&(h=0,g=v);var p=50,m={x:i.x-o/2,y:i.y-u/2},y={x:s.x-l/2,y:s.y-c/2},b={x:Math.min(m.x,y.x),y:Math.min(m.y,y.y)},w=.5,T=Math.max(w,Math.log(o*Ya)),E=Math.max(w,Math.log(l*Ya));a.ctrlpts=[b.x,b.y-(1+Math.pow(p,1.12)/100)*g*(h/3+1)*T,b.x-(1+Math.pow(p,1.12)/100)*g*(h/3+1)*E,b.y]};_t.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};_t.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,c=o?o.pfValue[0]:void 0,f=u.value[0],d=n;i.edgeType=d?"multibezier":"bezier",i.ctrlpts=[];for(var v=0;v<l;v++){var h=(.5-e.eles.length/2+r)*s*(a?-1:1),g=void 0,p=ec(h);d&&(c=o?o.pfValue[v]:s,f=u.value[v]),n?g=c:g=c!==void 0?p*c:void 0;var m=g!==void 0?g:h,y=1-f,b=f,w=this.findMidptPtsEtc(t,e),T=w.midptPts,E=w.vectorNormInverse,x={x:T.x1*y+T.x2*b,y:T.y1*y+T.y2*b};i.ctrlpts.push(x.x+E.x*m,x.y+E.y*m)}};_t.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,d=e.srcH,v=e.tgtW,h=e.tgtH,g=t.pstyle("edge-distances").value,p=g!=="node-position",m=t.pstyle("taxi-direction").value,y=m,b=t.pstyle("taxi-turn"),w=b.units==="%",T=b.pfValue,E=T<0,x=t.pstyle("taxi-turn-min-distance").pfValue,C=p?(f+v)/2:0,S=p?(d+h)/2:0,D=c.x2-c.x1,_=c.y2-c.y1,k=function(P,q){return P>0?Math.max(P-q,0):Math.min(P+q,0)},A=k(D,C),B=k(_,S),R=!1;y===l?m=Math.abs(A)>Math.abs(B)?a:n:y===u||y===o?(m=n,R=!0):(y===i||y===s)&&(m=a,R=!0);var M=m===n,L=M?B:A,I=M?_:D,N=ec(I),$=!1;!(R&&(w||E))&&(y===o&&I<0||y===u&&I>0||y===i&&I>0||y===s&&I<0)&&(N*=-1,L=N*Math.abs(L),$=!0);var O;if(w){var F=T<0?1+T:T;O=F*L}else{var G=T<0?L:0;O=G+T*N}var X=function(P){return Math.abs(P)<x||Math.abs(P)>=Math.abs(L)},j=X(O),Y=X(Math.abs(L)-Math.abs(O)),ee=j||Y;if(ee&&!$)if(M){var re=Math.abs(I)<=d/2,Z=Math.abs(D)<=v/2;if(re){var V=(c.x1+c.x2)/2,z=c.y1,U=c.y2;r.segpts=[V,z,V,U]}else if(Z){var te=(c.y1+c.y2)/2,ae=c.x1,we=c.x2;r.segpts=[ae,te,we,te]}else r.segpts=[c.x1,c.y2]}else{var Ge=Math.abs(I)<=f/2,Ve=Math.abs(_)<=h/2;if(Ge){var se=(c.y1+c.y2)/2,oe=c.x1,de=c.x2;r.segpts=[oe,se,de,se]}else if(Ve){var pe=(c.x1+c.x2)/2,ve=c.y1,ye=c.y2;r.segpts=[pe,ve,pe,ye]}else r.segpts=[c.x2,c.y1]}else if(M){var xe=c.y1+O+(p?d/2*N:0),De=c.x1,ze=c.x2;r.segpts=[De,xe,ze,xe]}else{var Qe=c.x1+O+(p?f/2*N:0),Re=c.y1,rt=c.y2;r.segpts=[Qe,Re,Qe,rt]}if(r.isRound){var Ae=t.pstyle("taxi-radius").value,le=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Ae),r.isArcRadius=new Array(r.segpts.length/2).fill(le)}};_t.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,v=e.srcRs,h=e.tgtRs,g=!ne(r.startX)||!ne(r.startY),p=!ne(r.arrowStartX)||!ne(r.arrowStartY),m=!ne(r.endX)||!ne(r.endY),y=!ne(r.arrowEndX)||!ne(r.arrowEndY),b=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,T=b*w,E=pn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),x=E<T,C=pn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),S=C<T,D=!1;if(g||p||x){D=!0;var _={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},k=Math.sqrt(_.x*_.x+_.y*_.y),A={x:_.x/k,y:_.y/k},B=Math.max(i,s),R={x:r.ctrlpts[0]+A.x*2*B,y:r.ctrlpts[1]+A.y*2*B},M=l.intersectLine(n.x,n.y,i,s,R.x,R.y,0,f,v);x?(r.ctrlpts[0]=r.ctrlpts[0]+A.x*(T-E),r.ctrlpts[1]=r.ctrlpts[1]+A.y*(T-E)):(r.ctrlpts[0]=M[0]+A.x*T,r.ctrlpts[1]=M[1]+A.y*T)}if(m||y||S){D=!0;var L={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},I=Math.sqrt(L.x*L.x+L.y*L.y),N={x:L.x/I,y:L.y/I},$=Math.max(i,s),O={x:r.ctrlpts[0]+N.x*2*$,y:r.ctrlpts[1]+N.y*2*$},F=c.intersectLine(a.x,a.y,o,u,O.x,O.y,0,d,h);S?(r.ctrlpts[0]=r.ctrlpts[0]+N.x*(T-C),r.ctrlpts[1]=r.ctrlpts[1]+N.y*(T-C)):(r.ctrlpts[0]=F[0]+N.x*T,r.ctrlpts[1]=F[1]+N.y*T)}D&&this.findEndpoints(t)}};_t.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=vt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=vt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(vc({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2];if(d.radius===0){var v={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-v.y,v.x-f.x]}else{var h=[f.x-d.cx,f.y-d.cy],g=d.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(p){return p*g}),e.midX=d.cx+h[0],e.midY=d.cy+h[1],e.midVector=h}}}}};_t.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ne(e.startX)&&ne(e.startY)&&ne(e.endX)&&ne(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Oe("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};_t.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new gr,s=function(S,D){return[].concat(ts(S),[D?1:0]).join("-")},o=[],u=[],l=0;l<t.length;l++){var c=t[l],f=c._private,d=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(d==="haystack"){u.push(c);continue}var v=d==="unbundled-bezier"||d.endsWith("segments")||d==="straight"||d==="straight-triangle"||d.endsWith("taxi"),h=d==="unbundled-bezier"||d==="bezier",g=f.source,p=f.target,m=g.poolIndex(),y=p.poolIndex(),b=[m,y].sort(),w=s(b,v),T=i.get(w);T==null&&(T={eles:[]},o.push({pairId:b,edgeIsUnbundled:v}),i.set(w,T)),T.eles.push(c),v&&(T.hasUnbundled=!0),h&&(T.hasBezier=!0)}}for(var E=function(){var S=o[x],D=S.pairId,_=S.edgeIsUnbundled,k=s(D,_),A=i.get(k),B;if(!A.hasUnbundled){var R=A.eles[0].parallelEdges().filter(function(le){return le.isBundledBezier()});Ql(A.eles),R.forEach(function(le){return A.eles.push(le)}),A.eles.sort(function(le,Q){return le.poolIndex()-Q.poolIndex()})}var M=A.eles[0],L=M.source(),I=M.target();if(L.poolIndex()>I.poolIndex()){var N=L;L=I,I=N}var $=A.srcPos=L.position(),O=A.tgtPos=I.position(),F=A.srcW=L.outerWidth(),G=A.srcH=L.outerHeight(),X=A.tgtW=I.outerWidth(),j=A.tgtH=I.outerHeight(),Y=A.srcShape=r.nodeShapes[e.getNodeShape(L)],ee=A.tgtShape=r.nodeShapes[e.getNodeShape(I)],re=A.srcCornerRadius=L.pstyle("corner-radius").value==="auto"?"auto":L.pstyle("corner-radius").pfValue,Z=A.tgtCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,V=A.tgtRs=I._private.rscratch,z=A.srcRs=L._private.rscratch;A.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var U=0;U<A.eles.length;U++){var te=A.eles[U],ae=te[0]._private.rscratch,we=te.pstyle("curve-style").value,Ge=we==="unbundled-bezier"||we.endsWith("segments")||we.endsWith("taxi"),Ve=!L.same(te.source());if(!A.calculatedIntersection&&L!==I&&(A.hasBezier||A.hasUnbundled)){A.calculatedIntersection=!0;var se=Y.intersectLine($.x,$.y,F,G,O.x,O.y,0,re,z),oe=A.srcIntn=se,de=ee.intersectLine(O.x,O.y,X,j,$.x,$.y,0,Z,V),pe=A.tgtIntn=de,ve=A.intersectionPts={x1:se[0],x2:de[0],y1:se[1],y2:de[1]},ye=A.posPts={x1:$.x,x2:O.x,y1:$.y,y2:O.y},xe=de[1]-se[1],De=de[0]-se[0],ze=Math.sqrt(De*De+xe*xe);ne(ze)&&ze>=GT||(ze=Math.sqrt(Math.max(De*De,Ya)+Math.max(xe*xe,Ya)));var Qe=A.vector={x:De,y:xe},Re=A.vectorNorm={x:Qe.x/ze,y:Qe.y/ze},rt={x:-Re.y,y:Re.x};A.nodesOverlap=!ne(ze)||ee.checkPoint(se[0],se[1],0,X,j,O.x,O.y,Z,V)||Y.checkPoint(de[0],de[1],0,F,G,$.x,$.y,re,z),A.vectorNormInverse=rt,B={nodesOverlap:A.nodesOverlap,dirCounts:A.dirCounts,calculatedIntersection:!0,hasBezier:A.hasBezier,hasUnbundled:A.hasUnbundled,eles:A.eles,srcPos:O,srcRs:V,tgtPos:$,tgtRs:z,srcW:X,srcH:j,tgtW:F,tgtH:G,srcIntn:pe,tgtIntn:oe,srcShape:ee,tgtShape:Y,posPts:{x1:ye.x2,y1:ye.y2,x2:ye.x1,y2:ye.y1},intersectionPts:{x1:ve.x2,y1:ve.y2,x2:ve.x1,y2:ve.y1},vector:{x:-Qe.x,y:-Qe.y},vectorNorm:{x:-Re.x,y:-Re.y},vectorNormInverse:{x:-rt.x,y:-rt.y}}}var Ae=Ve?B:A;ae.nodesOverlap=Ae.nodesOverlap,ae.srcIntn=Ae.srcIntn,ae.tgtIntn=Ae.tgtIntn,ae.isRound=we.startsWith("round"),a&&(L.isParent()||L.isChild()||I.isParent()||I.isChild())&&(L.parents().anySame(I)||I.parents().anySame(L)||L.same(I)&&L.isParent())?e.findCompoundLoopPoints(te,Ae,U,Ge):L===I?e.findLoopPoints(te,Ae,U,Ge):we.endsWith("segments")?e.findSegmentsPoints(te,Ae):we.endsWith("taxi")?e.findTaxiPoints(te,Ae):we==="straight"||!Ge&&A.eles.length%2===1&&U===Math.floor(A.eles.length/2)?e.findStraightEdgePoints(te):e.findBezierPoints(te,Ae,U,Ge,Ve),e.findEndpoints(te),e.tryToCorrectInvalidPoints(te,Ae),e.checkForInvalidEdgeWarning(te),e.storeAllpts(te),e.storeEdgeProjections(te),e.calculateArrowAngles(te),e.recalculateEdgeLabelProjections(te),e.calculateLabelAngles(te)}},x=0;x<o.length;x++)E();this.findHaystackPoints(u)}};function Hg(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}_t.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return Hg(e.segpts)};_t.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return Hg(e.ctrlpts)};_t.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var ci={};ci.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};ci.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),s=a.position(),o=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,d=a._private.rscratch,v=t.pstyle("curve-style").value,h=t._private.rscratch,g=h.edgeType,p=v==="taxi",m=g==="self"||g==="compound",y=g==="bezier"||g==="multibezier"||m,b=g!=="bezier",w=g==="straight"||g==="segments",T=g==="segments",E=y||b||w,x=m||p,C=t.pstyle("source-endpoint"),S=x?"outside-to-node":C.value,D=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,_=t.pstyle("target-endpoint"),k=x?"outside-to-node":_.value,A=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;h.srcManEndpt=C,h.tgtManEndpt=_;var B,R,M,L;if(y){var I=[h.ctrlpts[0],h.ctrlpts[1]],N=b?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:I;B=N,R=I}else if(w){var $=T?h.segpts.slice(0,2):[s.x,s.y],O=T?h.segpts.slice(h.segpts.length-2):[i.x,i.y];B=O,R=$}if(k==="inside-to-node")r=[s.x,s.y];else if(_.units)r=this.manualEndptToPx(a,_);else if(k==="outside-to-line")r=h.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?M=B:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(M=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(s.x,s.y,a.outerWidth(),a.outerHeight(),M[0],M[1],0,A,d),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var F=a._private.rscratch,G=F.labelWidth,X=F.labelHeight,j=F.labelX,Y=F.labelY,ee=G/2,re=X/2,Z=a.pstyle("text-valign").value;Z==="top"?Y-=re:Z==="bottom"&&(Y+=re);var V=a.pstyle("text-halign").value;V==="left"?j-=ee:V==="right"&&(j+=ee);var z=Ua(M[0],M[1],[j-ee,Y-re,j+ee,Y-re,j+ee,Y+re,j-ee,Y+re],s.x,s.y);if(z.length>0){var U=i,te=tn(U,Vn(r)),ae=tn(U,Vn(z)),we=te;if(ae<te&&(r=z,we=ae),z.length>2){var Ge=tn(U,{x:z[2],y:z[3]});Ge<we&&(r=[z[2],z[3]])}}}var Ve=Ci(r,B,e.arrowShapes[o].spacing(t)+l),se=Ci(r,B,e.arrowShapes[o].gap(t)+l);if(h.endX=se[0],h.endY=se[1],h.arrowEndX=Ve[0],h.arrowEndY=Ve[1],S==="inside-to-node")r=[i.x,i.y];else if(C.units)r=this.manualEndptToPx(n,C);else if(S==="outside-to-line")r=h.srcIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?L=R:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(L=[s.x,s.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),L[0],L[1],0,D,f),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var oe=n._private.rscratch,de=oe.labelWidth,pe=oe.labelHeight,ve=oe.labelX,ye=oe.labelY,xe=de/2,De=pe/2,ze=n.pstyle("text-valign").value;ze==="top"?ye-=De:ze==="bottom"&&(ye+=De);var Qe=n.pstyle("text-halign").value;Qe==="left"?ve-=xe:Qe==="right"&&(ve+=xe);var Re=Ua(L[0],L[1],[ve-xe,ye-De,ve+xe,ye-De,ve+xe,ye+De,ve-xe,ye+De],i.x,i.y);if(Re.length>0){var rt=s,Ae=tn(rt,Vn(r)),le=tn(rt,Vn(Re)),Q=Ae;if(le<Ae&&(r=[Re[0],Re[1]],Q=le),Re.length>2){var P=tn(rt,{x:Re[2],y:Re[3]});P<Q&&(r=[Re[2],Re[3]])}}}var q=Ci(r,R,e.arrowShapes[u].spacing(t)+c),H=Ci(r,R,e.arrowShapes[u].gap(t)+c);h.startX=H[0],h.startY=H[1],h.arrowStartX=q[0],h.arrowStartY=q[1],E&&(!ne(h.startX)||!ne(h.startY)||!ne(h.endX)||!ne(h.endY)?h.badLine=!0:h.badLine=!1)};ci.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};ci.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var hc={};function KT(t,e,r){for(var n=function(l,c,f,d){return vt(l,c,f,d)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}hc.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)KT(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};hc.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var fr={};fr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Or(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(l){case"left":r=u.x-i/2-o;break;case"right":r=u.x+i/2+o;break;default:r=u.x}switch(c){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Wg=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},Gg=function(e,r){var n=r.x-e.x,a=r.y-e.y;return Wg(n,a)},YT=function(e,r,n,a){var i=$a(0,a-.001,1),s=$a(0,a+.001,1),o=Hn(e,r,n,i),u=Hn(e,r,n,s);return Gg(o,u)};fr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(f,d,v){pr(r.rscratch,f,d,v),pr(r.rstyle,f,d,v)};s("labelX",null,e.x),s("labelY",null,e.y);var o=Wg(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var v={x:n.allpts[d],y:n.allpts[d+1]},h={x:n.allpts[d+2],y:n.allpts[d+3]},g={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:v,p1:h,p2:g,startDist:0,length:0,segments:[]})}var p=r.rstyle.bezierPts,m=a.bezierProjPcts.length;function y(x,C,S,D,_){var k=pn(C,S),A=x.segments[x.segments.length-1],B={p0:C,p1:S,t0:D,t1:_,startDist:A?A.startDist+A.length:0,length:k};x.segments.push(B),x.length+=k}for(var b=0;b<f.length;b++){var w=f[b],T=f[b-1];T&&(w.startDist=T.startDist+T.length),y(w,w.p0,p[b*m],0,a.bezierProjPcts[0]);for(var E=0;E<m-1;E++)y(w,p[b*m+E],p[b*m+E+1],a.bezierProjPcts[E],a.bezierProjPcts[E+1]);y(w,p[b*m+m-1],w.p2,a.bezierProjPcts[m-1],1)}return u.cache=f},l=function(f){var d,v=f==="source";if(i[f]){var h=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=u(),p,m=0,y=0,b=0;b<g.length;b++){for(var w=g[v?b:g.length-1-b],T=0;T<w.segments.length;T++){var E=w.segments[v?T:w.segments.length-1-T],x=b===g.length-1&&T===w.segments.length-1;if(m=y,y+=E.length,y>=h||x){p={cp:w,segment:E};break}}if(p)break}var C=p.cp,S=p.segment,D=(h-m)/S.length,_=S.t1-S.t0,k=v?S.t0+_*D:S.t1-_*D;k=$a(0,k,1),e=Hn(C.p0,C.p1,C.p2,k),d=YT(C.p0,C.p1,C.p2,k);break}case"straight":case"segments":case"haystack":{for(var A=0,B,R,M,L,I=n.allpts.length,N=0;N+3<I&&(v?(M={x:n.allpts[N],y:n.allpts[N+1]},L={x:n.allpts[N+2],y:n.allpts[N+3]}):(M={x:n.allpts[I-2-N],y:n.allpts[I-1-N]},L={x:n.allpts[I-4-N],y:n.allpts[I-3-N]}),B=pn(M,L),R=A,A+=B,!(A>=h));N+=2);var $=h-R,O=$/B;O=$a(0,O,1),e=g1(M,L,O),d=Gg(M,L);break}}s("labelX",f,e.x),s("labelY",f,e.y),s("labelAutoAngle",f,d)}};l("source"),l("target"),this.applyLabelDimensions(t)}};fr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};fr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=hn(n,t._private.labelDimsKey);if(Lt(r.rscratch,"prefixedLabelDimsKey",e)!==a){pr(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),s=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,u=Lt(r.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(u.length,1),c=i.height/l,f=c*s,d=i.width,v=i.height+(l-1)*(s-1)*c;pr(r.rstyle,"labelWidth",e,d),pr(r.rscratch,"labelWidth",e,d),pr(r.rstyle,"labelHeight",e,v),pr(r.rscratch,"labelHeight",e,v),pr(r.rscratch,"labelLineHeight",e,f)}};fr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(G,X){return X?(pr(r.rscratch,G,e,X),X):Lt(r.rscratch,G,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="​",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,d=t.pstyle("text-overflow-wrap").value,v=d==="anywhere",h=[],g=/[\s\u200b]+|$/g,p=0;p<c.length;p++){var m=c[p],y=this.calculateLabelDimensions(t,m),b=y.width;if(v){var w=m.split("").join(l);m=w}if(b>f){var T=m.matchAll(g),E="",x=0,C=Vt(T),S;try{for(C.s();!(S=C.n()).done;){var D=S.value,_=D[0],k=m.substring(x,D.index);x=D.index+_.length;var A=E.length===0?k:E+k+_,B=this.calculateLabelDimensions(t,A),R=B.width;R<=f?E+=k+_:(E&&h.push(E),E=k+_)}}catch(F){C.e(F)}finally{C.f()}E.match(/^[\s\u200b]+$/)||h.push(E)}else h.push(m)}s("labelWrapCachedLines",h),a=s("labelWrapCachedText",h.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var M=t.pstyle("text-max-width").pfValue,L="",I="…",N=!1;if(this.calculateLabelDimensions(t,a).width<M)return a;for(var $=0;$<a.length;$++){var O=this.calculateLabelDimensions(t,L+a[$]+I).width;if(O>M)break;L+=a[$],$===a.length-1&&(N=!0)}return N||(L+=I),L}return a};fr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};fr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,s=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var d=c.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(s," ").concat(l," ").concat(o,"px ").concat(u);for(var v=0,h=0,g=e.split(`
`),p=0;p<g.length;p++){var m=g[p],y=f.measureText(m),b=Math.ceil(y.width),w=o;v=Math.max(b,v),h+=w}return v+=i,h+=i,{width:v,height:h}};fr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};fr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Kg={},bv=28,wv=!1;Kg.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<bv||t.height()<bv))return wv||(Oe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),wv=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Us={};Us.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var d=o[f];d(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Us.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Us.recalculateRenderedStyle=function(t,e){var r=function(w){return w._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),u.clean=!0)}for(var l=0;l<a.length;l++){var c=a[l],f=c._private,d=f.rstyle,v=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=v.x,d.nodeY=v.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var g=n[h],p=g._private,m=p.rstyle,y=p.rscratch;m.srcX=y.arrowStartX,m.srcY=y.arrowStartY,m.tgtX=y.arrowEndX,m.tgtY=y.arrowEndY,m.midX=y.midX,m.midY=y.midY,m.labelAngle=y.labelAngle,m.sourceLabelAngle=y.sourceLabelAngle,m.targetLabelAngle=y.targetLabelAngle}}}};var Hs={};Hs.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Hs.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Hs.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Dg),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Yg={};[Tn,fs,_t,ci,hc,fr,Kg,Us,Hs].forEach(function(t){he(Yg,t)});var Xg={};Xg.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",u=t.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var da={};da.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var u=this.binder(o);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};da.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||lb(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};da.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};da.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};da.load=function(){var t=this,e=t.cy.window(),r=function(P){return P.selected()},n=function(P){var q=P.getRootNode();if(q&&q.nodeType===11&&q.host!==void 0)return q},a=function(P,q,H,W){P==null&&(P=t.cy);for(var K=0;K<q.length;K++){var ue=q[K];P.emit({originalEvent:H,type:ue,position:W})}},i=function(P){return P.shiftKey||P.metaKey||P.ctrlKey},s=function(P,q){var H=!0;if(t.cy.hasCompoundNodes()&&P&&P.pannable())for(var W=0;q&&W<q.length;W++){var P=q[W];if(P.isNode()&&P.isParent()&&!P.pannable()){H=!1;break}}else H=!0;return H},o=function(P){P[0]._private.grabbed=!0},u=function(P){P[0]._private.grabbed=!1},l=function(P){P[0]._private.rscratch.inDragLayer=!0},c=function(P){P[0]._private.rscratch.inDragLayer=!1},f=function(P){P[0]._private.rscratch.isGrabTarget=!0},d=function(P){P[0]._private.rscratch.isGrabTarget=!1},v=function(P,q){var H=q.addToList,W=H.has(P);!W&&P.grabbable()&&!P.locked()&&(H.merge(P),o(P))},h=function(P,q){if(P.cy().hasCompoundNodes()&&!(q.inDragLayer==null&&q.addToList==null)){var H=P.descendants();q.inDragLayer&&(H.forEach(l),H.connectedEdges().forEach(l)),q.addToList&&v(H,q)}},g=function(P,q){q=q||{};var H=P.cy().hasCompoundNodes();q.inDragLayer&&(P.forEach(l),P.neighborhood().stdFilter(function(W){return!H||W.isEdge()}).forEach(l)),q.addToList&&P.forEach(function(W){v(W,q)}),h(P,q),y(P,{inDragLayer:q.inDragLayer}),t.updateCachedGrabbedEles()},p=g,m=function(P){P&&(t.getCachedZSortedEles().forEach(function(q){u(q),c(q),d(q)}),t.updateCachedGrabbedEles())},y=function(P,q){if(!(q.inDragLayer==null&&q.addToList==null)&&P.cy().hasCompoundNodes()){var H=P.ancestors().orphans();if(!H.same(P)){var W=H.descendants().spawnSelf().merge(H).unmerge(P).unmerge(P.descendants()),K=W.connectedEdges();q.inDragLayer&&(K.forEach(l),W.forEach(l)),q.addToList&&W.forEach(function(ue){v(ue,q)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",T=typeof ResizeObserver<"u";w?(t.removeObserver=new MutationObserver(function(Q){for(var P=0;P<Q.length;P++){var q=Q[P],H=q.removedNodes;if(H)for(var W=0;W<H.length;W++){var K=H[W];if(K===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Q){t.destroy()});var E=si(function(){t.cy.resize()},100);w&&(t.styleObserver=new MutationObserver(E),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",E),T&&(t.resizeObserver=new ResizeObserver(E),t.resizeObserver.observe(t.container));var x=function(P,q){for(;P!=null;)q(P),P=P.parentNode},C=function(){t.invalidateContainerClientCoordsCache()};x(t.container,function(Q){t.registerBinding(Q,"transitionend",C),t.registerBinding(Q,"animationend",C),t.registerBinding(Q,"scroll",C)}),t.registerBinding(t.container,"contextmenu",function(Q){Q.preventDefault()});var S=function(){return t.selection[4]!==0},D=function(P){for(var q=t.findContainerClientCoords(),H=q[0],W=q[1],K=q[2],ue=q[3],J=P.touches?P.touches:[P],ce=!1,Ee=0;Ee<J.length;Ee++){var _e=J[Ee];if(H<=_e.clientX&&_e.clientX<=H+K&&W<=_e.clientY&&_e.clientY<=W+ue){ce=!0;break}}if(!ce)return!1;for(var ge=t.container,Ce=P.target,be=Ce.parentNode,Te=!1;be;){if(be===ge){Te=!0;break}be=be.parentNode}return!!Te};t.registerBinding(t.container,"mousedown",function(P){if(D(P)&&!(t.hoverData.which===1&&P.which!==1)){P.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=P.which;var q=t.cy,H=[P.clientX,P.clientY],W=t.projectIntoViewport(H[0],H[1]),K=t.selection,ue=t.findNearestElements(W[0],W[1],!0,!1),J=ue[0],ce=t.dragData.possibleDragElements;t.hoverData.mdownPos=W,t.hoverData.mdownGPos=H;var Ee=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Fe=t.hoverData.down;Fe?Fe.emit({originalEvent:P,type:"taphold",position:{x:W[0],y:W[1]}}):q.emit({originalEvent:P,type:"taphold",position:{x:W[0],y:W[1]}})}},t.tapholdDuration)};if(P.which==3){t.hoverData.cxtStarted=!0;var _e={originalEvent:P,type:"cxttapstart",position:{x:W[0],y:W[1]}};J?(J.activate(),J.emit(_e),t.hoverData.down=J):q.emit(_e),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(P.which==1){J&&J.activate();{if(J!=null&&t.nodeIsGrabbable(J)){var ge=function(Fe){return{originalEvent:P,type:Fe,position:{x:W[0],y:W[1]}}},Ce=function(Fe){Fe.emit(ge("grab"))};if(f(J),!J.selected())ce=t.dragData.possibleDragElements=q.collection(),p(J,{addToList:ce}),J.emit(ge("grabon")).emit(ge("grab"));else{ce=t.dragData.possibleDragElements=q.collection();var be=q.$(function(Te){return Te.isNode()&&Te.selected()&&t.nodeIsGrabbable(Te)});g(be,{addToList:ce}),J.emit(ge("grabon")),be.forEach(Ce)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=J,t.hoverData.downs=ue,t.hoverData.downTime=new Date().getTime()}a(J,["mousedown","tapstart","vmousedown"],P,{x:W[0],y:W[1]}),J==null?(K[4]=1,t.data.bgActivePosistion={x:W[0],y:W[1]},t.redrawHint("select",!0),t.redraw()):J.pannable()&&(K[4]=1),Ee()}K[0]=K[2]=W[0],K[1]=K[3]=W[1]}},!1);var _=n(t.container);t.registerBinding([e,_],"mousemove",function(P){var q=t.hoverData.capture;if(!(!q&&!D(P))){var H=!1,W=t.cy,K=W.zoom(),ue=[P.clientX,P.clientY],J=t.projectIntoViewport(ue[0],ue[1]),ce=t.hoverData.mdownPos,Ee=t.hoverData.mdownGPos,_e=t.selection,ge=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(ge=t.findNearestElement(J[0],J[1],!0,!1));var Ce=t.hoverData.last,be=t.hoverData.down,Te=[J[0]-_e[2],J[1]-_e[3]],Fe=t.dragData.possibleDragElements,nt;if(Ee){var mt=ue[0]-Ee[0],dt=mt*mt,et=ue[1]-Ee[1],yt=et*et,st=dt+yt;t.hoverData.isOverThresholdDrag=nt=st>=t.desktopTapThreshold2}var Bt=i(P);nt&&(t.hoverData.tapholdCancelled=!0);var tr=function(){var rr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];rr.length===0?(rr.push(Te[0]),rr.push(Te[1])):(rr[0]+=Te[0],rr[1]+=Te[1])};H=!0,a(ge,["mousemove","vmousemove","tapdrag"],P,{x:J[0],y:J[1]});var _r=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||W.emit({originalEvent:P,type:"boxstart",position:{x:J[0],y:J[1]}}),_e[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(nt){var vr={originalEvent:P,type:"cxtdrag",position:{x:J[0],y:J[1]}};be?be.emit(vr):W.emit(vr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||ge!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:P,type:"cxtdragout",position:{x:J[0],y:J[1]}}),t.hoverData.cxtOver=ge,ge&&ge.emit({originalEvent:P,type:"cxtdragover",position:{x:J[0],y:J[1]}}))}}else if(t.hoverData.dragging){if(H=!0,W.panningEnabled()&&W.userPanningEnabled()){var Pn;if(t.hoverData.justStartedPan){var mi=t.hoverData.mdownPos;Pn={x:(J[0]-mi[0])*K,y:(J[1]-mi[1])*K},t.hoverData.justStartedPan=!1}else Pn={x:Te[0]*K,y:Te[1]*K};W.panBy(Pn),W.emit("dragpan"),t.hoverData.dragged=!0}J=t.projectIntoViewport(P.clientX,P.clientY)}else if(_e[4]==1&&(be==null||be.pannable())){if(nt){if(!t.hoverData.dragging&&W.boxSelectionEnabled()&&(Bt||!W.panningEnabled()||!W.userPanningEnabled()))_r();else if(!t.hoverData.selecting&&W.panningEnabled()&&W.userPanningEnabled()){var jr=s(be,t.hoverData.downs);jr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,_e[4]=0,t.data.bgActivePosistion=Vn(ce),t.redrawHint("select",!0),t.redraw())}be&&be.pannable()&&be.active()&&be.unactivate()}}else{if(be&&be.pannable()&&be.active()&&be.unactivate(),(!be||!be.grabbed())&&ge!=Ce&&(Ce&&a(Ce,["mouseout","tapdragout"],P,{x:J[0],y:J[1]}),ge&&a(ge,["mouseover","tapdragover"],P,{x:J[0],y:J[1]}),t.hoverData.last=ge),be)if(nt){if(W.boxSelectionEnabled()&&Bt)be&&be.grabbed()&&(m(Fe),be.emit("freeon"),Fe.emit("free"),t.dragData.didDrag&&(be.emit("dragfreeon"),Fe.emit("dragfree"))),_r();else if(be&&be.grabbed()&&t.nodeIsDraggable(be)){var Rt=!t.dragData.didDrag;Rt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||g(Fe,{inDragLayer:!0});var Et={x:0,y:0};if(ne(Te[0])&&ne(Te[1])&&(Et.x+=Te[0],Et.y+=Te[1],Rt)){var Mt=t.hoverData.dragDelta;Mt&&ne(Mt[0])&&ne(Mt[1])&&(Et.x+=Mt[0],Et.y+=Mt[1])}t.hoverData.draggingEles=!0,Fe.silentShift(Et).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else tr();H=!0}if(_e[2]=J[0],_e[3]=J[1],H)return P.stopPropagation&&P.stopPropagation(),P.preventDefault&&P.preventDefault(),!1}},!1);var k,A,B;t.registerBinding(e,"mouseup",function(P){if(!(t.hoverData.which===1&&P.which!==1&&t.hoverData.capture)){var q=t.hoverData.capture;if(q){t.hoverData.capture=!1;var H=t.cy,W=t.projectIntoViewport(P.clientX,P.clientY),K=t.selection,ue=t.findNearestElement(W[0],W[1],!0,!1),J=t.dragData.possibleDragElements,ce=t.hoverData.down,Ee=i(P);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ce&&ce.unactivate(),t.hoverData.which===3){var _e={originalEvent:P,type:"cxttapend",position:{x:W[0],y:W[1]}};if(ce?ce.emit(_e):H.emit(_e),!t.hoverData.cxtDragged){var ge={originalEvent:P,type:"cxttap",position:{x:W[0],y:W[1]}};ce?ce.emit(ge):H.emit(ge)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(ue,["mouseup","tapend","vmouseup"],P,{x:W[0],y:W[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(ce,["click","tap","vclick"],P,{x:W[0],y:W[1]}),A=!1,P.timeStamp-B<=H.multiClickDebounceTime()?(k&&clearTimeout(k),A=!0,B=null,a(ce,["dblclick","dbltap","vdblclick"],P,{x:W[0],y:W[1]})):(k=setTimeout(function(){A||a(ce,["oneclick","onetap","voneclick"],P,{x:W[0],y:W[1]})},H.multiClickDebounceTime()),B=P.timeStamp)),ce==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(P)&&(H.$(r).unselect(["tapunselect"]),J.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=J=H.collection()),ue==ce&&!t.dragData.didDrag&&!t.hoverData.selecting&&ue!=null&&ue._private.selectable&&(t.hoverData.dragging||(H.selectionType()==="additive"||Ee?ue.selected()?ue.unselect(["tapunselect"]):ue.select(["tapselect"]):Ee||(H.$(r).unmerge(ue).unselect(["tapunselect"]),ue.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ce=H.collection(t.getAllInBox(K[0],K[1],K[2],K[3]));t.redrawHint("select",!0),Ce.length>0&&t.redrawHint("eles",!0),H.emit({type:"boxend",originalEvent:P,position:{x:W[0],y:W[1]}});var be=function(nt){return nt.selectable()&&!nt.selected()};H.selectionType()==="additive"||Ee||H.$(r).unmerge(Ce).unselect(),Ce.emit("box").stdFilter(be).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!K[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Te=ce&&ce.grabbed();m(J),Te&&(ce.emit("freeon"),J.emit("free"),t.dragData.didDrag&&(ce.emit("dragfreeon"),J.emit("dragfree")))}}K[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var R=[],M=4,L,I=1e5,N=function(P,q){for(var H=0;H<P.length;H++)if(P[H]%q!==0)return!1;return!0},$=function(P){for(var q=Math.abs(P[0]),H=1;H<P.length;H++)if(Math.abs(P[H])!==q)return!1;return!0},O=function(P){var q=!1,H=P.deltaY;if(H==null&&(P.wheelDeltaY!=null?H=P.wheelDeltaY/4:P.wheelDelta!=null&&(H=P.wheelDelta/4)),L==null)if(R.length>=M){var W=R;if(L=N(W,5),!L){var K=Math.abs(W[0]);L=$(W)&&K>5}if(L)for(var ue=0;ue<W.length;ue++)I=Math.min(Math.abs(W[ue]),I)}else R.push(H),q=!0;else L&&(I=Math.min(Math.abs(H),I));if(!t.scrollingPage){var J=t.cy,ce=J.zoom(),Ee=J.pan(),_e=t.projectIntoViewport(P.clientX,P.clientY),ge=[_e[0]*ce+Ee.x,_e[1]*ce+Ee.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||S()){P.preventDefault();return}if(J.panningEnabled()&&J.userPanningEnabled()&&J.zoomingEnabled()&&J.userZoomingEnabled()){P.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Ce;q&&Math.abs(H)>5&&(H=ec(H)*5),Ce=H/-250,L&&(Ce/=I,Ce*=3),Ce=Ce*t.wheelSensitivity;var be=P.deltaMode===1;be&&(Ce*=33);var Te=J.zoom()*Math.pow(10,Ce);P.type==="gesturechange"&&(Te=t.gestureStartZoom*P.scale),J.zoom({level:Te,renderedPosition:{x:ge[0],y:ge[1]}}),J.emit(P.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",O,!0),t.registerBinding(e,"scroll",function(P){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(P){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||P.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Q){t.hasTouchStarted||O(Q)},!0),t.registerBinding(t.container,"mouseout",function(P){var q=t.projectIntoViewport(P.clientX,P.clientY);t.cy.emit({originalEvent:P,type:"mouseout",position:{x:q[0],y:q[1]}})},!1),t.registerBinding(t.container,"mouseover",function(P){var q=t.projectIntoViewport(P.clientX,P.clientY);t.cy.emit({originalEvent:P,type:"mouseover",position:{x:q[0],y:q[1]}})},!1);var F,G,X,j,Y,ee,re,Z,V,z,U,te,ae,we=function(P,q,H,W){return Math.sqrt((H-P)*(H-P)+(W-q)*(W-q))},Ge=function(P,q,H,W){return(H-P)*(H-P)+(W-q)*(W-q)},Ve;t.registerBinding(t.container,"touchstart",Ve=function(P){if(t.hasTouchStarted=!0,!!D(P)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var q=t.cy,H=t.touchData.now,W=t.touchData.earlier;if(P.touches[0]){var K=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);H[0]=K[0],H[1]=K[1]}if(P.touches[1]){var K=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);H[2]=K[0],H[3]=K[1]}if(P.touches[2]){var K=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);H[4]=K[0],H[5]=K[1]}if(P.touches[1]){t.touchData.singleTouchMoved=!0,m(t.dragData.touchDragEles);var ue=t.findContainerClientCoords();V=ue[0],z=ue[1],U=ue[2],te=ue[3],F=P.touches[0].clientX-V,G=P.touches[0].clientY-z,X=P.touches[1].clientX-V,j=P.touches[1].clientY-z,ae=0<=F&&F<=U&&0<=X&&X<=U&&0<=G&&G<=te&&0<=j&&j<=te;var J=q.pan(),ce=q.zoom();Y=we(F,G,X,j),ee=Ge(F,G,X,j),re=[(F+X)/2,(G+j)/2],Z=[(re[0]-J.x)/ce,(re[1]-J.y)/ce];var Ee=200,_e=Ee*Ee;if(ee<_e&&!P.touches[2]){var ge=t.findNearestElement(H[0],H[1],!0,!0),Ce=t.findNearestElement(H[2],H[3],!0,!0);ge&&ge.isNode()?(ge.activate().emit({originalEvent:P,type:"cxttapstart",position:{x:H[0],y:H[1]}}),t.touchData.start=ge):Ce&&Ce.isNode()?(Ce.activate().emit({originalEvent:P,type:"cxttapstart",position:{x:H[0],y:H[1]}}),t.touchData.start=Ce):q.emit({originalEvent:P,type:"cxttapstart",position:{x:H[0],y:H[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(P.touches[2])q.boxSelectionEnabled()&&P.preventDefault();else if(!P.touches[1]){if(P.touches[0]){var be=t.findNearestElements(H[0],H[1],!0,!0),Te=be[0];if(Te!=null&&(Te.activate(),t.touchData.start=Te,t.touchData.starts=be,t.nodeIsGrabbable(Te))){var Fe=t.dragData.touchDragEles=q.collection(),nt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Te.selected()?(nt=q.$(function(st){return st.selected()&&t.nodeIsGrabbable(st)}),g(nt,{addToList:Fe})):p(Te,{addToList:Fe}),f(Te);var mt=function(Bt){return{originalEvent:P,type:Bt,position:{x:H[0],y:H[1]}}};Te.emit(mt("grabon")),nt?nt.forEach(function(st){st.emit(mt("grab"))}):Te.emit(mt("grab"))}a(Te,["touchstart","tapstart","vmousedown"],P,{x:H[0],y:H[1]}),Te==null&&(t.data.bgActivePosistion={x:K[0],y:K[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],P,{x:H[0],y:H[1]})},t.tapholdDuration)}}if(P.touches.length>=1){for(var dt=t.touchData.startPosition=[null,null,null,null,null,null],et=0;et<H.length;et++)dt[et]=W[et]=H[et];var yt=P.touches[0];t.touchData.startGPosition=[yt.clientX,yt.clientY]}}},!1);var se;t.registerBinding(e,"touchmove",se=function(P){var q=t.touchData.capture;if(!(!q&&!D(P))){var H=t.selection,W=t.cy,K=t.touchData.now,ue=t.touchData.earlier,J=W.zoom();if(P.touches[0]){var ce=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);K[0]=ce[0],K[1]=ce[1]}if(P.touches[1]){var ce=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);K[2]=ce[0],K[3]=ce[1]}if(P.touches[2]){var ce=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);K[4]=ce[0],K[5]=ce[1]}var Ee=t.touchData.startGPosition,_e;if(q&&P.touches[0]&&Ee){for(var ge=[],Ce=0;Ce<K.length;Ce++)ge[Ce]=K[Ce]-ue[Ce];var be=P.touches[0].clientX-Ee[0],Te=be*be,Fe=P.touches[0].clientY-Ee[1],nt=Fe*Fe,mt=Te+nt;_e=mt>=t.touchTapThreshold2}if(q&&t.touchData.cxt){P.preventDefault();var dt=P.touches[0].clientX-V,et=P.touches[0].clientY-z,yt=P.touches[1].clientX-V,st=P.touches[1].clientY-z,Bt=Ge(dt,et,yt,st),tr=Bt/ee,_r=150,vr=_r*_r,Pn=1.5,mi=Pn*Pn;if(tr>=mi||Bt>=vr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var jr={originalEvent:P,type:"cxttapend",position:{x:K[0],y:K[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(jr),t.touchData.start=null):W.emit(jr)}}if(q&&t.touchData.cxt){var jr={originalEvent:P,type:"cxtdrag",position:{x:K[0],y:K[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(jr):W.emit(jr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Rt=t.findNearestElement(K[0],K[1],!0,!0);(!t.touchData.cxtOver||Rt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:P,type:"cxtdragout",position:{x:K[0],y:K[1]}}),t.touchData.cxtOver=Rt,Rt&&Rt.emit({originalEvent:P,type:"cxtdragover",position:{x:K[0],y:K[1]}}))}else if(q&&P.touches[2]&&W.boxSelectionEnabled())P.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||W.emit({originalEvent:P,type:"boxstart",position:{x:K[0],y:K[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,H[4]=1,!H||H.length===0||H[0]===void 0?(H[0]=(K[0]+K[2]+K[4])/3,H[1]=(K[1]+K[3]+K[5])/3,H[2]=(K[0]+K[2]+K[4])/3+1,H[3]=(K[1]+K[3]+K[5])/3+1):(H[2]=(K[0]+K[2]+K[4])/3,H[3]=(K[1]+K[3]+K[5])/3),t.redrawHint("select",!0),t.redraw();else if(q&&P.touches[1]&&!t.touchData.didSelect&&W.zoomingEnabled()&&W.panningEnabled()&&W.userZoomingEnabled()&&W.userPanningEnabled()){P.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Et=t.dragData.touchDragEles;if(Et){t.redrawHint("drag",!0);for(var Mt=0;Mt<Et.length;Mt++){var yi=Et[Mt]._private;yi.grabbed=!1,yi.rscratch.inDragLayer=!1}}var rr=t.touchData.start,dt=P.touches[0].clientX-V,et=P.touches[0].clientY-z,yt=P.touches[1].clientX-V,st=P.touches[1].clientY-z,Nc=we(dt,et,yt,st),zy=Nc/Y;if(ae){var qy=dt-F,$y=et-G,Uy=yt-X,Hy=st-j,Wy=(qy+Uy)/2,Gy=($y+Hy)/2,ha=W.zoom(),Js=ha*zy,bi=W.pan(),zc=Z[0]*ha+bi.x,qc=Z[1]*ha+bi.y,Ky={x:-Js/ha*(zc-bi.x-Wy)+zc,y:-Js/ha*(qc-bi.y-Gy)+qc};if(rr&&rr.active()){var Et=t.dragData.touchDragEles;m(Et),t.redrawHint("drag",!0),t.redrawHint("eles",!0),rr.unactivate().emit("freeon"),Et.emit("free"),t.dragData.didDrag&&(rr.emit("dragfreeon"),Et.emit("dragfree"))}W.viewport({zoom:Js,pan:Ky,cancelOnFailedZoom:!0}),W.emit("pinchzoom"),Y=Nc,F=dt,G=et,X=yt,j=st,t.pinching=!0}if(P.touches[0]){var ce=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);K[0]=ce[0],K[1]=ce[1]}if(P.touches[1]){var ce=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);K[2]=ce[0],K[3]=ce[1]}if(P.touches[2]){var ce=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);K[4]=ce[0],K[5]=ce[1]}}else if(P.touches[0]&&!t.touchData.didSelect){var Xt=t.touchData.start,eo=t.touchData.last,Rt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Rt=t.findNearestElement(K[0],K[1],!0,!0)),q&&Xt!=null&&P.preventDefault(),q&&Xt!=null&&t.nodeIsDraggable(Xt))if(_e){var Et=t.dragData.touchDragEles,$c=!t.dragData.didDrag;$c&&g(Et,{inDragLayer:!0}),t.dragData.didDrag=!0;var pa={x:0,y:0};if(ne(ge[0])&&ne(ge[1])&&(pa.x+=ge[0],pa.y+=ge[1],$c)){t.redrawHint("eles",!0);var Zt=t.touchData.dragDelta;Zt&&ne(Zt[0])&&ne(Zt[1])&&(pa.x+=Zt[0],pa.y+=Zt[1])}t.hoverData.draggingEles=!0,Et.silentShift(pa).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ue[0]&&t.touchData.startPosition[1]==ue[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Zt=t.touchData.dragDelta=t.touchData.dragDelta||[];Zt.length===0?(Zt.push(ge[0]),Zt.push(ge[1])):(Zt[0]+=ge[0],Zt[1]+=ge[1])}if(a(Xt||Rt,["touchmove","tapdrag","vmousemove"],P,{x:K[0],y:K[1]}),(!Xt||!Xt.grabbed())&&Rt!=eo&&(eo&&eo.emit({originalEvent:P,type:"tapdragout",position:{x:K[0],y:K[1]}}),Rt&&Rt.emit({originalEvent:P,type:"tapdragover",position:{x:K[0],y:K[1]}})),t.touchData.last=Rt,q)for(var Mt=0;Mt<K.length;Mt++)K[Mt]&&t.touchData.startPosition[Mt]&&_e&&(t.touchData.singleTouchMoved=!0);if(q&&(Xt==null||Xt.pannable())&&W.panningEnabled()&&W.userPanningEnabled()){var Yy=s(Xt,t.touchData.starts);Yy&&(P.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Vn(t.touchData.startPosition)),t.swipePanning?(W.panBy({x:ge[0]*J,y:ge[1]*J}),W.emit("dragpan")):_e&&(t.swipePanning=!0,W.panBy({x:be*J,y:Fe*J}),W.emit("dragpan"),Xt&&(Xt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ce=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);K[0]=ce[0],K[1]=ce[1]}}for(var Ce=0;Ce<K.length;Ce++)ue[Ce]=K[Ce];q&&P.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var oe;t.registerBinding(e,"touchcancel",oe=function(P){var q=t.touchData.start;t.touchData.capture=!1,q&&q.unactivate()});var de,pe,ve,ye;if(t.registerBinding(e,"touchend",de=function(P){var q=t.touchData.start,H=t.touchData.capture;if(H)P.touches.length===0&&(t.touchData.capture=!1),P.preventDefault();else return;var W=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var K=t.cy,ue=K.zoom(),J=t.touchData.now,ce=t.touchData.earlier;if(P.touches[0]){var Ee=t.projectIntoViewport(P.touches[0].clientX,P.touches[0].clientY);J[0]=Ee[0],J[1]=Ee[1]}if(P.touches[1]){var Ee=t.projectIntoViewport(P.touches[1].clientX,P.touches[1].clientY);J[2]=Ee[0],J[3]=Ee[1]}if(P.touches[2]){var Ee=t.projectIntoViewport(P.touches[2].clientX,P.touches[2].clientY);J[4]=Ee[0],J[5]=Ee[1]}q&&q.unactivate();var _e;if(t.touchData.cxt){if(_e={originalEvent:P,type:"cxttapend",position:{x:J[0],y:J[1]}},q?q.emit(_e):K.emit(_e),!t.touchData.cxtDragged){var ge={originalEvent:P,type:"cxttap",position:{x:J[0],y:J[1]}};q?q.emit(ge):K.emit(ge)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!P.touches[2]&&K.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ce=K.collection(t.getAllInBox(W[0],W[1],W[2],W[3]));W[0]=void 0,W[1]=void 0,W[2]=void 0,W[3]=void 0,W[4]=0,t.redrawHint("select",!0),K.emit({type:"boxend",originalEvent:P,position:{x:J[0],y:J[1]}});var be=function(vr){return vr.selectable()&&!vr.selected()};Ce.emit("box").stdFilter(be).select().emit("boxselect"),Ce.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(q!=null&&q.unactivate(),P.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!P.touches[1]){if(!P.touches[0]){if(!P.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Te=t.dragData.touchDragEles;if(q!=null){var Fe=q._private.grabbed;m(Te),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Fe&&(q.emit("freeon"),Te.emit("free"),t.dragData.didDrag&&(q.emit("dragfreeon"),Te.emit("dragfree"))),a(q,["touchend","tapend","vmouseup","tapdragout"],P,{x:J[0],y:J[1]}),q.unactivate(),t.touchData.start=null}else{var nt=t.findNearestElement(J[0],J[1],!0,!0);a(nt,["touchend","tapend","vmouseup","tapdragout"],P,{x:J[0],y:J[1]})}var mt=t.touchData.startPosition[0]-J[0],dt=mt*mt,et=t.touchData.startPosition[1]-J[1],yt=et*et,st=dt+yt,Bt=st*ue*ue;t.touchData.singleTouchMoved||(q||K.$(":selected").unselect(["tapunselect"]),a(q,["tap","vclick"],P,{x:J[0],y:J[1]}),pe=!1,P.timeStamp-ye<=K.multiClickDebounceTime()?(ve&&clearTimeout(ve),pe=!0,ye=null,a(q,["dbltap","vdblclick"],P,{x:J[0],y:J[1]})):(ve=setTimeout(function(){pe||a(q,["onetap","voneclick"],P,{x:J[0],y:J[1]})},K.multiClickDebounceTime()),ye=P.timeStamp)),q!=null&&!t.dragData.didDrag&&q._private.selectable&&Bt<t.touchTapThreshold2&&!t.pinching&&(K.selectionType()==="single"?(K.$(r).unmerge(q).unselect(["tapunselect"]),q.select(["tapselect"])):q.selected()?q.unselect(["tapunselect"]):q.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var tr=0;tr<J.length;tr++)ce[tr]=J[tr];t.dragData.didDrag=!1,P.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),P.touches.length<2&&(P.touches.length===1&&(t.touchData.startGPosition=[P.touches[0].clientX,P.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var xe=[],De=function(P){return{clientX:P.clientX,clientY:P.clientY,force:1,identifier:P.pointerId,pageX:P.pageX,pageY:P.pageY,radiusX:P.width/2,radiusY:P.height/2,screenX:P.screenX,screenY:P.screenY,target:P.target}},ze=function(P){return{event:P,touch:De(P)}},Qe=function(P){xe.push(ze(P))},Re=function(P){for(var q=0;q<xe.length;q++){var H=xe[q];if(H.event.pointerId===P.pointerId){xe.splice(q,1);return}}},rt=function(P){var q=xe.filter(function(H){return H.event.pointerId===P.pointerId})[0];q.event=P,q.touch=De(P)},Ae=function(P){P.touches=xe.map(function(q){return q.touch})},le=function(P){return P.pointerType==="mouse"||P.pointerType===4};t.registerBinding(t.container,"pointerdown",function(Q){le(Q)||(Q.preventDefault(),Qe(Q),Ae(Q),Ve(Q))}),t.registerBinding(t.container,"pointerup",function(Q){le(Q)||(Re(Q),Ae(Q),de(Q))}),t.registerBinding(t.container,"pointercancel",function(Q){le(Q)||(Re(Q),Ae(Q),oe(Q))}),t.registerBinding(t.container,"pointermove",function(Q){le(Q)||(Q.preventDefault(),rt(Q),Ae(Q),se(Q))})}};var Sr={};Sr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,u){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,u,l,c){return Ua(o,u,this.points,n,a,i/2,s/2,l)},checkPoint:function(n,a,i,s,o,u,l,c){return Er(n,a,this.points,u,l,s,o,[0,-1],i)}}};Sr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){return k1(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,u){return fn(e,r,a,i,s,o,n)}}};Sr.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var c=i/2,f=s/2;o=o==="auto"?jp(i,s):o;for(var d=new Array(e.length/2),v=0;v<e.length/2;v++)d[v]={x:n+c*e[v*2],y:a+f*e[v*2+1]};var h,g,p,m,y=d.length;for(g=d[y-1],h=0;h<y;h++)p=d[h%y],m=d[(h+1)%y],u[l][h]=vc(g,p,m,o),g=p,p=m;return u[l]},draw:function(n,a,i,s,o,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,u,l,"drawCorners"))},intersectLine:function(n,a,i,s,o,u,l,c,f){return B1(o,u,this.points,n,a,i,s,l,this.getOrCreateCorners(n,a,i,s,c,f,"corners"))},checkPoint:function(n,a,i,s,o,u,l,c,f){return A1(n,a,this.points,u,l,s,o,this.getOrCreateCorners(u,l,s,o,c,f,"corners"))}}};Sr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Dt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){return Xp(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){var l=a/2,c=i/2;u=u==="auto"?Fr(a,i):u,u=Math.min(l,c,u);var f=u*2;return!!(Er(e,r,this.points,s,o,a,i-f,[0,-1],n)||Er(e,r,this.points,s,o,a-f,i,[0,-1],n)||fn(e,r,f,f,s-l+u,o-c+u,n)||fn(e,r,f,f,s+l-u,o-c+u,n)||fn(e,r,f,f,s+l-u,o+c-u,n)||fn(e,r,f,f,s-l+u,o+c-u,n))}}};Sr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:rc(),points:Dt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,u=e/2,l=n-u,c=n+u,f=a-o,d=a+o;return{topLeft:[l,f+s,l+s,f,l+s,f+s],topRight:[c-s,f,c,f+s,c-s,f+s],bottomRight:[c,d-s,c-s,d,c-s,d-s],bottomLeft:[l+s,d,l,d-s,l+s,d-s]}},intersectLine:function(e,r,n,a,i,s,o,u){var l=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Ua(i,s,c,e,r)},checkPoint:function(e,r,n,a,i,s,o,u){var l=u==="auto"?this.cornerLength:u;if(Er(e,r,this.points,s,o,a,i-2*l,[0,-1],n)||Er(e,r,this.points,s,o,a-2*l,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,s,o);return It(e,r,c.topLeft)||It(e,r,c.topRight)||It(e,r,c.bottomRight)||It(e,r,c.bottomLeft)}}};Sr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Dt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){var l=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),v=function(p){var m=Hn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l),y=Hn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c),b=Hn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},f);return[p[0],p[1],m.x,m.y,y.x,y.y,b.x,b.y,p[4],p[5]]},h=[].concat(v(d.topLeft),v(d.topRight),v(d.bottomRight),v(d.bottomLeft));return Ua(i,s,h,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,u=n+s,l=a-i,c=a+i,f=tl(e,r),d=f.heightOffset,v=f.widthOffset,h=f.ctrlPtOffsetPct*e,g={topLeft:[o,l+d,o+h,l,o+v,l],topRight:[u-v,l,u-h,l,u,l+d],bottomRight:[u,c-d,u-h,c,u-v,c],bottomLeft:[o+v,c,o+h,c,o,c-d]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,r,n,a,i,s,o,u){var l=tl(a,i),c=l.heightOffset,f=l.widthOffset;if(Er(e,r,this.points,s,o,a,i-2*c,[0,-1],n)||Er(e,r,this.points,s,o,a-2*f,i,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(a,i,s,o),v=function(C,S,D){var _=D[4],k=D[2],A=D[0],B=D[5],R=D[1],M=Math.min(_,A),L=Math.max(_,A),I=Math.min(B,R),N=Math.max(B,R);if(M<=C&&C<=L&&I<=S&&S<=N){var $=R1(_,k,A),O=S1($[0],$[1],$[2],C),F=O.filter(function(G){return 0<=G&&G<=1});if(F.length>0)return F[0]}return null},h=Object.keys(d),g=0;g<h.length;g++){var p=h[g],m=d[p],y=v(e,r,m);if(y!=null){var b=m[5],w=m[3],T=m[1],E=vt(b,w,T,y);if(m.isTop&&E<=r||m.isBottom&&r<=E)return!0}}return!1}}};Sr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Dt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){var l=e-(n/2+o),c=r-(a/2+o),f=c,d=e+(n/2+o),v=Rr(i,s,e,r,l,c,d,f,!1);return v.length>0?v:Xp(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){u=u==="auto"?Fr(a,i):u;var l=2*u;if(Er(e,r,this.points,s,o,a,i-l,[0,-1],n)||Er(e,r,this.points,s,o,a-l,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[s-c,o-f,s-c,o,s+c,o,s+c,o-f];return!!(It(e,r,d)||fn(e,r,l,l,s+a/2-u,o+i/2-u,n)||fn(e,r,l,l,s-a/2+u,o+i/2-u,n))}}};Sr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Dt(3,0)),this.generateRoundPolygon("round-triangle",Dt(3,0)),this.generatePolygon("rectangle",Dt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Dt(5,0)),this.generateRoundPolygon("round-pentagon",Dt(5,0)),this.generatePolygon("hexagon",Dt(6,0)),this.generateRoundPolygon("round-hexagon",Dt(6,0)),this.generatePolygon("heptagon",Dt(7,0)),this.generateRoundPolygon("round-heptagon",Dt(7,0)),this.generatePolygon("octagon",Dt(8,0)),this.generateRoundPolygon("round-octagon",Dt(8,0));var n=new Array(20);{var a=el(5,0),i=el(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=Zp(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,l)}};var fi={};fi.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};fi.redraw=function(t){t=t||Gp();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};fi.beforeRender=function(t,e){if(!this.destroyed){e==null&&Ze("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var xv=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};fi.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){xv(t,!0,a);var i=Tr();t.render(t.renderOptions);var s=t.lastDrawTime=Tr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else xv(t,!1,a);t.skipFrame=!1,ns(r)}};ns(r)}};var XT=function(e){this.init(e)},Zg=XT,va=Zg.prototype;va.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];va.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var l=a.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Oe("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ne(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};va.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};va.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};va.isHeadless=function(){return!1};[dc,Yg,Xg,da,Sr,fi].forEach(function(t){he(va,t)});var Su=1e3/60,jg={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=si(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(l,c){var f=Tr(),d=a.averageRedrawTime,v=a.lastRedrawTime,h=[],g=a.cy.extent(),p=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var m=Tr(),y=m-f,b=m-c;if(v<Su){var w=Su-(l?d:0);if(b>=e.deqFastCost*w)break}else if(l){if(y>=e.deqCost*v||y>=e.deqAvgCost*d)break}else if(b>=e.deqNoDrawCost*Su)break;var T=e.deq(n,p,g);if(T.length>0)for(var E=0;E<T.length;E++)h.push(T[E]);else break}h.length>0&&(e.onDeqd(n,h),!l&&e.shouldRedraw(n,h,p,g)&&i())},o=e.priority||jl;a.beforeRender(s,o(n))}}}},ZT=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:as;Wr(this,t),this.idsByKey=new gr,this.keyForId=new gr,this.cachesByLvl=new gr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Gr(t,[{key:"getIdsFor",value:function(r){r==null&&Ze("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new ua,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new gr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),Tv=25,Ri=50,Xi=-4,hl=3,Qg=7.99,jT=8,QT=1024,JT=1024,eE=1024,tE=.2,rE=.8,nE=10,aE=.15,iE=.1,sE=.9,oE=.9,uE=100,lE=1,Nn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},cE=xt({getKey:null,doesEleInvalidateKey:as,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Up,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),_a=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=cE(r);he(n,a),n.lookup=new ZT(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},ft=_a.prototype;ft.reasons=Nn;ft.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};ft.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};ft.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new oi(function(r,n){return n.reqs-r.reqs});return e};ft.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};ft.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Jl(o*r))),n<Xi)n=Xi;else if(o>=Qg||n>hl)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,d=s.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,d))return null;var v=u.get(t,n);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;var h;if(c<=Tv?h=Tv:c<=Ri?h=Ri:h=Math.ceil(c/Ri)*Ri,c>eE||f>JT)return null;var g=i.getTextureQueue(h),p=g[g.length-2],m=function(){return i.recycleTexture(h,f)||i.addTexture(h,f)};p||(p=g[g.length-1]),p||(p=m()),p.width-p.usedWidth<f&&(p=m());for(var y=function(M){return M&&M.scaledLabelShown===d},b=a&&a===Nn.dequeue,w=a&&a===Nn.highQuality,T=a&&a===Nn.downscale,E,x=n+1;x<=hl;x++){var C=u.get(t,x);if(C){E=C;break}}var S=E&&E.level===n+1?E:null,D=function(){p.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,p.usedWidth,0,f,c)};if(p.context.setTransform(1,0,0,1,0,0),p.context.clearRect(p.usedWidth,0,f,h),y(S))D();else if(y(E))if(w){for(var _=E.level;_>n;_--)S=i.getElement(t,e,r,_,Nn.downscale);D()}else return i.queueElement(t,E.level-1),E;else{var k;if(!b&&!w&&!T)for(var A=n-1;A>=Xi;A--){var B=u.get(t,A);if(B){k=B;break}}if(y(k))return i.queueElement(t,n),k;p.context.translate(p.usedWidth,0),p.context.scale(l,l),this.drawElement(p.context,t,e,d,!1),p.context.scale(1/l,1/l),p.context.translate(-p.usedWidth,0)}return v={x:p.usedWidth,texture:p,level:n,scale:l,width:f,height:c,scaledLabelShown:d},p.usedWidth+=Math.ceil(f+jT),p.eleCaches.push(v),u.set(t,n,v),i.checkTextureFullness(p),v};ft.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};ft.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Xi;i<=hl;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};ft.checkTextureUtility=function(t){t.invalidatedWidth>=tE*t.width&&this.retireTexture(t)};ft.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>rE&&t.fullnessChecks>=nE?Vr(r,t):t.fullnessChecks++};ft.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Vr(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}Ql(i);var u=e.getRetiredTextureQueue(r);u.push(t)};ft.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(QT,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};ft.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Ql(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Vr(a,s),n.push(s),s}};ft.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};ft.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<lE&&r.size()>0;s++){var o=r.pop(),u=o.key,l=o.eles[0],c=i.hasCache(l,o.level);if(n[u]=null,c)continue;a.push(o);var f=e.getBoundingBox(l);e.getElement(l,f,t,o.level,Nn.dequeue)}return a};ft.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Zl,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};ft.onDequeue=function(t){this.onDequeues.push(t)};ft.offDequeue=function(t){Vr(this.onDequeues,t)};ft.setupDequeueing=jg.setupDequeueing({deqRedrawThreshold:uE,deqCost:aE,deqAvgCost:iE,deqNoDrawCost:sE,deqFastCost:oE,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(tc(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var fE=1,Ra=-4,ds=2,dE=3.99,vE=50,hE=50,pE=.15,gE=.1,mE=.9,yE=.9,bE=1,Ev=250,wE=4e3*4e3,Cv=32767,xE=!0,Jg=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Tr()-2*Ev,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=si(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},hE),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=Ev?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,u){return u.reqs-o.reqs};r.layersQueue=new oi(i),r.setupDequeueing()},Tt=Jg.prototype,Sv=0,TE=Math.pow(2,53)-1;Tt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:Sv=++Sv%TE,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(r,r),o.translate(u,l),s};Tt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Jl(s*e)),r<Ra)r=Ra;else if(s>=dE||r>ds)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),c=u[r]=u[r]||[],f,d=n.levelIsComplete(r,t),v,h=function(){var D=function(R){if(n.validateLayersElesOrdering(R,t),n.levelIsComplete(R,t))return v=u[R],!0},_=function(R){if(!v)for(var M=r+R;Ra<=M&&M<=ds&&!D(M);M+=R);};_(1),_(-1);for(var k=c.length-1;k>=0;k--){var A=c[k];A.invalid&&Vr(c,A)}};if(!d)h();else return c;var g=function(){if(!f){f=Ft();for(var D=0;D<t.length;D++)Yp(f,t[D].boundingBox())}return f},p=function(D){D=D||{};var _=D.after;g();var k=Math.ceil(f.w*l),A=Math.ceil(f.h*l);if(k>Cv||A>Cv)return null;var B=k*A;if(B>wE)return null;var R=n.makeLayer(f,r);if(_!=null){var M=c.indexOf(_)+1;c.splice(M,0,R)}else(D.insert===void 0||D.insert)&&c.unshift(R);return R};if(n.skipping&&!o)return null;for(var m=null,y=t.length/fE,b=!o,w=0;w<t.length;w++){var T=t[w],E=T._private.rscratch,x=E.imgLayerCaches=E.imgLayerCaches||{},C=x[r];if(C){m=C;continue}if((!m||m.eles.length>=y||!T1(m.bb,T.boundingBox()))&&(m=p({insert:!0,after:m}),!m))return null;v||b?n.queueLayer(m,T):n.drawEleInLayer(m,T,r,e),m.eles.push(T),x[r]=m}return v||(b?null:c)};Tt.getEleLevelForLayerLevel=function(t,e){return t};Tt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,xE),i.setImgSmoothing(s,!0))};Tt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};Tt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};Tt.updateElementsInLayers=function(t,e){for(var r=this,n=ri(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=Ra;l<=ds;l++){var c=u[l];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,s,i))}};Tt.haveLayers=function(){for(var t=this,e=!1,r=Ra;r<=ds;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Tt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Tr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};Tt.invalidateLayer=function(t){if(this.lastInvalidationTime=Tr(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Vr(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Tt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};Tt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Tt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Tt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<bE&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Tt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};Tt.requestRedraw=si(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Tt.setupDequeueing=jg.setupDequeueing({deqRedrawThreshold:vE,deqCost:pE,deqAvgCost:gE,deqNoDrawCost:mE,deqFastCost:yE,deq:function(e,r){return e.dequeue(r)},onDeqd:jl,shouldRedraw:Up,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var em={},Pv;function EE(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function CE(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function _v(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function SE(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var u=i[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function PE(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}em.arrowShapeImpl=function(t){return(Pv||(Pv={polygon:EE,"triangle-backcurve":CE,"triangle-tee":_v,"circle-triangle":SE,"triangle-cross":_v,circle:PE}))[t]};var dr={};dr.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};dr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};dr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};dr.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=r.getElement(e,l,n,a,i);if(c!=null){var f=o(u,e);if(f===0)return;var d=s(u,e),v=l.x1,h=l.y1,g=l.w,p=l.h,m,y,b,w,T;if(d!==0){var E=r.getRotationPoint(e);b=E.x,w=E.y,t.translate(b,w),t.rotate(d),T=u.getImgSmoothing(t),T||u.setImgSmoothing(t,!0);var x=r.getRotationOffset(e);m=x.x,y=x.y}else m=v,y=h;var C;f!==1&&(C=t.globalAlpha,t.globalAlpha=C*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,m,y,g,p),f!==1&&(t.globalAlpha=C),d!==0&&(t.rotate(-d),t.translate(-b,-w),T||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var _E=function(){return 0},DE=function(e,r){return e.getTextAngle(r,null)},AE=function(e,r){return e.getTextAngle(r,"source")},kE=function(e,r){return e.getTextAngle(r,"target")},BE=function(e,r){return r.effectiveOpacity()},Pu=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};dr.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,c=o.slbTxrCache,f=o.tlbTxrCache,d=e.boundingBox(),v=i===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||tc(d,n))){var h=e.isEdge(),g=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,a,v,_E,BE),(!h||!g)&&s.drawCachedElementPortion(t,e,l,r,a,v,DE,Pu),h&&!g&&(s.drawCachedElementPortion(t,e,c,r,a,v,AE,Pu),s.drawCachedElementPortion(t,e,f,r,a,v,kE,Pu)),s.drawElementOverlay(t,e)}};dr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};dr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};dr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};dr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],u=o.bb;u.w===0||u.h===0||t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var Pr={};Pr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,v=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,g=e.pstyle("line-outline-width").value,p=e.pstyle("line-outline-color").value,m=l*c,y=l*c,b=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;f==="straight-triangle"?(s.eleStrokeStyle(t,e,R),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=v,t.lineCap=h,s.eleStrokeStyle(t,e,R),s.drawEdgePath(e,t,o.allpts,d),t.lineCap="butt")},w=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;if(t.lineWidth=v+g,t.lineCap=h,g>0)s.colorStrokeStyle(t,p[0],p[1],p[2],R);else{t.lineCap="butt";return}f==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,d),t.lineCap="butt")},T=function(){a&&s.drawEdgeOverlay(t,e)},E=function(){a&&s.drawEdgeUnderlay(t,e)},x=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;s.drawArrowheads(t,e,R)},C=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var S=e.pstyle("ghost").value==="yes";if(S){var D=e.pstyle("ghost-offset-x").pfValue,_=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,A=m*k;t.translate(D,_),b(A),x(A),t.translate(-D,-_)}else w();E(),b(),x(),T(),C(),r&&t.translate(u.x1,u.y1)}};var tm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};Pr.drawEdgeOverlay=tm("overlay");Pr.drawEdgeUnderlay=tm("underlay");Pr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var f=r.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=f,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var v=2;v+3<r.length;v+=4)e.quadraticCurveTo(r[v],r[v+1],r[v+2],r[v+3]);break;case"straight":case"haystack":for(var h=2;h+1<r.length;h+=2)e.lineTo(r[h],r[h+1]);break;case"segments":if(a.isRound){var g=Vt(a.roundCorners),p;try{for(g.s();!(p=g.n()).done;){var m=p.value;Ug(e,m)}}catch(b){g.e(b)}finally{g.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var y=2;y+1<r.length;y+=2)e.lineTo(r[y],r[y+1]);break}e=i,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};Pr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};Pr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};Pr.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(r+"-arrow-width"),v=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(v*=f);var h=e.pstyle("opacity").value;s===void 0&&(s=h);var g=t.globalCompositeOperation;(s!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,l,f,u,v,n,a,i),t.globalCompositeOperation=g);var p=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,p[0],p[1],p[2],s),o.colorStrokeStyle(t,p[0],p[1],p[2],s),o.drawArrowShape(e,t,c,f,u,v,n,a,i)}}};Pr.drawArrowShape=function(t,e,r,n,a,i,s,o,u){var l=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,d,v=e,h={x:s,y:o},g=t.pstyle("arrow-scale").value,p=this.getArrowWidth(n,g),m=l.arrowShapes[a];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],b=hn(a),w=y[b];w!=null?(d=e=w,f=!0):(d=e=new Path2D,y[b]=d)}f||(e.beginPath&&e.beginPath(),c?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,p,u,h,n),e.closePath&&e.closePath()),e=v,c&&(e.translate(s,o),e.rotate(u),e.scale(p,p)),(r==="filled"||r==="both")&&(c?e.fill(d):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?p:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/p,1/p),e.rotate(-u),e.translate(-s,-o))};var pc={};pc.safeDrawImage=function(t,e,r,n,a,i,s,o,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{t.drawImage(e,r,n,a,i,s,o,u,l)}catch(c){Oe(c)}};pc.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,u=s.y,l=r.cy().style(),c=l.getIndexedStyle.bind(l),f=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),v=r.width(),h=r.height(),g=r.padding()*2,p=v+(c(r,"background-width-relative-to","value",n)==="inner"?0:g),m=h+(c(r,"background-height-relative-to","value",n)==="inner"?0:g),y=r._private.rscratch,b=c(r,"background-clip","value",n),w=b==="node",T=c(r,"background-image-opacity","value",n)*a,E=c(r,"background-image-smoothing","value",n),x=r.pstyle("corner-radius").value;x!=="auto"&&(x=r.pstyle("corner-radius").pfValue);var C=e.width||e.cachedW,S=e.height||e.cachedH;(C==null||S==null)&&(document.body.appendChild(e),C=e.cachedW=e.width||e.offsetWidth,S=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var D=C,_=S;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?D=c(r,"background-width","pfValue",n)*p:D=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?_=c(r,"background-height","pfValue",n)*m:_=c(r,"background-height","pfValue",n)),!(D===0||_===0)){if(f==="contain"){var k=Math.min(p/D,m/_);D*=k,_*=k}else if(f==="cover"){var k=Math.max(p/D,m/_);D*=k,_*=k}var A=o-p/2,B=c(r,"background-position-x","units",n),R=c(r,"background-position-x","pfValue",n);B==="%"?A+=(p-D)*R:A+=R;var M=c(r,"background-offset-x","units",n),L=c(r,"background-offset-x","pfValue",n);M==="%"?A+=(p-D)*L:A+=L;var I=u-m/2,N=c(r,"background-position-y","units",n),$=c(r,"background-position-y","pfValue",n);N==="%"?I+=(m-_)*$:I+=$;var O=c(r,"background-offset-y","units",n),F=c(r,"background-offset-y","pfValue",n);O==="%"?I+=(m-_)*F:I+=F,y.pathCache&&(A-=o,I-=u,o=0,u=0);var G=t.globalAlpha;t.globalAlpha=T;var X=i.getImgSmoothing(t),j=!1;if(E==="no"&&X?(i.setImgSmoothing(t,!1),j=!0):E==="yes"&&!X&&(i.setImgSmoothing(t,!0),j=!0),d==="no-repeat")w&&(t.save(),y.pathCache?t.clip(y.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,p,m,x,y),t.clip())),i.safeDrawImage(t,e,0,0,C,S,A,I,D,_),w&&t.restore();else{var Y=t.createPattern(e,d);t.fillStyle=Y,i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,p,m,x,y),t.translate(A,I),t.fill(),t.translate(-A,-I)}t.globalAlpha=G,j&&i.setImgSmoothing(t,X)}};var En={};En.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Jl(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};En.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var v=!r,h;r&&(h=r,t.translate(-h.x1,-h.y1)),a==null?(s.drawText(t,e,null,v,i),e.isEdge()&&(s.drawText(t,e,"source",v,i),s.drawText(t,e,"target",v,i))):s.drawText(t,e,a,v,i),r&&t.translate(h.x1,h.y1)};En.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};En.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],o),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function _u(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),s?t.stroke():t.fill()}En.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=Lt(a,"labelAngle",e);r=t.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};En.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Lt(s,"labelX",r),l=Lt(s,"labelY",r),c,f,d=this.getLabelText(e,r);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,a);var v=r?r+"-":"",h=Lt(s,"labelWidth",r),g=Lt(s,"labelHeight",r),p=e.pstyle(v+"text-margin-x").pfValue,m=e.pstyle(v+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;y&&(b="center",w="center"),u+=p,l+=m;var T;switch(n?T=this.getTextAngle(e,r):T=0,T!==0&&(c=u,f=l,t.translate(c,f),t.rotate(T),u=0,l=0),w){case"top":break;case"center":l+=g/2;break;case"bottom":l+=g;break}var E=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,C=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue,D=e.pstyle("text-background-shape").strValue,_=D.indexOf("round")===0,k=2;if(E>0||C>0&&x>0){var A=u-S;switch(b){case"left":A-=h;break;case"center":A-=h/2;break}var B=l-g-S,R=h+2*S,M=g+2*S;if(E>0){var L=t.fillStyle,I=e.pstyle("text-background-color").value;t.fillStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+E*o+")",_?_u(t,A,B,R,M,k):t.fillRect(A,B,R,M),t.fillStyle=L}if(C>0&&x>0){var N=t.strokeStyle,$=t.lineWidth,O=e.pstyle("text-border-color").value,F=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+x*o+")",t.lineWidth=C,t.setLineDash)switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=C/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(_?_u(t,A,B,R,M,k,"stroke"):t.strokeRect(A,B,R,M),F==="double"){var G=C/2;_?_u(t,A+G,B+G,R-G*2,M-G*2,k,"stroke"):t.strokeRect(A+G,B+G,R-G*2,M-G*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=$,t.strokeStyle=N}}var X=2*e.pstyle("text-outline-width").pfValue;if(X>0&&(t.lineWidth=X),e.pstyle("text-wrap").value==="wrap"){var j=Lt(s,"labelWrapCachedLines",r),Y=Lt(s,"labelLineHeight",r),ee=h/2,re=this.getLabelJustification(e);switch(re==="auto"||(b==="left"?re==="left"?u+=-h:re==="center"&&(u+=-ee):b==="center"?re==="left"?u+=-ee:re==="right"&&(u+=ee):b==="right"&&(re==="center"?u+=ee:re==="right"&&(u+=h))),w){case"top":l-=(j.length-1)*Y;break;case"center":case"bottom":l-=(j.length-1)*Y;break}for(var Z=0;Z<j.length;Z++)X>0&&t.strokeText(j[Z],u,l),t.fillText(j[Z],u,l),l+=Y}else X>0&&t.strokeText(d,u,l),t.fillText(d,u,l);T!==0&&(t.rotate(-T),t.translate(-c,-f))}}};var Yr={};Yr.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,c=l.rscratch,f=e.position();if(!(!ne(f.x)||!ne(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,v=s.usePaths(),h,g=!1,p=e.padding();o=e.width()+2*p,u=e.height()+2*p;var m;r&&(m=r,t.translate(-m.x1,-m.y1));for(var y=e.pstyle("background-image"),b=y.value,w=new Array(b.length),T=new Array(b.length),E=0,x=0;x<b.length;x++){var C=b[x],S=w[x]=C!=null&&C!=="none";if(S){var D=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);E++,T[x]=s.getCachedImage(C,D,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var _=e.pstyle("background-blacken").value,k=e.pstyle("border-width").pfValue,A=e.pstyle("background-opacity").value*d,B=e.pstyle("border-color").value,R=e.pstyle("border-style").value,M=e.pstyle("border-join").value,L=e.pstyle("border-cap").value,I=e.pstyle("border-position").value,N=e.pstyle("border-dash-pattern").pfValue,$=e.pstyle("border-dash-offset").pfValue,O=e.pstyle("border-opacity").value*d,F=e.pstyle("outline-width").pfValue,G=e.pstyle("outline-color").value,X=e.pstyle("outline-style").value,j=e.pstyle("outline-opacity").value*d,Y=e.pstyle("outline-offset").value,ee=e.pstyle("corner-radius").value;ee!=="auto"&&(ee=e.pstyle("corner-radius").pfValue);var re=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;s.eleFillStyle(t,e,le)},Z=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O;s.colorStrokeStyle(t,B[0],B[1],B[2],le)},V=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j;s.colorStrokeStyle(t,G[0],G[1],G[2],le)},z=function(le,Q,P,q){var H=s.nodePathCache=s.nodePathCache||[],W=$p(P==="polygon"?P+","+q.join(","):P,""+Q,""+le,""+ee),K=H[W],ue,J=!1;return K!=null?(ue=K,J=!0,c.pathCache=ue):(ue=new Path2D,H[W]=c.pathCache=ue),{path:ue,cacheHit:J}},U=e.pstyle("shape").strValue,te=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(f.x,f.y);var ae=z(o,u,U,te);h=ae.path,g=ae.cacheHit}var we=function(){if(!g){var le=f;v&&(le={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(h||t,le.x,le.y,o,u,ee,c)}v?t.fill(h):t.fill()},Ge=function(){for(var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,P=l.backgrounding,q=0,H=0;H<T.length;H++){var W=e.cy().style().getIndexedStyle(e,"background-image-containment","value",H);if(Q&&W==="over"||!Q&&W==="inside"){q++;continue}w[H]&&T[H].complete&&!T[H].error&&(q++,s.drawInscribedImage(t,T[H],e,H,le))}l.backgrounding=q!==E,P!==l.backgrounding&&e.updateStyle(!1)},Ve=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasPie(e)&&(s.drawPie(t,e,Q),le&&(v||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,u,ee,c)))},se=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasStripe(e)&&(t.save(),v?t.clip(c.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,u,ee,c),t.clip()),s.drawStripe(t,e,Q),t.restore(),le&&(v||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,u,ee,c)))},oe=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,Q=(_>0?_:-_)*le,P=_>0?0:255;_!==0&&(s.colorFillStyle(t,P,P,P,Q),v?t.fill(h):t.fill())},de=function(){if(k>0){if(t.lineWidth=k,t.lineCap=L,t.lineJoin=M,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(N),t.lineDashOffset=$;break;case"solid":case"double":t.setLineDash([]);break}if(I!=="center"){if(t.save(),t.lineWidth*=2,I==="inside")v?t.clip(h):t.clip();else{var le=new Path2D;le.rect(-o/2-k,-u/2-k,o+2*k,u+2*k),le.addPath(h),t.clip(le,"evenodd")}v?t.stroke(h):t.stroke(),t.restore()}else v?t.stroke(h):t.stroke();if(R==="double"){t.lineWidth=k/3;var Q=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(h):t.stroke(),t.globalCompositeOperation=Q}t.setLineDash&&t.setLineDash([])}},pe=function(){if(F>0){if(t.lineWidth=F,t.lineCap="butt",t.setLineDash)switch(X){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var le=f;v&&(le={x:0,y:0});var Q=s.getNodeShape(e),P=k;I==="inside"&&(P=0),I==="outside"&&(P*=2);var q=(o+P+(F+Y))/o,H=(u+P+(F+Y))/u,W=o*q,K=u*H,ue=s.nodeShapes[Q].points,J;if(v){var ce=z(W,K,Q,ue);J=ce.path}if(Q==="ellipse")s.drawEllipsePath(J||t,le.x,le.y,W,K);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(Q)){var Ee=0,_e=0,ge=0;Q==="round-diamond"?Ee=(P+Y+F)*1.4:Q==="round-heptagon"?(Ee=(P+Y+F)*1.075,ge=-(P/2+Y+F)/35):Q==="round-hexagon"?Ee=(P+Y+F)*1.12:Q==="round-pentagon"?(Ee=(P+Y+F)*1.13,ge=-(P/2+Y+F)/15):Q==="round-tag"?(Ee=(P+Y+F)*1.12,_e=(P/2+F+Y)*.07):Q==="round-triangle"&&(Ee=(P+Y+F)*(Math.PI/2),ge=-(P+Y/2+F)/Math.PI),Ee!==0&&(q=(o+Ee)/o,W=o*q,["round-hexagon","round-tag"].includes(Q)||(H=(u+Ee)/u,K=u*H)),ee=ee==="auto"?jp(W,K):ee;for(var Ce=W/2,be=K/2,Te=ee+(P+F+Y)/2,Fe=new Array(ue.length/2),nt=new Array(ue.length/2),mt=0;mt<ue.length/2;mt++)Fe[mt]={x:le.x+_e+Ce*ue[mt*2],y:le.y+ge+be*ue[mt*2+1]};var dt,et,yt,st,Bt=Fe.length;for(et=Fe[Bt-1],dt=0;dt<Bt;dt++)yt=Fe[dt%Bt],st=Fe[(dt+1)%Bt],nt[dt]=vc(et,yt,st,Te),et=yt,yt=st;s.drawRoundPolygonPath(J||t,le.x+_e,le.y+ge,o*q,u*H,ue,nt)}else if(["roundrectangle","round-rectangle"].includes(Q))ee=ee==="auto"?Fr(W,K):ee,s.drawRoundRectanglePath(J||t,le.x,le.y,W,K,ee+(P+F+Y)/2);else if(["cutrectangle","cut-rectangle"].includes(Q))ee=ee==="auto"?rc():ee,s.drawCutRectanglePath(J||t,le.x,le.y,W,K,null,ee+(P+F+Y)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(Q))ee=ee==="auto"?Fr(W,K):ee,s.drawBottomRoundRectanglePath(J||t,le.x,le.y,W,K,ee+(P+F+Y)/2);else if(Q==="barrel")s.drawBarrelPath(J||t,le.x,le.y,W,K);else if(Q.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(Q)){var tr=(P+F+Y)/o;ue=is(ss(ue,tr)),s.drawPolygonPath(J||t,le.x,le.y,o,u,ue)}else{var _r=(P+F+Y)/o;ue=is(ss(ue,-_r)),s.drawPolygonPath(J||t,le.x,le.y,o,u,ue)}if(v?t.stroke(J):t.stroke(),X==="double"){t.lineWidth=P/3;var vr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(J):t.stroke(),t.globalCompositeOperation=vr}t.setLineDash&&t.setLineDash([])}},ve=function(){a&&s.drawNodeOverlay(t,e,f,o,u)},ye=function(){a&&s.drawNodeUnderlay(t,e,f,o,u)},xe=function(){s.drawElementText(t,e,null,n)},De=e.pstyle("ghost").value==="yes";if(De){var ze=e.pstyle("ghost-offset-x").pfValue,Qe=e.pstyle("ghost-offset-y").pfValue,Re=e.pstyle("ghost-opacity").value,rt=Re*d;t.translate(ze,Qe),V(),pe(),re(Re*A),we(),Ge(rt,!0),Z(Re*O),de(),Ve(_!==0||k!==0),se(_!==0||k!==0),Ge(rt,!1),oe(rt),t.translate(-ze,-Qe)}v&&t.translate(-f.x,-f.y),ye(),v&&t.translate(f.x,f.y),V(),pe(),re(),we(),Ge(d,!0),Z(),de(),Ve(_!==0||k!==0),se(_!==0||k!==0),Ge(d,!1),oe(),v&&t.translate(-f.x,-f.y),xe(),ve(),r&&t.translate(m.x1,m.y1)}};var rm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||s==null){var v=n.padding();i=n.width()+2*v,s=n.height()+2*v}o.colorFillStyle(r,c[0],c[1],c[2],l),o.nodeShapes[f].draw(r,a.x,a.y,i+u*2,s+u*2,d),r.fill()}}}};Yr.drawNodeOverlay=rm("overlay");Yr.drawNodeUnderlay=rm("underlay");Yr.hasPie=function(t){return t=t[0],t._private.hasPie};Yr.hasStripe=function(t){return t=t[0],t._private.hasStripe};Yr.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),d=Math.min(c,f)/2,v,h=0,g=this.usePaths();if(g&&(u=0,l=0),i.units==="%"?d=d*i.pfValue:i.pfValue!==void 0&&(d=i.pfValue/2),s.units==="%"?v=d*s.pfValue:s.pfValue!==void 0&&(v=s.pfValue/2),!(v>=d))for(var p=1;p<=a.pieBackgroundN;p++){var m=e.pstyle("pie-"+p+"-background-size").value,y=e.pstyle("pie-"+p+"-background-color").value,b=e.pstyle("pie-"+p+"-background-opacity").value*r,w=m/100;w+h>1&&(w=1-h);var T=1.5*Math.PI+2*Math.PI*h;T+=o;var E=2*Math.PI*w,x=T+E;m===0||h>=1||h+w>1||(v===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,d,T,x),t.closePath()):(t.beginPath(),t.arc(u,l,d,T,x),t.arc(u,l,v,x,T,!0),t.closePath()),this.colorFillStyle(t,y[0],y[1],y[2],b),t.fill(),h+=w)}};Yr.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),u=e.height(),l=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,d=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var v=o,h=u;d.units==="%"?(v=v*d.pfValue,h=h*d.pfValue):d.pfValue!==void 0&&(v=d.pfValue,h=d.pfValue),c&&(i=0,s=0),s-=v/2,i-=h/2;for(var g=1;g<=a.stripeBackgroundN;g++){var p=e.pstyle("stripe-"+g+"-background-size").value,m=e.pstyle("stripe-"+g+"-background-color").value,y=e.pstyle("stripe-"+g+"-background-opacity").value*r,b=p/100;b+l>1&&(b=1-l),!(p===0||l>=1||l+b>1)&&(t.beginPath(),t.rect(i,s+h*l,v,h*b),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],y),t.fill(),l+=b)}t.restore()};var kt={},RE=100;kt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};kt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};kt.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),d=pn(l,f),v=pn(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,v))}else{var h=s?{x:0,y:0}:r.position(),g=r.paddedWidth(),p=r.paddedHeight();i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,p))}else if(r.isEdge()){var m=r.sourceEndpoint(),y=r.targetEndpoint();i=t.createLinearGradient(m.x,m.y,y.x,y.y)}else{var b=s?{x:0,y:0}:r.position(),w=r.paddedWidth(),T=r.paddedHeight(),E=w/2,x=T/2,C=r.pstyle("background-gradient-direction").value;switch(C){case"to-bottom":i=t.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":i=t.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":i=t.createLinearGradient(b.x+E,b.y,b.x-E,b.y);break;case"to-right":i=t.createLinearGradient(b.x-E,b.y,b.x+E,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-E,b.y-x,b.x+E,b.y+x);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-E,b.y+x,b.x+E,b.y-x);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+E,b.y-x,b.x-E,b.y+x);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+E,b.y+x,b.x-E,b.y-x);break}}if(!i)return null;for(var S=u.length===o.length,D=o.length,_=0;_<D;_++)i.addColorStop(S?u[_]:_/(D-1),"rgba("+o[_][0]+","+o[_][1]+","+o[_][2]+","+a+")");return i};kt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};kt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};kt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};kt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};kt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};kt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};kt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=a*s,l=i*s,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=r.canvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=r.bufferCanvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,s<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=s}};kt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};kt.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};kt.render=function(t){var e=this;t=t||Gp();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),d=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,v=e.motionBlurPxRatio,h=r.hasCompoundNodes(),g=e.hoverData.draggingEles,p=!!(e.hoverData.selecting||e.touchData.selecting);d=d&&!n&&e.motionBlurEnabled&&!p;var m=d;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),d&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(m=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var y=r.style(),b=r.zoom(),w=s!==void 0?s:b,T=r.pan(),E={x:T.x,y:T.y},x={zoom:b,pan:{x:T.x,y:T.y}},C=e.prevViewport,S=C===void 0||x.zoom!==C.zoom||x.pan.x!==C.pan.x||x.pan.y!==C.pan.y;!S&&!(g&&!h)&&(e.motionBlurPxRatio=1),o&&(E=o),w*=u,E.x*=u,E.y*=u;var D=e.getCachedZSortedEles();function _(Z,V,z,U,te){var ae=Z.globalCompositeOperation;Z.globalCompositeOperation="destination-out",e.colorFillStyle(Z,255,255,255,e.motionBlurTransparency),Z.fillRect(V,z,U,te),Z.globalCompositeOperation=ae}function k(Z,V){var z,U,te,ae;!e.clearingMotionBlur&&(Z===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Z===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(z={x:T.x*v,y:T.y*v},U=b*v,te=e.canvasWidth*v,ae=e.canvasHeight*v):(z=E,U=w,te=e.canvasWidth,ae=e.canvasHeight),Z.setTransform(1,0,0,1,0,0),V==="motionBlur"?_(Z,0,0,te,ae):!n&&(V===void 0||V)&&Z.clearRect(0,0,te,ae),a||(Z.translate(z.x,z.y),Z.scale(U,U)),o&&Z.translate(o.x,o.y),s&&Z.scale(s,s)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var A=e.data.bufferContexts[e.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var x=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var B=l.contexts[e.NODE],R=e.textureCache.texture,x=e.textureCache.viewport;B.setTransform(1,0,0,1,0,0),d?_(B,0,0,x.width,x.height):B.clearRect(0,0,x.width,x.height);var M=y.core("outside-texture-bg-color").value,L=y.core("outside-texture-bg-opacity").value;e.colorFillStyle(B,M[0],M[1],M[2],L),B.fillRect(0,0,x.width,x.height);var b=r.zoom();k(B,!1),B.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u),B.drawImage(R,x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var I=r.extent(),N=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),$=e.hideEdgesOnViewport&&N,O=[];if(O[e.NODE]=!c[e.NODE]&&d&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,O[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),O[e.DRAG]=!c[e.DRAG]&&d&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,O[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||O[e.NODE]){var F=d&&!O[e.NODE]&&v!==1,B=n||(F?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),G=d&&!F?"motionBlur":void 0;k(B,G),$?e.drawCachedNodes(B,D.nondrag,u,I):e.drawLayeredElements(B,D.nondrag,u,I),e.debug&&e.drawDebugPoints(B,D.nondrag),!a&&!d&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||O[e.DRAG])){var F=d&&!O[e.DRAG]&&v!==1,B=n||(F?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);k(B,d&&!F?"motionBlur":void 0),$?e.drawCachedNodes(B,D.drag,u,I):e.drawCachedElements(B,D.drag,u,I),e.debug&&e.drawDebugPoints(B,D.drag),!a&&!d&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,k),d&&v!==1){var X=l.contexts[e.NODE],j=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Y=l.contexts[e.DRAG],ee=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],re=function(V,z,U){V.setTransform(1,0,0,1,0,0),U||!m?V.clearRect(0,0,e.canvasWidth,e.canvasHeight):_(V,0,0,e.canvasWidth,e.canvasHeight);var te=v;V.drawImage(z,0,0,e.canvasWidth*te,e.canvasHeight*te,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||O[e.NODE])&&(re(X,j,O[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||O[e.DRAG])&&(re(Y,ee,O[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=x,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),d&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},RE)),n||r.emit("render")};var wa;kt.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,u=a.canvasNeedsRedraw,l=t.forcedContext;if(r.showFps||!s&&u[r.SELECT_BOX]&&!o){var c=l||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),d=i.core("selection-box-border-width").value/f;c.lineWidth=d,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),v=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(v.x,v.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var h=r.lastRedrawTime;if(r.showFps&&h){h=Math.round(h);var g=Math.round(1e3/h),p="1 frame = "+h+" ms = "+g+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!wa){var m=c.measureText(p);wa=m.actualBoundingBoxAscent}c.fillText(p,0,wa);var y=60;c.strokeRect(0,wa+10,250,20),c.fillRect(0,wa+10,250*Math.min(g/y,1),20)}o||(u[r.SELECT_BOX]=!1)}};function Dv(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function ME(t,e,r){var n=Dv(t,t.VERTEX_SHADER,e),a=Dv(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function LE(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function gc(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function IE(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function OE(t,e,r,n,a){var i=n*r+e.x,s=a*r+e.y;return s=Math.round(t.canvasHeight-s),[i,s]}function VE(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function FE(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Jr(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function Rn(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function NE(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function zE(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function nm(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function am(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function qE(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function $E(t,e,r,n){var a=nm(t,e),i=ut(a,2),s=i[0],o=i[1],u=am(t,o,n),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),o===t.FLOAT?t.vertexAttribPointer(r,s,o,!1,0,0):o===t.INT&&t.vertexAttribIPointer(r,s,o,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),l}function ar(t,e,r,n){var a=nm(t,r),i=ut(a,3),s=i[0],o=i[1],u=i[2],l=am(t,o,e*s),c=s*u,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),o===t.FLOAT?t.vertexAttribPointer(n,s,o,!1,c,0):o===t.INT&&t.vertexAttribIPointer(n,s,o,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var d=new Array(e),v=0;v<e;v++)d[v]=qE(t,o,l,c,s,v);return f.dataArray=l,f.stride=c,f.size=s,f.getView=function(h){return d[h]},f.setPoint=function(h,g,p){var m=d[h];m[0]=g,m[1]=p},f.bufferSubData=function(h){t.bindBuffer(t.ARRAY_BUFFER,f),h?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,h*s):t.bufferSubData(t.ARRAY_BUFFER,0,l)},f}function UE(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=r+l;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,l*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(f){return i[f]},u.setData=function(f,d){i[d].set(f,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function HE(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var Av=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Du(){var t=new Av(9);return Av!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function kv(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function WE(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=r[0],v=r[1],h=r[2],g=r[3],p=r[4],m=r[5],y=r[6],b=r[7],w=r[8];return t[0]=d*n+v*s+h*l,t[1]=d*a+v*o+h*c,t[2]=d*i+v*u+h*f,t[3]=g*n+p*s+m*l,t[4]=g*a+p*o+m*c,t[5]=g*i+p*u+m*f,t[6]=y*n+b*s+w*l,t[7]=y*a+b*o+w*c,t[8]=y*i+b*u+w*f,t}function Zi(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=r[0],v=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=d*n+v*s+l,t[7]=d*a+v*o+c,t[8]=d*i+v*u+f,t}function Bv(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=Math.sin(r),v=Math.cos(r);return t[0]=v*n+d*s,t[1]=v*a+d*o,t[2]=v*i+d*u,t[3]=v*s-d*n,t[4]=v*o-d*a,t[5]=v*u-d*i,t[6]=l,t[7]=c,t[8]=f,t}function pl(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function GE(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var KE=function(){function t(e,r,n,a){Wr(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Gr(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,s=this.texSize,o=i/a,u=n*o,l=a*o;return u>s&&(o=s/n,u=n*o,l=a*o),{scale:o,texW:u,texH:l}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,d=l.texH,v=function(b,w){if(a&&w){var T=w.context,E=b.x,x=b.row,C=E,S=u*x;T.save(),T.translate(C,S),T.scale(c,c),a(T,n),T.restore()}},h=[null,null],g=function(){v(i.freePointer,i.canvas),h[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:f,h:d},h[1]={x:i.freePointer.x+f,y:i.freePointer.row*u,w:0,h:d},i.freePointer.x+=f,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},p=function(){var b=i.scratch,w=i.canvas;b.clear(),v({x:0,row:0},b);var T=s-i.freePointer.x,E=f-T,x=u;{var C=i.freePointer.x,S=i.freePointer.row*u,D=T;w.context.drawImage(b,0,0,D,x,C,S,D,x),h[0]={x:C,y:S,w:D,h:d}}{var _=T,k=(i.freePointer.row+1)*u,A=E;w&&w.context.drawImage(b,_,0,A,x,0,k,A,x),h[1]={x:0,y:k,w:A,h:d}}i.freePointer.x=E,i.freePointer.row++},m=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=s)g();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(m(),g()):this.enableWrapping?p():(m(),g())}return this.keyToLocation.set(r,h),this.needsBuffer=!0,h}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=zE(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),YE=function(){function t(e,r,n,a){Wr(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Gr(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new KE(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=Vt(this.atlases),u;try{var l=function(){var f=u.value,d=f.getKeys(),v=XE(n,d);if(v.size===0)return a.push(f),d.forEach(function(T){return i.set(T,f)}),1;s||(s=r._createAtlas(),a.push(s));var h=Vt(d),g;try{for(h.s();!(g=h.n()).done;){var p=g.value;if(!v.has(p)){var m=f.getOffsets(p),y=ut(m,2),b=y[0],w=y[1];s.canFit({w:b.w+w.w,h:b.h})||(s.lock(),s=r._createAtlas(),a.push(s)),f.canvas&&(r._copyTextureToNewAtlas(p,f,s),i.set(p,s))}}}catch(T){h.e(T)}finally{h.f()}f.dispose()};for(o.s();!(u=o.n()).done;)l()}catch(c){o.e(c)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),s=ut(i,2),o=s[0],u=s[1];if(u.w===0)a.draw(r,o,function(d){d.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var c=o.w+u.w,f=o.h;a.draw(r,{w:c,h:f},function(d){d.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function XE(t,e){return t.intersection?t.intersection(e):new Set(ts(t).filter(function(r){return e.has(r)}))}var ZE=function(){function t(e,r){Wr(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Gr(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,u=this._cacheScratchCanvas(s),l=new YE(this.r,i,o,u);this.collections.set(r,l)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=he({type:r,atlasCollection:i},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(s,o,u,l){return l?((!i||o!=n||u!=a)&&(n=o,a=u,i=r(s,o,u)),i):r(s,o,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,u=o===void 0?function(){return!0}:o,l=a.filterType,c=l===void 0?function(){return!0}:l,f=!1,d=!1,v=Vt(r),h;try{for(v.s();!(h=v.n()).done;){var g=h.value;if(u(g)){var p=Vt(this.renderTypes.values()),m;try{var y=function(){var w=m.value,T=w.type;if(c(T)){var E=n.collections.get(w.collection),x=w.getKey(g),C=Array.isArray(x)?x:[x];if(s)C.forEach(function(k){return E.markKeyForGC(k)}),d=!0;else{var S=w.getID?w.getID(g):g.id(),D=n._key(T,S),_=n.typeAndIdToKey.get(D);_!==void 0&&!FE(C,_)&&(f=!0,n.typeAndIdToKey.delete(D),_.forEach(function(k){return E.markKeyForGC(k)}))}}};for(p.s();!(m=p.n()).done;)y()}catch(b){p.e(b)}finally{p.f()}}}}catch(b){v.e(b)}finally{v.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=Vt(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),u=!1,l=o.draw(i,a,function(d){s.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,a.w,a.h),d.clip(),s.drawElement(d,r,a,!0,!0),d.restore()):s.drawElement(d,r,a,!0,!0),u=!0});if(u){var c=s.getID?s.getID(r):r.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return l}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(u){var l=i.getBoundingBox(r,u),c=a.getOrCreateAtlas(r,n,l,u),f=c.getOffsets(u),d=ut(f,2),v=d[0],h=d[1];return{atlas:c,tex:v,tex1:v,tex2:h,bb:l}})}},{key:"getDebugInfo",value:function(){var r=[],n=Vt(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=ut(a.value,2),s=i[0],o=i[1],u=o.getCounts(),l=u.keyCount,c=u.atlasCount;r.push({type:s,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return r}}])}(),jE=function(){function t(e){Wr(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Gr(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),QE=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,JE=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,eC=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,tC=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Ma={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},vs={IGNORE:1,USE_BB:2},Au=0,Rv=1,Mv=2,ku=3,Mn=4,Mi=5,xa=6,Ta=7,rC=function(){function t(e,r,n){Wr(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=LE,this.atlasManager=new ZE(e,n),this.batchManager=new jE(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Ma.SCREEN),this.pickingProgram=this._createShaderProgram(Ma.PICKING),this.vao=this._createVAO()}return Gr(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Au,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Mn," || aVertType == ").concat(Ta,` 
             || aVertType == `).concat(Mi," || aVertType == ").concat(xa,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Rv,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(Mv,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(ku,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(QE,`
      `).concat(JE,`
      `).concat(eC,`
      `).concat(tC,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Au,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(ku,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Mn,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Mn," || vVertType == ").concat(Ta,` 
          || vVertType == `).concat(Mi," || vVertType == ").concat(xa,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Mn,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Ta,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Ta,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=ME(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),$E(a,"vec2",i.aPosition,r),this.transformBuffer=UE(a,n,i.aTransform),this.indexBuffer=ar(a,n,"vec4",i.aIndex),this.vertTypeBuffer=ar(a,n,"int",i.aVertType),this.atlasIdBuffer=ar(a,n,"int",i.aAtlasId),this.texBuffer=ar(a,n,"vec4",i.aTex),this.pointAPointBBuffer=ar(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=ar(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=ar(a,n,"vec2",i.aLineWidth),this.colorBuffer=ar(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=ar(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=ar(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ma.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(r,o)){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(u===vs.IGNORE)return;if(u==vs.USE_BB){this.drawPickingRectangle(r,n,a);return}}var l=i.getAtlasInfo(r,a),c=Vt(l),f;try{for(c.s();!(f=c.n()).done;){var d=f.value,v=d.atlas,h=d.tex1,g=d.tex2;s.canAddToCurrentBatch(v)||this.endBatch();for(var p=s.getAtlasIndexForBatch(v),m=0,y=[[h,!0],[g,!1]];m<y.length;m++){var b=ut(y[m],2),w=b[0],T=b[1];if(w.w!=0){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=Au;var x=this.indexBuffer.getView(E);Rn(n,x);var C=this.atlasIdBuffer.getView(E);C[0]=p;var S=this.texBuffer.getView(E);S[0]=w.x,S[1]=w.y,S[2]=w.w,S[3]=w.h;var D=this.transformBuffer.getMatrixView(E);this.setTransformMatrix(r,D,o,d,T),this.instanceCount++,T||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(_){c.e(_)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,l=i.tex1,c=i.tex2,f=l.w/(l.w+c.w);s||(f=1-f);var d=this._getAdjustedBB(u,o,s,f);this._applyTransformMatrix(n,d,a,r)}else{var v=a.getBoundingBox(r),h=this._getAdjustedBB(v,o,!0,1);this._applyTransformMatrix(n,h,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var s,o;kv(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var l=a.getRotationPoint(i),c=l.x,f=l.y;Zi(r,r,[c,f]),Bv(r,r,u);var d=a.getRotationOffset(i);s=d.x+(n.xOffset||0),o=d.y+(n.yOffset||0)}else s=n.x1,o=n.y1;Zi(r,r,[s,o]),pl(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var s=r.x1,o=r.y1,u=r.w,l=r.h,c=r.yOffset;n&&(s-=n,o-=n,u+=2*n,l+=2*n);var f=0,d=u*i;return a&&i<1?u=d:!a&&i<1&&(f=u-d,s+=f,u=d),{x1:s,y1:o,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=Mn;var o=this.indexBuffer.getView(s);Rn(n,o);var u=this.colorBuffer.getView(s);Jr([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,l,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var s=i.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,o===Mi||o===xa){var l=i.getBoundingBox(r),c=this._getCornerRadius(r,s.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,o===xa&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(u);Rn(n,d);var v=r.pstyle(s.color).value,h=r.pstyle(s.opacity).value,g=this.colorBuffer.getView(u);Jr(v,h,g);var p=this.lineWidthBuffer.getView(u);if(p[0]=0,p[1]=0,s.border){var m=r.pstyle("border-width").value;if(m>0){var y=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(u);Jr(y,b,w);var T=r.pstyle("border-position").value;if(T==="inside")p[0]=0,p[1]=-m;else if(T==="outside")p[0]=m,p[1]=0;else{var E=m/2;p[0]=E,p[1]=-E}}}var x=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,x,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return Mn;case"ellipse":return Ta;case"roundrectangle":case"round-rectangle":return Mi;case"bottom-round-rectangle":return xa;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,s=a.h;if(r.pstyle(n).value==="auto")return Fr(i,s);var o=r.pstyle(n).pfValue,u=i/2,l=s/2;return Math.min(o,l,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,s,o,u;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,u=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(u)||u==null)){var l=r.pstyle(a+"-arrow-shape").value;if(l!=="none"){var c=r.pstyle(a+"-arrow-color").value,f=r.pstyle("opacity").value,d=r.pstyle("line-opacity").value,v=f*d,h=r.pstyle("width").pfValue,g=r.pstyle("arrow-scale").value,p=this.r.getArrowWidth(h,g),m=this.instanceCount,y=this.transformBuffer.getMatrixView(m);kv(y),Zi(y,y,[s,o]),pl(y,y,[p,p]),Bv(y,y,u),this.vertTypeBuffer.getView(m)[0]=ku;var b=this.indexBuffer.getView(m);Rn(n,b);var w=this.colorBuffer.getView(m);Jr(c,v,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,l=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=Rv;var f=this.indexBuffer.getView(c);Rn(n,f);var d=this.colorBuffer.getView(c);Jr(u,l,d);var v=this.lineWidthBuffer.getView(c);v[0]=o;var h=this.pointAPointBBuffer.getView(c);h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var g=0;g<a.length-2;g+=2){var p=this.instanceCount;this.vertTypeBuffer.getView(p)[0]=Mv;var m=this.indexBuffer.getView(p);Rn(n,m);var y=this.colorBuffer.getView(p);Jr(u,l,y);var b=this.lineWidthBuffer.getView(p);b[0]=o;var w=a[g-2],T=a[g-1],E=a[g],x=a[g+1],C=a[g+2],S=a[g+3],D=a[g+4],_=a[g+5];g==0&&(w=2*E-C+.001,T=2*x-S+.001),g==a.length-4&&(D=2*C-E+.001,_=2*S-x+.001);var k=this.pointAPointBBuffer.getView(p);k[0]=w,k[1]=T,k[2]=E,k[3]=x;var A=this.pointCPointDBuffer.getView(p);A[0]=C,A[1]=S,A[2]=D,A[3]=_,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var s=i/n;this._setCurvePoint(r,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var u=(1-n)*r[o]+n*r[o+2],l=(1-n)*r[o+1]+n*r[o+3];s[o]=u,s[o+1]=l}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=Vt(this.buffers),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;l.bufferSubData(i)}}catch(h){o.e(h)}finally{o.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var d=0;d<c.length;d++)r.activeTexture(r.TEXTURE0+d),r.bindTexture(r.TEXTURE_2D,c[d].texture),r.uniform1i(s.uTextures[d],d);r.uniform1f(s.uZoom,IE(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var v=Jr(this.bgColor,1);r.uniform4fv(s.uBGColor,v),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),im={};im.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=nC(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=HE(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new rC(r,n,t);var a=function(f){return function(d){return r.getTextAngle(d,f)}},i=function(f){return function(d){var v=d.pstyle(f);return v&&v.value}},s=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},o=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?vs.USE_BB:vs.IGNORE},u=function(f){var d=f.position(),v=d.x,h=d.y,g=f.outerWidth(),p=f.outerHeight();return{w:g,h:p,x1:v-g/2,y1:h-p/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:VE,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:Bu(e.getLabelKey,null),getBoundingBox:Ru(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:Bu(e.getSourceLabelKey,"source"),getBoundingBox:Ru(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:Bu(e.getTargetLabelKey,"target"),getBoundingBox:Ru(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=si(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var d=!1;f&&f.length>0&&(d|=r.drawing.invalidate(f)),d&&l()}),aC(r)};function nC(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return Ip(r)}function sm(t,e){var r=t._private.rscratch;return Lt(r,"labelWrapCachedLines",e)||[]}var Bu=function(e,r){return function(n){var a=e(n),i=sm(n,r);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},Ru=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),u=sm(n,r),l=i.h/u.length,c=l*o,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:l,yOffset:c}}}return i}};function aC(t){{var e=t.render;t.render=function(i){i=i||{};var s=t.cy;t.webgl&&(s.zoom()>Qg?(iC(t),e.call(t,i)):(sC(t),um(t,i,Ma.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,s,o,u){return dC(t,i,s)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,s){a.call(t,i,s),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(s,{type:"node-body"})}}}function iC(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function sC(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function oC(t){var e=t.canvasWidth,r=t.canvasHeight,n=gc(t),a=n.pan,i=n.zoom,s=Du();Zi(s,s,[a.x,a.y]),pl(s,s,[i,i]);var o=Du();GE(o,e,r);var u=Du();return WE(u,o,s),u}function om(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=gc(t),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(s,s)}function uC(t,e){t.drawSelectionRectangle(e,function(r){return om(t,r)})}function lC(t){var e=t.data.contexts[t.NODE];e.save(),om(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function cC(t){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],l=o.atlases,c=0;c<l.length;c++){var f=l[c],d=f.canvas;if(d){var v=d.width,h=d.height,g=v*c,p=d.height*s,m=.4;u.save(),u.scale(m,m),u.drawImage(d,g,p),u.strokeStyle="black",u.rect(g,p,v,h),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function fC(t,e,r,n,a){var i,s,o,u,l=gc(t),c=l.pan,f=l.zoom;{var d=OE(t,c,f,e,r),v=ut(d,2),h=v[0],g=v[1],p=6;i=h-p/2,s=g-p/2,o=p,u=p}if(o===0||u===0)return[];var m=t.data.contexts[t.WEBGL];m.bindFramebuffer(m.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(m.viewport(0,0,m.canvas.width,m.canvas.height),um(t,null,Ma.PICKING),t.pickingFrameBuffer.needsDraw=!1);var y=o*u,b=new Uint8Array(y*4);m.readPixels(i,s,o,u,m.RGBA,m.UNSIGNED_BYTE,b),m.bindFramebuffer(m.FRAMEBUFFER,null);for(var w=new Set,T=0;T<y;T++){var E=b.slice(T*4,T*4+4),x=NE(E)-1;x>=0&&w.add(x)}return w}function dC(t,e,r){var n=fC(t,e,r),a=t.getCachedZSortedEles(),i,s,o=Vt(n),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,c=a[l];if(!i&&c.isNode()&&(i=c),!s&&c.isEdge()&&(s=c),i&&s)break}}catch(f){o.e(f)}finally{o.f()}return[i,s].filter(Boolean)}function Mu(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function um(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&uC(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=t.data.contexts[t.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=oC(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(o,r),r.screen){for(var l=0;l<u.nondrag.length;l++)Mu(t,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)Mu(t,c,u.drag[c])}else if(r.picking)for(var f=0;f<u.length;f++)Mu(t,f,u[f]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(lC(t),cC(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var d=performance.now(),v=!1,h=Math.ceil(d-n),g=a.getDebugInfo(),p=["".concat(i," elements"),"".concat(g.totalInstances," instances"),"".concat(g.batchCount," batches"),"".concat(g.totalAtlases," atlases"),"".concat(g.wrappedCount," wrapped textures"),"".concat(g.simpleCount," simple shapes")].join(", ");if(v)console.log("WebGL (".concat(r.name,") - time ").concat(h,"ms, ").concat(p));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(h,"ms")),console.log("Totals:"),console.log("  ".concat(p)),console.log("Texture Atlases Used:");var m=g.atlasInfo,y=Vt(m),b;try{for(y.s();!(b=y.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(T){y.e(T)}finally{y.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var Xr={};Xr.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+s*i[u*2],r+o*i[u*2+1]);t.closePath()};Xr.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return Ug(t,o)}),t.closePath()};Xr.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?Fr(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,u),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.arcTo(e-s,r-o,e,r-o,u),t.lineTo(e,r-o),t.closePath()};Xr.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?Fr(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};Xr.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,u=a/2,l=s==="auto"?rc():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-u),t.lineTo(e+o-l,r-u),t.lineTo(e+o,r-u+l),t.lineTo(e+o,r+u-l),t.lineTo(e+o-l,r+u),t.lineTo(e-o+l,r+u),t.lineTo(e-o,r+u-l),t.lineTo(e-o,r-u+l),t.closePath()};Xr.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,u=e+i,l=r-s,c=r+s,f=tl(n,a),d=f.widthOffset,v=f.heightOffset,h=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(o,l+v),t.lineTo(o,c-v),t.quadraticCurveTo(o+h,c,o+d,c),t.lineTo(u-d,c),t.quadraticCurveTo(u-h,c,u,c-v),t.lineTo(u,l+v),t.quadraticCurveTo(u-h,l,u-d,l),t.lineTo(o+d,l),t.quadraticCurveTo(o+h,l,o,l+v),t.closePath()};var Lv=Math.sin(0),Iv=Math.cos(0),gl={},ml={},lm=Math.PI/40;for(var Ln=0*Math.PI;Ln<2*Math.PI;Ln+=lm)gl[Ln]=Math.sin(Ln),ml[Ln]=Math.cos(Ln);Xr.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=lm)i=e-o*gl[l]*Lv+o*ml[l]*Iv,s=r+u*ml[l]*Lv+u*gl[l]*Iv,l===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};var di={};di.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};di.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=ne(t.maxWidth)||ne(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,l=t.scale;else if(o){var c=1/0,f=1/0;ne(t.maxWidth)&&(c=l*t.maxWidth/i),ne(t.maxHeight)&&(f=l*t.maxHeight/s),l=Math.min(c,f),i*=l,s*=l}o||(i*=u,s*=u,l*=u);var d=document.createElement("canvas");d.width=i,d.height=s,d.style.width=i+"px",d.style.height=s+"px";var v=d.getContext("2d");if(i>0&&s>0){v.clearRect(0,0,i,s),v.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)v.translate(-n.x1*l,-n.y1*l),v.scale(l,l),this.drawElements(v,h),v.scale(1/l,1/l),v.translate(n.x1*l,n.y1*l);else{var g=e.pan(),p={x:g.x*l,y:g.y*l};l*=e.zoom(),v.translate(p.x,p.y),v.scale(l,l),this.drawElements(v,h),v.scale(1/l,1/l),v.translate(-p.x,-p.y)}t.bg&&(v.globalCompositeOperation="destination-over",v.fillStyle=t.bg,v.rect(0,0,i,s),v.fill())}return d};function vC(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function Ov(t){var e=t.indexOf(",");return t.substr(e+1)}function cm(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new la(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return vC(Ov(n()),r);case"base64":return Ov(n());case"base64uri":default:return n()}}di.png=function(t){return cm(t,this.bufferCanvasImage(t),"image/png")};di.jpg=function(t){return cm(t,this.bufferCanvasImage(t),"image/jpeg")};var fm={};fm.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var hC=dm,Se=dm.prototype;Se.CANVAS_LAYERS=3;Se.SELECT_BOX=0;Se.DRAG=1;Se.NODE=2;Se.WEBGL=3;Se.CANVAS_TYPES=["2d","2d","2d","webgl2"];Se.BUFFER_COUNT=3;Se.TEXTURE_BUFFER=0;Se.MOTIONBLUR_BUFFER_NODE=1;Se.MOTIONBLUR_BUFFER_DRAG=2;function dm(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Se.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Se.CANVAS_LAYERS),contexts:new Array(Se.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Se.CANVAS_LAYERS),bufferCanvases:new Array(Se.BUFFER_COUNT),bufferContexts:new Array(Se.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};db()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Se.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=Se.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||Ze("Could not create canvas of type "+f),Object.keys(u).forEach(function(Z){c.style[Z]=u[Z]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Se.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Se.NODE].setAttribute("data-id","layer"+Se.NODE+"-node"),e.data.canvases[Se.SELECT_BOX].setAttribute("data-id","layer"+Se.SELECT_BOX+"-selectbox"),e.data.canvases[Se.DRAG].setAttribute("data-id","layer"+Se.DRAG+"-drag"),e.data.canvases[Se.WEBGL]&&e.data.canvases[Se.WEBGL].setAttribute("data-id","layer"+Se.WEBGL+"-webgl");for(var l=0;l<Se.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var d=Ft(),v=function(V){return{x:(V.x1+V.x2)/2,y:(V.y1+V.y2)/2}},h=function(V){return{x:-V.w/2,y:-V.h/2}},g=function(V){var z=V[0]._private,U=z.oldBackgroundTimestamp===z.backgroundTimestamp;return!U},p=function(V){return V[0]._private.nodeKey},m=function(V){return V[0]._private.labelStyleKey},y=function(V){return V[0]._private.sourceLabelStyleKey},b=function(V){return V[0]._private.targetLabelStyleKey},w=function(V,z,U,te,ae){return e.drawElement(V,z,U,!1,!1,ae)},T=function(V,z,U,te,ae){return e.drawElementText(V,z,U,te,"main",ae)},E=function(V,z,U,te,ae){return e.drawElementText(V,z,U,te,"source",ae)},x=function(V,z,U,te,ae){return e.drawElementText(V,z,U,te,"target",ae)},C=function(V){return V.boundingBox(),V[0]._private.bodyBounds},S=function(V){return V.boundingBox(),V[0]._private.labelBounds.main||d},D=function(V){return V.boundingBox(),V[0]._private.labelBounds.source||d},_=function(V){return V.boundingBox(),V[0]._private.labelBounds.target||d},k=function(V,z){return z},A=function(V){return v(C(V))},B=function(V,z,U){var te=V?V+"-":"";return{x:z.x+U.pstyle(te+"text-margin-x").pfValue,y:z.y+U.pstyle(te+"text-margin-y").pfValue}},R=function(V,z,U){var te=V[0]._private.rscratch;return{x:te[z],y:te[U]}},M=function(V){return B("",R(V,"labelX","labelY"),V)},L=function(V){return B("source",R(V,"sourceLabelX","sourceLabelY"),V)},I=function(V){return B("target",R(V,"targetLabelX","targetLabelY"),V)},N=function(V){return h(C(V))},$=function(V){return h(D(V))},O=function(V){return h(_(V))},F=function(V){var z=S(V),U=h(S(V));if(V.isNode()){switch(V.pstyle("text-halign").value){case"left":U.x=-z.w-(z.leftPad||0);break;case"right":U.x=-(z.rightPad||0);break}switch(V.pstyle("text-valign").value){case"top":U.y=-z.h-(z.topPad||0);break;case"bottom":U.y=-(z.botPad||0);break}}return U},G=e.data.eleTxrCache=new _a(e,{getKey:p,doesEleInvalidateKey:g,drawElement:w,getBoundingBox:C,getRotationPoint:A,getRotationOffset:N,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),X=e.data.lblTxrCache=new _a(e,{getKey:m,drawElement:T,getBoundingBox:S,getRotationPoint:M,getRotationOffset:F,isVisible:k}),j=e.data.slbTxrCache=new _a(e,{getKey:y,drawElement:E,getBoundingBox:D,getRotationPoint:L,getRotationOffset:$,isVisible:k}),Y=e.data.tlbTxrCache=new _a(e,{getKey:b,drawElement:x,getBoundingBox:_,getRotationPoint:I,getRotationOffset:O,isVisible:k}),ee=e.data.lyrTxrCache=new Jg(e);e.onUpdateEleCalcs(function(V,z){G.invalidateElements(z),X.invalidateElements(z),j.invalidateElements(z),Y.invalidateElements(z),ee.invalidateElements(z);for(var U=0;U<z.length;U++){var te=z[U]._private;te.oldBackgroundTimestamp=te.backgroundTimestamp}});var re=function(V){for(var z=0;z<V.length;z++)ee.enqueueElementRefinement(V[z].ele)};G.onDequeue(re),X.onDequeue(re),j.onDequeue(re),Y.onDequeue(re),t.webgl&&e.initWebgl(t,{getStyleKey:p,getLabelKey:m,getSourceLabelKey:y,getTargetLabelKey:b,drawElement:w,drawLabel:T,drawSourceLabel:E,drawTargetLabel:x,getElementBox:C,getLabelBox:S,getSourceLabelBox:D,getTargetLabelBox:_,getElementRotationPoint:A,getElementRotationOffset:N,getLabelRotationPoint:M,getSourceLabelRotationPoint:L,getTargetLabelRotationPoint:I,getLabelRotationOffset:F,getSourceLabelRotationOffset:$,getTargetLabelRotationOffset:O})}Se.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Se.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Se.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Se.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var pC=typeof Path2D<"u";Se.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Se.usePaths=function(){return pC&&this.pathsEnabled};Se.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Se.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Se.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":ct(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[em,dr,Pr,pc,En,Yr,kt,im,Xr,di,fm].forEach(function(t){he(Se,t)});var gC=[{name:"null",impl:zg},{name:"base",impl:Zg},{name:"canvas",impl:hC}],mC=[{type:"layout",extensions:UT},{type:"renderer",extensions:gC}],vm={},hm={};function pm(t,e,r){var n=r,a=function(C){Oe("Can not register `"+e+"` for `"+t+"` since `"+C+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Ka.prototype[e])return a(e);Ka.prototype[e]=r}else if(t==="collection"){if(wt.prototype[e])return a(e);wt.prototype[e]=r}else if(t==="layout"){for(var i=function(C){this.options=C,r.call(this,C),Be(this._private)||(this._private={}),this._private.cy=C.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=r.prototype.stop;s.stop=function(){var x=this.options;if(x&&x.animate){var C=this.animations;if(C)for(var S=0;S<C.length;S++)C[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(C){return C._private.cy},d={addEventFields:function(C,S){S.layout=C,S.cy=f(C),S.target=C},bubble:function(){return!0},parent:function(C){return f(C)}};he(s,{createEmitter:function(){return this._private.emitter=new Vs(d,this),this},emitter:function(){return this._private.emitter},on:function(C,S){return this.emitter().on(C,S),this},one:function(C,S){return this.emitter().one(C,S),this},once:function(C,S){return this.emitter().one(C,S),this},removeListener:function(C,S){return this.emitter().removeListener(C,S),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(C,S){return this.emitter().emit(C,S),this}}),Ie.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var v=gm("renderer","base"),h=v.prototype,g=r,p=r.prototype,m=function(){v.apply(this,arguments),g.apply(this,arguments)},y=m.prototype;for(var b in h){var w=h[b],T=p[b]!=null;if(T)return a(b);y[b]=w}for(var E in p)y[E]=p[E];h.clientFunctions.forEach(function(x){y[x]=y[x]||function(){Ze("Renderer does not implement `renderer."+x+"()` on its prototype")}}),n=m}else if(t==="__proto__"||t==="constructor"||t==="prototype")return Ze(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Op({map:vm,keys:[t,e],value:n})}function gm(t,e){return Vp({map:vm,keys:[t,e]})}function yC(t,e,r,n,a){return Op({map:hm,keys:[t,e,r,n],value:a})}function bC(t,e,r,n){return Vp({map:hm,keys:[t,e,r,n]})}var yl=function(){if(arguments.length===2)return gm.apply(null,arguments);if(arguments.length===3)return pm.apply(null,arguments);if(arguments.length===4)return bC.apply(null,arguments);if(arguments.length===5)return yC.apply(null,arguments);Ze("Invalid extension access syntax")};Ka.prototype.extension=yl;mC.forEach(function(t){t.extensions.forEach(function(e){pm(t.type,e.name,e.impl)})});var hs=function(){if(!(this instanceof hs))return new hs;this.length=0},yn=hs.prototype;yn.instanceString=function(){return"stylesheet"};yn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};yn.css=function(t,e){var r=this.length-1;if(fe(t))this[r].properties.push({name:t,value:e});else if(Be(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var u=pt.properties[s]||pt.properties[_s(s)];if(u!=null){var l=u.name,c=o;this[r].properties.push({name:l,value:c})}}}return this};yn.style=yn.css;yn.generateStyle=function(t){var e=new pt(t);return this.appendToStyle(e)};yn.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};var wC="3.32.0",bn=function(e){if(e===void 0&&(e={}),Be(e))return new Ka(e);if(fe(e))return yl.apply(yl,arguments)};bn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(bn),t.apply(null,e),this};bn.warnings=function(t){return Hp(t)};bn.version=wC;bn.stylesheet=bn.Stylesheet=hs;const mm=Hr({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ws=Hr({}),Gs=Hr(null),Ks=typeof document<"u",mc=Ks?xn:cr,ym=Hr({strict:!1}),yc=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),xC="framerAppearId",bm="data-"+yc(xC);function TC(t,e,r,n){const{visualElement:a}=ht(Ws),i=ht(ym),s=ht(Gs),o=ht(mm).reducedMotion,u=Ot();n=n||i.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:a,props:r,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:o}));const l=u.current;ei(()=>{l&&l.update(r,s)});const c=Ot(!!(r[bm]&&!window.HandoffComplete));return mc(()=>{l&&(l.render(),c.current&&l.animationState&&l.animationState.animateChanges())}),cr(()=>{l&&(l.updateFeatures(),!c.current&&l.animationState&&l.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),l}function zn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function EC(t,e,r){return jn(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):zn(r)&&(r.current=n))},[e])}function Xa(t){return typeof t=="string"||Array.isArray(t)}function Ys(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const bc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wc=["initial",...bc];function Xs(t){return Ys(t.animate)||wc.some(e=>Xa(t[e]))}function wm(t){return!!(Xs(t)||t.variants)}function CC(t,e){if(Xs(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Xa(r)?r:void 0,animate:Xa(n)?n:void 0}}return t.inherit!==!1?e:{}}function SC(t){const{initial:e,animate:r}=CC(t,ht(Ws));return Jt(()=>({initial:e,animate:r}),[Vv(e),Vv(r)])}function Vv(t){return Array.isArray(t)?t.join(" "):t}const Fv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Za={};for(const t in Fv)Za[t]={isEnabled:e=>Fv[t].some(r=>!!e[r])};function PC(t){for(const e in t)Za[e]={...Za[e],...t[e]}}const xc=Hr({}),xm=Hr({}),_C=Symbol.for("motionComponentSymbol");function DC({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:a}){t&&PC(t);function i(o,u){let l;const c={...ht(mm),...o,layoutId:AC(o)},{isStatic:f}=c,d=SC(o),v=n(o,f);if(!f&&Ks){d.visualElement=TC(a,v,c,e);const h=ht(xm),g=ht(ym).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,g,t,h))}return Me(Ws.Provider,{value:d},l&&d.visualElement?Me(l,{visualElement:d.visualElement,...c}):null,r(a,o,EC(v,d.visualElement,u),v,f,d.visualElement))}const s=Ul(i);return s[_C]=a,s}function AC({layoutId:t}){const e=ht(xc).id;return e&&t!==void 0?e+"-"+t:t}function kC(t){function e(n,a={}){return DC(t(n,a))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,a)=>(r.has(a)||r.set(a,e(a)),r.get(a))})}const BC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tc(t){return typeof t!="string"||t.includes("-")?!1:!!(BC.indexOf(t)>-1||/[A-Z]/.test(t))}const ps={};function RC(t){Object.assign(ps,t)}const vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cn=new Set(vi);function Tm(t,{layout:e,layoutId:r}){return Cn.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!ps[t]||t==="opacity")}const Nt=t=>!!(t&&t.getVelocity),MC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LC=vi.length;function IC(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,a){let i="";for(let s=0;s<LC;s++){const o=vi[s];if(t[o]!==void 0){const u=MC[o]||o;i+=`${u}(${t[o]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(t,n?"":i):r&&n&&(i="none"),i}const Em=t=>e=>typeof e=="string"&&e.startsWith(t),Cm=Em("--"),bl=Em("var(--"),OC=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,VC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,$r=(t,e,r)=>Math.min(Math.max(r,t),e),Sn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},La={...Sn,transform:t=>$r(0,1,t)},Li={...Sn,default:1},Ia=t=>Math.round(t*1e5)/1e5,Zs=/(-)?([\d]*\.?[\d])+/g,Sm=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,FC=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hi(t){return typeof t=="string"}const pi=t=>({test:e=>hi(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kr=pi("deg"),ur=pi("%"),me=pi("px"),NC=pi("vh"),zC=pi("vw"),Nv={...ur,parse:t=>ur.parse(t)/100,transform:t=>ur.transform(t*100)},zv={...Sn,transform:Math.round},Pm={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:kr,rotateX:kr,rotateY:kr,rotateZ:kr,scale:Li,scaleX:Li,scaleY:Li,scaleZ:Li,skew:kr,skewX:kr,skewY:kr,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:La,originX:Nv,originY:Nv,originZ:me,zIndex:zv,fillOpacity:La,strokeOpacity:La,numOctaves:zv};function Ec(t,e,r,n){const{style:a,vars:i,transform:s,transformOrigin:o}=t;let u=!1,l=!1,c=!0;for(const f in e){const d=e[f];if(Cm(f)){i[f]=d;continue}const v=Pm[f],h=VC(d,v);if(Cn.has(f)){if(u=!0,s[f]=h,!c)continue;d!==(v.default||0)&&(c=!1)}else f.startsWith("origin")?(l=!0,o[f]=h):a[f]=h}if(e.transform||(u||n?a.transform=IC(t.transform,r,c,n):a.transform&&(a.transform="none")),l){const{originX:f="50%",originY:d="50%",originZ:v=0}=o;a.transformOrigin=`${f} ${d} ${v}`}}const Cc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _m(t,e,r){for(const n in e)!Nt(e[n])&&!Tm(n,r)&&(t[n]=e[n])}function qC({transformTemplate:t},e,r){return Jt(()=>{const n=Cc();return Ec(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function $C(t,e,r){const n=t.style||{},a={};return _m(a,n,t),Object.assign(a,qC(t,e,r)),t.transformValues?t.transformValues(a):a}function UC(t,e,r){const n={},a=$C(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=a,n}const HC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gs(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||HC.has(t)}let Dm=t=>!gs(t);function WC(t){t&&(Dm=e=>e.startsWith("on")?!gs(e):t(e))}try{WC(require("@emotion/is-prop-valid").default)}catch{}function GC(t,e,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(Dm(a)||r===!0&&gs(a)||!e&&!gs(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}function qv(t,e,r){return typeof t=="string"?t:me.transform(e+r*t)}function KC(t,e,r){const n=qv(e,t.x,t.width),a=qv(r,t.y,t.height);return`${n} ${a}`}const YC={offset:"stroke-dashoffset",array:"stroke-dasharray"},XC={offset:"strokeDashoffset",array:"strokeDasharray"};function ZC(t,e,r=1,n=0,a=!0){t.pathLength=1;const i=a?YC:XC;t[i.offset]=me.transform(-n);const s=me.transform(e),o=me.transform(r);t[i.array]=`${s} ${o}`}function Sc(t,{attrX:e,attrY:r,attrScale:n,originX:a,originY:i,pathLength:s,pathSpacing:o=1,pathOffset:u=0,...l},c,f,d){if(Ec(t,l,c,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:h,dimensions:g}=t;v.transform&&(g&&(h.transform=v.transform),delete v.transform),g&&(a!==void 0||i!==void 0||h.transform)&&(h.transformOrigin=KC(g,a!==void 0?a:.5,i!==void 0?i:.5)),e!==void 0&&(v.x=e),r!==void 0&&(v.y=r),n!==void 0&&(v.scale=n),s!==void 0&&ZC(v,s,o,u,!1)}const Am=()=>({...Cc(),attrs:{}}),Pc=t=>typeof t=="string"&&t.toLowerCase()==="svg";function jC(t,e,r,n){const a=Jt(()=>{const i=Am();return Sc(i,e,{enableHardwareAcceleration:!1},Pc(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};_m(i,t.style,t),a.style={...i,...a.style}}return a}function QC(t=!1){return(r,n,a,{latestValues:i},s)=>{const u=(Tc(r)?jC:UC)(n,i,s,r),c={...GC(n,typeof r=="string",t),...u,ref:a},{children:f}=n,d=Jt(()=>Nt(f)?f.get():f,[f]);return Me(r,{...c,children:d})}}function km(t,{style:e,vars:r},n,a){Object.assign(t.style,e,a&&a.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const Bm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Rm(t,e,r,n){km(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(Bm.has(a)?a:yc(a),e.attrs[a])}function _c(t,e){const{style:r}=t,n={};for(const a in r)(Nt(r[a])||e.style&&Nt(e.style[a])||Tm(a,t))&&(n[a]=r[a]);return n}function Mm(t,e){const r=_c(t,e);for(const n in t)if(Nt(t[n])||Nt(e[n])){const a=vi.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=t[n]}return r}function Dc(t,e,r,n={},a={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,a)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,a)),e}function Lm(t){const e=Ot(null);return e.current===null&&(e.current=t()),e.current}const ms=t=>Array.isArray(t),JC=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),eS=t=>ms(t)?t[t.length-1]||0:t;function ji(t){const e=Nt(t)?t.get():t;return JC(e)?e.toValue():e}function tS({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,a,i){const s={latestValues:rS(n,a,i,t),renderState:e()};return r&&(s.mount=o=>r(n,o,s)),s}const Im=t=>(e,r)=>{const n=ht(Ws),a=ht(Gs),i=()=>tS(t,e,n,a);return r?i():Lm(i)};function rS(t,e,r,n){const a={},i=n(t,{});for(const d in i)a[d]=ji(i[d]);let{initial:s,animate:o}=t;const u=Xs(t),l=wm(t);e&&l&&!u&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let c=r?r.initial===!1:!1;c=c||s===!1;const f=c?o:s;return f&&typeof f!="boolean"&&!Ys(f)&&(Array.isArray(f)?f:[f]).forEach(v=>{const h=Dc(t,v);if(!h)return;const{transitionEnd:g,transition:p,...m}=h;for(const y in m){let b=m[y];if(Array.isArray(b)){const w=c?b.length-1:0;b=b[w]}b!==null&&(a[y]=b)}for(const y in g)a[y]=g[y]}),a}const tt=t=>t;class $v{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function nS(t){let e=new $v,r=new $v,n=0,a=!1,i=!1;const s=new WeakSet,o={schedule:(u,l=!1,c=!1)=>{const f=c&&a,d=f?e:r;return l&&s.add(u),d.add(u)&&f&&a&&(n=e.order.length),u},cancel:u=>{r.remove(u),s.delete(u)},process:u=>{if(a){i=!0;return}if(a=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let l=0;l<n;l++){const c=e.order[l];c(u),s.has(c)&&(o.schedule(c),t())}a=!1,i&&(i=!1,o.process(u))}};return o}const Ii=["prepare","read","update","preRender","render","postRender"],aS=40;function iS(t,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=Ii.reduce((f,d)=>(f[d]=nS(()=>r=!0),f),{}),s=f=>i[f].process(a),o=()=>{const f=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(f-a.timestamp,aS),1),a.timestamp=f,a.isProcessing=!0,Ii.forEach(s),a.isProcessing=!1,r&&e&&(n=!1,t(o))},u=()=>{r=!0,n=!0,a.isProcessing||t(o)};return{schedule:Ii.reduce((f,d)=>{const v=i[d];return f[d]=(h,g=!1,p=!1)=>(r||u(),v.schedule(h,g,p)),f},{}),cancel:f=>Ii.forEach(d=>i[d].cancel(f)),state:a,steps:i}}const{schedule:He,cancel:Cr,state:Ct,steps:Lu}=iS(typeof requestAnimationFrame<"u"?requestAnimationFrame:tt,!0),sS={useVisualState:Im({scrapeMotionValuesFromProps:Mm,createRenderState:Am,onMount:(t,e,{renderState:r,latestValues:n})=>{He.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),He.render(()=>{Sc(r,n,{enableHardwareAcceleration:!1},Pc(e.tagName),t.transformTemplate),Rm(e,r)})}})},oS={useVisualState:Im({scrapeMotionValuesFromProps:_c,createRenderState:Cc})};function uS(t,{forwardMotionProps:e=!1},r,n){return{...Tc(t)?sS:oS,preloadedFeatures:r,useRender:QC(e),createVisualElement:n,Component:t}}function mr(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const Om=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function js(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const lS=t=>e=>Om(e)&&t(e,js(e));function br(t,e,r,n){return mr(t,e,lS(r),n)}const cS=(t,e)=>r=>e(t(r)),Ir=(...t)=>t.reduce(cS);function Vm(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const Uv=Vm("dragHorizontal"),Hv=Vm("dragVertical");function Fm(t){let e=!1;if(t==="y")e=Hv();else if(t==="x")e=Uv();else{const r=Uv(),n=Hv();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function Nm(){const t=Fm(!0);return t?(t(),!1):!0}class Zr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Wv(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),a=(i,s)=>{if(i.pointerType==="touch"||Nm())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e),o[n]&&He.update(()=>o[n](i,s))};return br(t.current,r,a,{passive:!t.getProps()[n]})}class fS extends Zr{mount(){this.unmount=Ir(Wv(this.node,!0),Wv(this.node,!1))}unmount(){}}class dS extends Zr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ir(mr(this.node.current,"focus",()=>this.onFocus()),mr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const zm=(t,e)=>e?t===e?!0:zm(t,e.parentElement):!1;function Iu(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,js(r))}class vS extends Zr{constructor(){super(...arguments),this.removeStartListeners=tt,this.removeEndListeners=tt,this.removeAccessibleListeners=tt,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=br(window,"pointerup",(o,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:c,globalTapTarget:f}=this.node.getProps();He.update(()=>{!f&&!zm(this.node.current,o.target)?c&&c(o,u):l&&l(o,u)})},{passive:!(n.onTap||n.onPointerUp)}),s=br(window,"pointercancel",(o,u)=>this.cancelPress(o,u),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ir(i,s),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const s=o=>{o.key!=="Enter"||!this.checkPressEnd()||Iu("up",(u,l)=>{const{onTap:c}=this.node.getProps();c&&He.update(()=>c(u,l))})};this.removeEndListeners(),this.removeEndListeners=mr(this.node.current,"keyup",s),Iu("down",(o,u)=>{this.startPress(o,u)})},r=mr(this.node.current,"keydown",e),n=()=>{this.isPressing&&Iu("cancel",(i,s)=>this.cancelPress(i,s))},a=mr(this.node.current,"blur",n);this.removeAccessibleListeners=Ir(r,a)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&He.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Nm()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&He.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=br(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=mr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ir(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const wl=new WeakMap,Ou=new WeakMap,hS=t=>{const e=wl.get(t.target);e&&e(t)},pS=t=>{t.forEach(hS)};function gS({root:t,...e}){const r=t||document;Ou.has(r)||Ou.set(r,{});const n=Ou.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(pS,{root:t,...e})),n[a]}function mS(t,e,r){const n=gS(e);return wl.set(t,r),n.observe(t),()=>{wl.delete(t),n.unobserve(t)}}const yS={some:0,all:1};class bS extends Zr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=e,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:yS[a]},o=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=l?c:f;d&&d(u)};return mS(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(wS(e,r))&&this.startObserver()}unmount(){}}function wS({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const xS={inView:{Feature:bS},tap:{Feature:vS},focus:{Feature:dS},hover:{Feature:fS}};function qm(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function TS(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function ES(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function Qs(t,e,r){const n=t.getProps();return Dc(n,e,r!==void 0?r:n.custom,TS(t),ES(t))}let Ac=tt;const vn=t=>t*1e3,wr=t=>t/1e3,CS={current:!1},$m=t=>Array.isArray(t)&&typeof t[0]=="number";function Um(t){return!!(!t||typeof t=="string"&&Hm[t]||$m(t)||Array.isArray(t)&&t.every(Um))}const Da=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Hm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Da([0,.65,.55,1]),circOut:Da([.55,0,1,.45]),backIn:Da([.31,.01,.66,-.59]),backOut:Da([.33,1.53,.69,.99])};function Wm(t){if(t)return $m(t)?Da(t):Array.isArray(t)?t.map(Wm):Hm[t]}function SS(t,e,r,{delay:n=0,duration:a,repeat:i=0,repeatType:s="loop",ease:o,times:u}={}){const l={[e]:r};u&&(l.offset=u);const c=Wm(o);return Array.isArray(c)&&(l.easing=c),t.animate(l,{delay:n,duration:a,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"})}function PS(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const Gm=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,_S=1e-7,DS=12;function AS(t,e,r,n,a){let i,s,o=0;do s=e+(r-e)/2,i=Gm(s,n,a)-t,i>0?r=s:e=s;while(Math.abs(i)>_S&&++o<DS);return s}function gi(t,e,r,n){if(t===e&&r===n)return tt;const a=i=>AS(i,0,1,t,r);return i=>i===0||i===1?i:Gm(a(i),e,n)}const kS=gi(.42,0,1,1),BS=gi(0,0,.58,1),Km=gi(.42,0,.58,1),RS=t=>Array.isArray(t)&&typeof t[0]!="number",Ym=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Xm=t=>e=>1-t(1-e),kc=t=>1-Math.sin(Math.acos(t)),Zm=Xm(kc),MS=Ym(kc),jm=gi(.33,1.53,.69,.99),Bc=Xm(jm),LS=Ym(Bc),IS=t=>(t*=2)<1?.5*Bc(t):.5*(2-Math.pow(2,-10*(t-1))),OS={linear:tt,easeIn:kS,easeInOut:Km,easeOut:BS,circIn:kc,circInOut:MS,circOut:Zm,backIn:Bc,backInOut:LS,backOut:jm,anticipate:IS},Gv=t=>{if(Array.isArray(t)){Ac(t.length===4);const[e,r,n,a]=t;return gi(e,r,n,a)}else if(typeof t=="string")return OS[t];return t},Rc=(t,e)=>r=>!!(hi(r)&&FC.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),Qm=(t,e,r)=>n=>{if(!hi(n))return n;const[a,i,s,o]=n.match(Zs);return{[t]:parseFloat(a),[e]:parseFloat(i),[r]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},VS=t=>$r(0,255,t),Vu={...Sn,transform:t=>Math.round(VS(t))},dn={test:Rc("rgb","red"),parse:Qm("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Vu.transform(t)+", "+Vu.transform(e)+", "+Vu.transform(r)+", "+Ia(La.transform(n))+")"};function FS(t){let e="",r="",n="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const xl={test:Rc("#"),parse:FS,transform:dn.transform},qn={test:Rc("hsl","hue"),parse:Qm("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ur.transform(Ia(e))+", "+ur.transform(Ia(r))+", "+Ia(La.transform(n))+")"},At={test:t=>dn.test(t)||xl.test(t)||qn.test(t),parse:t=>dn.test(t)?dn.parse(t):qn.test(t)?qn.parse(t):xl.parse(t),transform:t=>hi(t)?t:t.hasOwnProperty("red")?dn.transform(t):qn.transform(t)},Xe=(t,e,r)=>-r*t+r*e+t;function Fu(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function NS({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let a=0,i=0,s=0;if(!e)a=i=s=r;else{const o=r<.5?r*(1+e):r+e-r*e,u=2*r-o;a=Fu(u,o,t+1/3),i=Fu(u,o,t),s=Fu(u,o,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:n}}const Nu=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},zS=[xl,dn,qn],qS=t=>zS.find(e=>e.test(t));function Kv(t){const e=qS(t);let r=e.parse(t);return e===qn&&(r=NS(r)),r}const Jm=(t,e)=>{const r=Kv(t),n=Kv(e),a={...r};return i=>(a.red=Nu(r.red,n.red,i),a.green=Nu(r.green,n.green,i),a.blue=Nu(r.blue,n.blue,i),a.alpha=Xe(r.alpha,n.alpha,i),dn.transform(a))};function $S(t){var e,r;return isNaN(t)&&hi(t)&&(((e=t.match(Zs))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(Sm))===null||r===void 0?void 0:r.length)||0)>0}const ey={regex:OC,countKey:"Vars",token:"${v}",parse:tt},ty={regex:Sm,countKey:"Colors",token:"${c}",parse:At.parse},ry={regex:Zs,countKey:"Numbers",token:"${n}",parse:Sn.parse};function zu(t,{regex:e,countKey:r,token:n,parse:a}){const i=t.tokenised.match(e);i&&(t["num"+r]=i.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...i.map(a)))}function ys(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&zu(r,ey),zu(r,ty),zu(r,ry),r}function ny(t){return ys(t).values}function ay(t){const{values:e,numColors:r,numVars:n,tokenised:a}=ys(t),i=e.length;return s=>{let o=a;for(let u=0;u<i;u++)u<n?o=o.replace(ey.token,s[u]):u<n+r?o=o.replace(ty.token,At.transform(s[u])):o=o.replace(ry.token,Ia(s[u]));return o}}const US=t=>typeof t=="number"?0:t;function HS(t){const e=ny(t);return ay(t)(e.map(US))}const Ur={test:$S,parse:ny,createTransformer:ay,getAnimatableNone:HS},iy=(t,e)=>r=>`${r>0?e:t}`;function sy(t,e){return typeof t=="number"?r=>Xe(t,e,r):At.test(t)?Jm(t,e):t.startsWith("var(")?iy(t,e):uy(t,e)}const oy=(t,e)=>{const r=[...t],n=r.length,a=t.map((i,s)=>sy(i,e[s]));return i=>{for(let s=0;s<n;s++)r[s]=a[s](i);return r}},WS=(t,e)=>{const r={...t,...e},n={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(n[a]=sy(t[a],e[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},uy=(t,e)=>{const r=Ur.createTransformer(e),n=ys(t),a=ys(e);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?Ir(oy(n.values,a.values),r):iy(t,e)},ja=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Yv=(t,e)=>r=>Xe(t,e,r);function GS(t){return typeof t=="number"?Yv:typeof t=="string"?At.test(t)?Jm:uy:Array.isArray(t)?oy:typeof t=="object"?WS:Yv}function KS(t,e,r){const n=[],a=r||GS(t[0]),i=t.length-1;for(let s=0;s<i;s++){let o=a(t[s],t[s+1]);if(e){const u=Array.isArray(e)?e[s]||tt:e;o=Ir(u,o)}n.push(o)}return n}function ly(t,e,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(Ac(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=KS(e,n,a),o=s.length,u=l=>{let c=0;if(o>1)for(;c<t.length-2&&!(l<t[c+1]);c++);const f=ja(t[c],t[c+1],l);return s[c](f)};return r?l=>u($r(t[0],t[i-1],l)):u}function YS(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const a=ja(0,e,n);t.push(Xe(r,1,a))}}function XS(t){const e=[0];return YS(e,t.length-1),e}function ZS(t,e){return t.map(r=>r*e)}function jS(t,e){return t.map(()=>e||Km).splice(0,t.length-1)}function bs({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=RS(n)?n.map(Gv):Gv(n),i={done:!1,value:e[0]},s=ZS(r&&r.length===e.length?r:XS(e),t),o=ly(s,e,{ease:Array.isArray(a)?a:jS(e,a)});return{calculatedDuration:t,next:u=>(i.value=o(u),i.done=u>=t,i)}}function cy(t,e){return e?t*(1e3/e):0}const QS=5;function fy(t,e,r){const n=Math.max(e-QS,0);return cy(r-t(n),e-n)}const qu=.001,JS=.01,eP=10,tP=.05,rP=1;function nP({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let a,i,s=1-e;s=$r(tP,rP,s),t=$r(JS,eP,wr(t)),s<1?(a=l=>{const c=l*s,f=c*t,d=c-r,v=Tl(l,s),h=Math.exp(-f);return qu-d/v*h},i=l=>{const f=l*s*t,d=f*r+r,v=Math.pow(s,2)*Math.pow(l,2)*t,h=Math.exp(-f),g=Tl(Math.pow(l,2),s);return(-a(l)+qu>0?-1:1)*((d-v)*h)/g}):(a=l=>{const c=Math.exp(-l*t),f=(l-r)*t+1;return-qu+c*f},i=l=>{const c=Math.exp(-l*t),f=(r-l)*(t*t);return c*f});const o=5/t,u=iP(a,i,o);if(t=vn(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:s*2*Math.sqrt(n*l),duration:t}}}const aP=12;function iP(t,e,r){let n=r;for(let a=1;a<aP;a++)n=n-t(n)/e(n);return n}function Tl(t,e){return t*Math.sqrt(1-e*e)}const sP=["duration","bounce"],oP=["stiffness","damping","mass"];function Xv(t,e){return e.some(r=>t[r]!==void 0)}function uP(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Xv(t,oP)&&Xv(t,sP)){const r=nP(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function dy({keyframes:t,restDelta:e,restSpeed:r,...n}){const a=t[0],i=t[t.length-1],s={done:!1,value:a},{stiffness:o,damping:u,mass:l,duration:c,velocity:f,isResolvedFromDuration:d}=uP({...n,velocity:-wr(n.velocity||0)}),v=f||0,h=u/(2*Math.sqrt(o*l)),g=i-a,p=wr(Math.sqrt(o/l)),m=Math.abs(g)<5;r||(r=m?.01:2),e||(e=m?.005:.5);let y;if(h<1){const b=Tl(p,h);y=w=>{const T=Math.exp(-h*p*w);return i-T*((v+h*p*g)/b*Math.sin(b*w)+g*Math.cos(b*w))}}else if(h===1)y=b=>i-Math.exp(-p*b)*(g+(v+p*g)*b);else{const b=p*Math.sqrt(h*h-1);y=w=>{const T=Math.exp(-h*p*w),E=Math.min(b*w,300);return i-T*((v+h*p*g)*Math.sinh(E)+b*g*Math.cosh(E))/b}}return{calculatedDuration:d&&c||null,next:b=>{const w=y(b);if(d)s.done=b>=c;else{let T=v;b!==0&&(h<1?T=fy(y,b,w):T=0);const E=Math.abs(T)<=r,x=Math.abs(i-w)<=e;s.done=E&&x}return s.value=s.done?i:w,s}}}function Zv({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:u,restDelta:l=.5,restSpeed:c}){const f=t[0],d={done:!1,value:f},v=C=>o!==void 0&&C<o||u!==void 0&&C>u,h=C=>o===void 0?u:u===void 0||Math.abs(o-C)<Math.abs(u-C)?o:u;let g=r*e;const p=f+g,m=s===void 0?p:s(p);m!==p&&(g=m-f);const y=C=>-g*Math.exp(-C/n),b=C=>m+y(C),w=C=>{const S=y(C),D=b(C);d.done=Math.abs(S)<=l,d.value=d.done?m:D};let T,E;const x=C=>{v(d.value)&&(T=C,E=dy({keyframes:[d.value,h(d.value)],velocity:fy(b,C,d.value),damping:a,stiffness:i,restDelta:l,restSpeed:c}))};return x(0),{calculatedDuration:null,next:C=>{let S=!1;return!E&&T===void 0&&(S=!0,w(C),x(C)),T!==void 0&&C>T?E.next(C-T):(!S&&w(C),d)}}}const lP=t=>{const e=({timestamp:r})=>t(r);return{start:()=>He.update(e,!0),stop:()=>Cr(e),now:()=>Ct.isProcessing?Ct.timestamp:performance.now()}},jv=2e4;function Qv(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<jv;)e+=r,n=t.next(e);return e>=jv?1/0:e}const cP={decay:Zv,inertia:Zv,tween:bs,keyframes:bs,spring:dy};function ws({autoplay:t=!0,delay:e=0,driver:r=lP,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",onPlay:u,onStop:l,onComplete:c,onUpdate:f,...d}){let v=1,h=!1,g,p;const m=()=>{p=new Promise(O=>{g=O})};m();let y;const b=cP[a]||bs;let w;b!==bs&&typeof n[0]!="number"&&(w=ly([0,100],n,{clamp:!1}),n=[0,100]);const T=b({...d,keyframes:n});let E;o==="mirror"&&(E=b({...d,keyframes:[...n].reverse(),velocity:-(d.velocity||0)}));let x="idle",C=null,S=null,D=null;T.calculatedDuration===null&&i&&(T.calculatedDuration=Qv(T));const{calculatedDuration:_}=T;let k=1/0,A=1/0;_!==null&&(k=_+s,A=k*(i+1)-s);let B=0;const R=O=>{if(S===null)return;v>0&&(S=Math.min(S,O)),v<0&&(S=Math.min(O-A/v,S)),C!==null?B=C:B=Math.round(O-S)*v;const F=B-e*(v>=0?1:-1),G=v>=0?F<0:F>A;B=Math.max(F,0),x==="finished"&&C===null&&(B=A);let X=B,j=T;if(i){const Z=Math.min(B,A)/k;let V=Math.floor(Z),z=Z%1;!z&&Z>=1&&(z=1),z===1&&V--,V=Math.min(V,i+1),!!(V%2)&&(o==="reverse"?(z=1-z,s&&(z-=s/k)):o==="mirror"&&(j=E)),X=$r(0,1,z)*k}const Y=G?{done:!1,value:n[0]}:j.next(X);w&&(Y.value=w(Y.value));let{done:ee}=Y;!G&&_!==null&&(ee=v>=0?B>=A:B<=0);const re=C===null&&(x==="finished"||x==="running"&&ee);return f&&f(Y.value),re&&I(),Y},M=()=>{y&&y.stop(),y=void 0},L=()=>{x="idle",M(),g(),m(),S=D=null},I=()=>{x="finished",c&&c(),M(),g()},N=()=>{if(h)return;y||(y=r(R));const O=y.now();u&&u(),C!==null?S=O-C:(!S||x==="finished")&&(S=O),x==="finished"&&m(),D=S,C=null,x="running",y.start()};t&&N();const $={then(O,F){return p.then(O,F)},get time(){return wr(B)},set time(O){O=vn(O),B=O,C!==null||!y||v===0?C=O:S=y.now()-O/v},get duration(){const O=T.calculatedDuration===null?Qv(T):T.calculatedDuration;return wr(O)},get speed(){return v},set speed(O){O===v||!y||(v=O,$.time=wr(B))},get state(){return x},play:N,pause:()=>{x="paused",C=B},stop:()=>{h=!0,x!=="idle"&&(x="idle",l&&l(),L())},cancel:()=>{D!==null&&R(D),L()},complete:()=>{x="finished"},sample:O=>(S=0,R(O))};return $}function fP(t){let e;return()=>(e===void 0&&(e=t()),e)}const dP=fP(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vP=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Oi=10,hP=2e4,pP=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Um(e.ease);function gP(t,e,{onUpdate:r,onComplete:n,...a}){if(!(dP()&&vP.has(e)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let s=!1,o,u,l=!1;const c=()=>{u=new Promise(b=>{o=b})};c();let{keyframes:f,duration:d=300,ease:v,times:h}=a;if(pP(e,a)){const b=ws({...a,repeat:0,delay:0});let w={done:!1,value:f[0]};const T=[];let E=0;for(;!w.done&&E<hP;)w=b.sample(E),T.push(w.value),E+=Oi;h=void 0,f=T,d=E-Oi,v="linear"}const g=SS(t.owner.current,e,f,{...a,duration:d,ease:v,times:h}),p=()=>{l=!1,g.cancel()},m=()=>{l=!0,He.update(p),o(),c()};return g.onfinish=()=>{l||(t.set(PS(f,a)),n&&n(),m())},{then(b,w){return u.then(b,w)},attachTimeline(b){return g.timeline=b,g.onfinish=null,tt},get time(){return wr(g.currentTime||0)},set time(b){g.currentTime=vn(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return wr(d)},play:()=>{s||(g.play(),Cr(p))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const w=ws({...a,autoplay:!1});t.setWithVelocity(w.sample(b-Oi).value,w.sample(b).value,Oi)}m()},complete:()=>{l||g.finish()},cancel:m}}function mP({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const a=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:tt,pause:tt,stop:tt,then:i=>(i(),Promise.resolve()),cancel:tt,complete:tt});return e?ws({keyframes:[0,1],duration:0,delay:e,onComplete:a}):a()}const yP={type:"spring",stiffness:500,damping:25,restSpeed:10},bP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wP={type:"keyframes",duration:.8},xP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TP=(t,{keyframes:e})=>e.length>2?wP:Cn.has(t)?t.startsWith("scale")?bP(e[1]):yP:xP,El=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ur.test(e)||e==="0")&&!e.startsWith("url(")),EP=new Set(["brightness","contrast","saturate","opacity"]);function CP(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Zs)||[];if(!n)return t;const a=r.replace(n,"");let i=EP.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+a+")"}const SP=/([a-z-]*)\(.*?\)/g,Cl={...Ur,getAnimatableNone:t=>{const e=t.match(SP);return e?e.map(CP).join(" "):t}},PP={...Pm,color:At,backgroundColor:At,outlineColor:At,fill:At,stroke:At,borderColor:At,borderTopColor:At,borderRightColor:At,borderBottomColor:At,borderLeftColor:At,filter:Cl,WebkitFilter:Cl},Mc=t=>PP[t];function vy(t,e){let r=Mc(t);return r!==Cl&&(r=Ur),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const hy=t=>/^0[^.\s]+$/.test(t);function _P(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||hy(t)}function DP(t,e,r,n){const a=El(e,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const s=n.from!==void 0?n.from:t.get();let o;const u=[];for(let l=0;l<i.length;l++)i[l]===null&&(i[l]=l===0?s:i[l-1]),_P(i[l])&&u.push(l),typeof i[l]=="string"&&i[l]!=="none"&&i[l]!=="0"&&(o=i[l]);if(a&&u.length&&o)for(let l=0;l<u.length;l++){const c=u[l];i[c]=vy(e,o)}return i}function AP({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:u,elapsed:l,...c}){return!!Object.keys(c).length}function Lc(t,e){return t[e]||t.default||t}const kP={skipAnimations:!1},Ic=(t,e,r,n={})=>a=>{const i=Lc(n,t)||{},s=i.delay||n.delay||0;let{elapsed:o=0}=n;o=o-vn(s);const u=DP(e,t,r,i),l=u[0],c=u[u.length-1],f=El(t,l),d=El(t,c);let v={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-o,onUpdate:h=>{e.set(h),i.onUpdate&&i.onUpdate(h)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(AP(i)||(v={...v,...TP(t,v)}),v.duration&&(v.duration=vn(v.duration)),v.repeatDelay&&(v.repeatDelay=vn(v.repeatDelay)),!f||!d||CS.current||i.type===!1||kP.skipAnimations)return mP(v);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const h=gP(e,t,v);if(h)return h}return ws(v)};function xs(t){return!!(Nt(t)&&t.add)}const py=t=>/^\-?\d*\.?\d+$/.test(t);function Oc(t,e){t.indexOf(e)===-1&&t.push(e)}function Vc(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Fc{constructor(){this.subscriptions=[]}add(e){return Oc(this.subscriptions,e),()=>Vc(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const BP=t=>!isNaN(parseFloat(t));class RP{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:s}=Ct;this.lastUpdated!==s&&(this.timeDelta=i,this.lastUpdated=s,He.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>He.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=BP(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Fc);const n=this.events[e].add(r);return e==="change"?()=>{n(),He.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?cy(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function na(t,e){return new RP(t,e)}const gy=t=>e=>e.test(t),MP={test:t=>t==="auto",parse:t=>t},my=[Sn,me,ur,kr,zC,NC,MP],Ea=t=>my.find(gy(t)),LP=[...my,At,Ur],IP=t=>LP.find(gy(t));function OP(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,na(r))}function VP(t,e){const r=Qs(t,e);let{transitionEnd:n={},transition:a={},...i}=r?t.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const s in i){const o=eS(i[s]);OP(t,s,o)}}function FP(t,e,r){var n,a;const i=Object.keys(e).filter(o=>!t.hasValue(o)),s=i.length;if(s)for(let o=0;o<s;o++){const u=i[o],l=e[u];let c=null;Array.isArray(l)&&(c=l[0]),c===null&&(c=(a=(n=r[u])!==null&&n!==void 0?n:t.readValue(u))!==null&&a!==void 0?a:e[u]),c!=null&&(typeof c=="string"&&(py(c)||hy(c))?c=parseFloat(c):!IP(c)&&Ur.test(l)&&(c=vy(u,l)),t.addValue(u,na(c,{owner:t})),r[u]===void 0&&(r[u]=c),c!==null&&t.setBaseTarget(u,c))}}function NP(t,e){return e?(e[t]||e.default||e).from:void 0}function zP(t,e,r){const n={};for(const a in t){const i=NP(a,e);if(i!==void 0)n[a]=i;else{const s=r.getValue(a);s&&(n[a]=s.get())}}return n}function qP({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function $P(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function yy(t,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:s,...o}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");n&&(i=n);const l=[],c=a&&t.animationState&&t.animationState.getState()[a];for(const f in o){const d=t.getValue(f),v=o[f];if(!d||v===void 0||c&&qP(c,f))continue;const h={delay:r,elapsed:0,...Lc(i||{},f)};if(window.HandoffAppearAnimations){const m=t.getProps()[bm];if(m){const y=window.HandoffAppearAnimations(m,f,d,He);y!==null&&(h.elapsed=y,h.isHandoff=!0)}}let g=!h.isHandoff&&!$P(d,v);if(h.type==="spring"&&(d.getVelocity()||h.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(Ic(f,d,v,t.shouldReduceMotion&&Cn.has(f)?{type:!1}:h));const p=d.animation;xs(u)&&(u.add(f),p.then(()=>u.remove(f))),l.push(p)}return s&&Promise.all(l).then(()=>{s&&VP(t,s)}),l}function Sl(t,e,r={}){const n=Qs(t,e,r.custom);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(yy(t,n,r)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:c,staggerDirection:f}=a;return UP(t,e,l+u,c,f,r)}:()=>Promise.resolve(),{when:o}=a;if(o){const[u,l]=o==="beforeChildren"?[i,s]:[s,i];return u().then(()=>l())}else return Promise.all([i(),s(r.delay)])}function UP(t,e,r=0,n=0,a=1,i){const s=[],o=(t.variantChildren.size-1)*n,u=a===1?(l=0)=>l*n:(l=0)=>o-l*n;return Array.from(t.variantChildren).sort(HP).forEach((l,c)=>{l.notify("AnimationStart",e),s.push(Sl(l,e,{...i,delay:r+u(c)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(s)}function HP(t,e){return t.sortNodePosition(e)}function WP(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>Sl(t,i,r));n=Promise.all(a)}else if(typeof e=="string")n=Sl(t,e,r);else{const a=typeof e=="function"?Qs(t,e,r.custom):e;n=Promise.all(yy(t,a,r))}return n.then(()=>t.notify("AnimationComplete",e))}const GP=[...bc].reverse(),KP=bc.length;function YP(t){return e=>Promise.all(e.map(({animation:r,options:n})=>WP(t,r,n)))}function XP(t){let e=YP(t);const r=jP();let n=!0;const a=(u,l)=>{const c=Qs(t,l);if(c){const{transition:f,transitionEnd:d,...v}=c;u={...u,...v,...d}}return u};function i(u){e=u(t)}function s(u,l){const c=t.getProps(),f=t.getVariantContext(!0)||{},d=[],v=new Set;let h={},g=1/0;for(let m=0;m<KP;m++){const y=GP[m],b=r[y],w=c[y]!==void 0?c[y]:f[y],T=Xa(w),E=y===l?b.isActive:null;E===!1&&(g=m);let x=w===f[y]&&w!==c[y]&&T;if(x&&n&&t.manuallyAnimateOnMount&&(x=!1),b.protectedKeys={...h},!b.isActive&&E===null||!w&&!b.prevProp||Ys(w)||typeof w=="boolean")continue;let S=ZP(b.prevProp,w)||y===l&&b.isActive&&!x&&T||m>g&&T,D=!1;const _=Array.isArray(w)?w:[w];let k=_.reduce(a,{});E===!1&&(k={});const{prevResolvedValues:A={}}=b,B={...A,...k},R=M=>{S=!0,v.has(M)&&(D=!0,v.delete(M)),b.needsAnimating[M]=!0};for(const M in B){const L=k[M],I=A[M];if(h.hasOwnProperty(M))continue;let N=!1;ms(L)&&ms(I)?N=!qm(L,I):N=L!==I,N?L!==void 0?R(M):v.add(M):L!==void 0&&v.has(M)?R(M):b.protectedKeys[M]=!0}b.prevProp=w,b.prevResolvedValues=k,b.isActive&&(h={...h,...k}),n&&t.blockInitialAnimation&&(S=!1),S&&(!x||D)&&d.push(..._.map(M=>({animation:M,options:{type:y,...u}})))}if(v.size){const m={};v.forEach(y=>{const b=t.getBaseTarget(y);b!==void 0&&(m[y]=b)}),d.push({animation:m})}let p=!!d.length;return n&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(p=!1),n=!1,p?e(d):Promise.resolve()}function o(u,l,c){var f;if(r[u].isActive===l)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(v=>{var h;return(h=v.animationState)===null||h===void 0?void 0:h.setActive(u,l)}),r[u].isActive=l;const d=s(c,u);for(const v in r)r[v].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:i,getState:()=>r}}function ZP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qm(e,t):!1}function en(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jP(){return{animate:en(!0),whileInView:en(),whileHover:en(),whileTap:en(),whileDrag:en(),whileFocus:en(),exit:en()}}class QP extends Zr{constructor(e){super(e),e.animationState||(e.animationState=XP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Ys(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let JP=0;class e_ extends Zr{constructor(){super(...arguments),this.id=JP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const i=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const t_={animation:{Feature:QP},exit:{Feature:e_}},Jv=(t,e)=>Math.abs(t-e);function r_(t,e){const r=Jv(t.x,e.x),n=Jv(t.y,e.y);return Math.sqrt(r**2+n**2)}class by{constructor(e,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Uu(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,v=r_(f.offset,{x:0,y:0})>=3;if(!d&&!v)return;const{point:h}=f,{timestamp:g}=Ct;this.history.push({...h,timestamp:g});const{onStart:p,onMove:m}=this.handlers;d||(p&&p(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=$u(d,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:v,onSessionEnd:h,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Uu(f.type==="pointercancel"?this.lastMoveEventInfo:$u(d,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,p),h&&h(f,p)},!Om(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const s=js(e),o=$u(s,this.transformPagePoint),{point:u}=o,{timestamp:l}=Ct;this.history=[{...u,timestamp:l}];const{onSessionStart:c}=r;c&&c(e,Uu(o,this.history)),this.removeListeners=Ir(br(this.contextWindow,"pointermove",this.handlePointerMove),br(this.contextWindow,"pointerup",this.handlePointerUp),br(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cr(this.updatePoint)}}function $u(t,e){return e?{point:e(t.point)}:t}function eh(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Uu({point:t},e){return{point:t,delta:eh(t,wy(e)),offset:eh(t,n_(e)),velocity:a_(e,.1)}}function n_(t){return t[0]}function wy(t){return t[t.length-1]}function a_(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=wy(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>vn(e)));)r--;if(!n)return{x:0,y:0};const i=wr(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function qt(t){return t.max-t.min}function Pl(t,e=0,r=.01){return Math.abs(t-e)<=r}function th(t,e,r,n=.5){t.origin=n,t.originPoint=Xe(e.min,e.max,t.origin),t.scale=qt(r)/qt(e),(Pl(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Xe(r.min,r.max,t.origin)-t.originPoint,(Pl(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Oa(t,e,r,n){th(t.x,e.x,r.x,n?n.originX:void 0),th(t.y,e.y,r.y,n?n.originY:void 0)}function rh(t,e,r){t.min=r.min+e.min,t.max=t.min+qt(e)}function i_(t,e,r){rh(t.x,e.x,r.x),rh(t.y,e.y,r.y)}function nh(t,e,r){t.min=e.min-r.min,t.max=t.min+qt(e)}function Va(t,e,r){nh(t.x,e.x,r.x),nh(t.y,e.y,r.y)}function s_(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Xe(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Xe(r,t,n.max):Math.min(t,r)),t}function ah(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function o_(t,{top:e,left:r,bottom:n,right:a}){return{x:ah(t.x,r,a),y:ah(t.y,e,n)}}function ih(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function u_(t,e){return{x:ih(t.x,e.x),y:ih(t.y,e.y)}}function l_(t,e){let r=.5;const n=qt(t),a=qt(e);return a>n?r=ja(e.min,e.max-n,t.min):n>a&&(r=ja(t.min,t.max-a,e.min)),$r(0,1,r)}function c_(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const _l=.35;function f_(t=_l){return t===!1?t=0:t===!0&&(t=_l),{x:sh(t,"left","right"),y:sh(t,"top","bottom")}}function sh(t,e,r){return{min:oh(t,e),max:oh(t,r)}}function oh(t,e){return typeof t=="number"?t:t[e]||0}const uh=()=>({translate:0,scale:1,origin:0,originPoint:0}),$n=()=>({x:uh(),y:uh()}),lh=()=>({min:0,max:0}),at=()=>({x:lh(),y:lh()});function Ht(t){return[t("x"),t("y")]}function xy({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function d_({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function v_(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Hu(t){return t===void 0||t===1}function Dl({scale:t,scaleX:e,scaleY:r}){return!Hu(t)||!Hu(e)||!Hu(r)}function an(t){return Dl(t)||Ty(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Ty(t){return ch(t.x)||ch(t.y)}function ch(t){return t&&t!=="0%"}function Ts(t,e,r){const n=t-r,a=e*n;return r+a}function fh(t,e,r,n,a){return a!==void 0&&(t=Ts(t,a,n)),Ts(t,r,n)+e}function Al(t,e=0,r=1,n,a){t.min=fh(t.min,e,r,n,a),t.max=fh(t.max,e,r,n,a)}function Ey(t,{x:e,y:r}){Al(t.x,e.translate,e.scale,e.originPoint),Al(t.y,r.translate,r.scale,r.originPoint)}function h_(t,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let i,s;for(let o=0;o<a;o++){i=r[o],s=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Un(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Ey(t,s)),n&&an(i.latestValues)&&Un(t,i.latestValues))}e.x=dh(e.x),e.y=dh(e.y)}function dh(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Br(t,e){t.min=t.min+e,t.max=t.max+e}function vh(t,e,[r,n,a]){const i=e[a]!==void 0?e[a]:.5,s=Xe(t.min,t.max,i);Al(t,e[r],e[n],s,e.scale)}const p_=["x","scaleX","originX"],g_=["y","scaleY","originY"];function Un(t,e){vh(t.x,e,p_),vh(t.y,e,g_)}function Cy(t,e){return xy(v_(t.getBoundingClientRect(),e))}function m_(t,e,r){const n=Cy(t,r),{scroll:a}=e;return a&&(Br(n.x,a.offset.x),Br(n.y,a.offset.y)),n}const Sy=({current:t})=>t?t.ownerDocument.defaultView:null,y_=new WeakMap;class b_{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(js(c,"page").point)},i=(c,f)=>{const{drag:d,dragPropagation:v,onDragStart:h}=this.getProps();if(d&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Fm(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ht(p=>{let m=this.getAxisMotionValue(p).get()||0;if(ur.test(m)){const{projection:y}=this.visualElement;if(y&&y.layout){const b=y.layout.layoutBox[p];b&&(m=qt(b)*(parseFloat(m)/100))}}this.originPoint[p]=m}),h&&He.update(()=>h(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:d,dragDirectionLock:v,onDirectionLock:h,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:p}=f;if(v&&this.currentDirection===null){this.currentDirection=w_(p),this.currentDirection!==null&&h&&h(this.currentDirection);return}this.updateAxis("x",f.point,p),this.updateAxis("y",f.point,p),this.visualElement.render(),g&&g(c,f)},o=(c,f)=>this.stop(c,f),u=()=>Ht(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new by(e,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:o,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:Sy(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&He.update(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!Vi(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=s_(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&zn(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=o_(a.layoutBox,r):this.constraints=!1,this.elastic=f_(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ht(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=c_(a.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!zn(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=m_(n,a.root,this.visualElement.getTransformPagePoint());let s=u_(a.layout.layoutBox,i);if(r){const o=r(d_(s));this.hasMutatedConstraints=!!o,o&&(s=xy(o))}return s}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),u=this.constraints||{},l=Ht(c=>{if(!Vi(c,r,this.currentDirection))return;let f=u&&u[c]||{};s&&(f={min:0,max:0});const d=a?200:1e6,v=a?40:1e7,h={type:"inertia",velocity:n?e[c]:0,bounceStiffness:d,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(c,h)});return Promise.all(l).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(Ic(e,n,0,r))}stopAnimation(){Ht(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ht(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ht(r=>{const{drag:n}=this.getProps();if(!Vi(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:s,max:o}=a.layout.layoutBox[r];i.set(e[r]-Xe(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!zn(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ht(s=>{const o=this.getAxisMotionValue(s);if(o){const u=o.get();a[s]=l_({min:u,max:u},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ht(s=>{if(!Vi(s,e,null))return;const o=this.getAxisMotionValue(s),{min:u,max:l}=this.constraints[s];o.set(Xe(u,l,a[s]))})}addListeners(){if(!this.visualElement.current)return;y_.set(this.visualElement,this);const e=this.visualElement.current,r=br(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();zn(u)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const s=mr(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Ht(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{s(),r(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=_l,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function Vi(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function w_(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class x_ extends Zr{constructor(e){super(e),this.removeGroupControls=tt,this.removeListeners=tt,this.controls=new b_(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const hh=t=>(e,r)=>{t&&He.update(()=>t(e,r))};class T_ extends Zr{constructor(){super(...arguments),this.removePointerDownListener=tt}onPointerDown(e){this.session=new by(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Sy(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:hh(e),onStart:hh(r),onMove:n,onEnd:(i,s)=>{delete this.session,a&&He.update(()=>a(i,s))}}}mount(){this.removePointerDownListener=br(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function E_(){const t=ht(Gs);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,a=sa();return cr(()=>n(a),[]),!e&&r?[!1,()=>r&&r(a)]:[!0]}const Qi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ph(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ca={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const r=ph(t,e.target.x),n=ph(t,e.target.y);return`${r}% ${n}%`}},C_={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,a=Ur.parse(t);if(a.length>5)return n;const i=Ur.createTransformer(t),s=typeof a[0]!="number"?1:0,o=r.x.scale*e.x,u=r.y.scale*e.y;a[0+s]/=o,a[1+s]/=u;const l=Xe(o,u,.5);return typeof a[2+s]=="number"&&(a[2+s]/=l),typeof a[3+s]=="number"&&(a[3+s]/=l),i(a)}};class S_ extends Ss.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;RC(P_),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Qi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,s=n.projection;return s&&(s.isPresent=i,a||e.layoutDependency!==r||r===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||He.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Py(t){const[e,r]=E_(),n=ht(xc);return Ss.createElement(S_,{...t,layoutGroup:n,switchLayoutGroup:ht(xm),isPresent:e,safeToRemove:r})}const P_={borderRadius:{...Ca,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ca,borderTopRightRadius:Ca,borderBottomLeftRadius:Ca,borderBottomRightRadius:Ca,boxShadow:C_},_y=["TopLeft","TopRight","BottomLeft","BottomRight"],__=_y.length,gh=t=>typeof t=="string"?parseFloat(t):t,mh=t=>typeof t=="number"||me.test(t);function D_(t,e,r,n,a,i){a?(t.opacity=Xe(0,r.opacity!==void 0?r.opacity:1,A_(n)),t.opacityExit=Xe(e.opacity!==void 0?e.opacity:1,0,k_(n))):i&&(t.opacity=Xe(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let s=0;s<__;s++){const o=`border${_y[s]}Radius`;let u=yh(e,o),l=yh(r,o);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||mh(u)===mh(l)?(t[o]=Math.max(Xe(gh(u),gh(l),n),0),(ur.test(l)||ur.test(u))&&(t[o]+="%")):t[o]=l}(e.rotate||r.rotate)&&(t.rotate=Xe(e.rotate||0,r.rotate||0,n))}function yh(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const A_=Dy(0,.5,Zm),k_=Dy(.5,.95,tt);function Dy(t,e,r){return n=>n<t?0:n>e?1:r(ja(t,e,n))}function bh(t,e){t.min=e.min,t.max=e.max}function $t(t,e){bh(t.x,e.x),bh(t.y,e.y)}function wh(t,e,r,n,a){return t-=e,t=Ts(t,1/r,n),a!==void 0&&(t=Ts(t,1/a,n)),t}function B_(t,e=0,r=1,n=.5,a,i=t,s=t){if(ur.test(e)&&(e=parseFloat(e),e=Xe(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Xe(i.min,i.max,n);t===i&&(o-=e),t.min=wh(t.min,e,r,o,a),t.max=wh(t.max,e,r,o,a)}function xh(t,e,[r,n,a],i,s){B_(t,e[r],e[n],e[a],e.scale,i,s)}const R_=["x","scaleX","originX"],M_=["y","scaleY","originY"];function Th(t,e,r,n){xh(t.x,e,R_,r?r.x:void 0,n?n.x:void 0),xh(t.y,e,M_,r?r.y:void 0,n?n.y:void 0)}function Eh(t){return t.translate===0&&t.scale===1}function Ay(t){return Eh(t.x)&&Eh(t.y)}function L_(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function ky(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Ch(t){return qt(t.x)/qt(t.y)}class I_{constructor(){this.members=[]}add(e){Oc(this.members,e),e.scheduleRender()}remove(e){if(Vc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sh(t,e,r){let n="";const a=t.x.translate/e.x,i=t.y.translate/e.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:u,rotateX:l,rotateY:c}=r;u&&(n+=`rotate(${u}deg) `),l&&(n+=`rotateX(${l}deg) `),c&&(n+=`rotateY(${c}deg) `)}const s=t.x.scale*e.x,o=t.y.scale*e.y;return(s!==1||o!==1)&&(n+=`scale(${s}, ${o})`),n||"none"}const O_=(t,e)=>t.depth-e.depth;class V_{constructor(){this.children=[],this.isDirty=!1}add(e){Oc(this.children,e),this.isDirty=!0}remove(e){Vc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O_),this.isDirty=!1,this.children.forEach(e)}}function F_(t,e){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=e&&(Cr(n),t(i-e))};return He.read(n,!0),()=>Cr(n)}function N_(t){window.MotionDebug&&window.MotionDebug.record(t)}function z_(t){return t instanceof SVGElement&&t.tagName!=="svg"}function q_(t,e,r){const n=Nt(t)?t:na(t);return n.start(Ic("",n,e,r)),n.animation}const Ph=["","X","Y","Z"],$_={visibility:"hidden"},_h=1e3;let U_=0;const sn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function By({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(s={},o=e==null?void 0:e()){this.id=U_++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sn.totalNodes=sn.resolvedTargetDeltas=sn.recalculatedProjection=0,this.nodes.forEach(G_),this.nodes.forEach(j_),this.nodes.forEach(Q_),this.nodes.forEach(K_),N_(sn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new V_)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Fc),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const u=this.eventHandlers.get(s);u&&u.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=z_(s),this.instance=s;const{layoutId:u,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(l||u)&&(this.isLayoutDirty=!0),t){let f;const d=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=F_(d,250),Qi.hasAnimatedSinceResize&&(Qi.hasAnimatedSinceResize=!1,this.nodes.forEach(Ah))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:v,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||n2,{onLayoutAnimationStart:p,onLayoutAnimationComplete:m}=c.getProps(),y=!this.targetLayout||!ky(this.targetLayout,h)||v,b=!d&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const w={...Lc(g,"layout"),onPlay:p,onComplete:m};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else d||Ah(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J_),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:u}=this.options;if(o===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Dh);return}this.isUpdating||this.nodes.forEach(X_),this.isUpdating=!1,this.nodes.forEach(Z_),this.nodes.forEach(H_),this.nodes.forEach(W_),this.clearAllSnapshots();const o=performance.now();Ct.delta=$r(0,1e3/60,o-Ct.timestamp),Ct.timestamp=o,Ct.isProcessing=!0,Lu.update.process(Ct),Lu.preRender.process(Ct),Lu.render.process(Ct),Ct.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Y_),this.sharedNodes.forEach(e2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!Ay(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;s&&(o||an(this.latestValues)||c)&&(a(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let u=this.removeElementScroll(o);return s&&(u=this.removeTransform(u)),a2(u),{animationId:this.root.animationId,measuredBox:o,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return at();const o=s.measureViewportBox(),{scroll:u}=this.root;return u&&(Br(o.x,u.offset.x),Br(o.y,u.offset.y)),o}removeElementScroll(s){const o=at();$t(o,s);for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:c,options:f}=l;if(l!==this.root&&c&&f.layoutScroll){if(c.isRoot){$t(o,s);const{scroll:d}=this.root;d&&(Br(o.x,-d.offset.x),Br(o.y,-d.offset.y))}Br(o.x,c.offset.x),Br(o.y,c.offset.y)}}return o}applyTransform(s,o=!1){const u=at();$t(u,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Un(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),an(c.latestValues)&&Un(u,c.latestValues)}return an(this.latestValues)&&Un(u,this.latestValues),u}removeTransform(s){const o=at();$t(o,s);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!an(l.latestValues))continue;Dl(l.latestValues)&&l.updateSnapshot();const c=at(),f=l.measurePageBox();$t(c,f),Th(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return an(this.latestValues)&&Th(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ct.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=Ct.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Va(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$t(this.target,this.layout.layoutBox),Ey(this.target,this.targetDelta)):$t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Va(this.relativeTargetOrigin,this.target,v.target),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Dl(this.parent.latestValues)||Ty(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),u=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ct.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;$t(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,v=this.treeScale.y;h_(this.layoutCorrected,this.treeScale,this.path,u),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:h}=o;if(!h){this.projectionTransform&&(this.projectionDelta=$n(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=$n(),this.projectionDeltaWithTransform=$n());const g=this.projectionTransform;Oa(this.projectionDelta,this.layoutCorrected,h,this.latestValues),this.projectionTransform=Sh(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h)),sn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,o=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=$n();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=at(),v=u?u.source:void 0,h=this.layout?this.layout.source:void 0,g=v!==h,p=this.getStack(),m=!p||p.members.length<=1,y=!!(g&&!m&&this.options.crossfade===!0&&!this.path.some(r2));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const T=w/1e3;kh(f.x,s.x,T),kh(f.y,s.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Va(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),t2(this.relativeTarget,this.relativeTargetOrigin,d,T),b&&L_(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=at()),$t(b,this.relativeTarget)),g&&(this.animationValues=c,D_(c,l,this.latestValues,T,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{Qi.hasAnimatedSinceResize=!0,this.currentAnimation=q_(0,_h,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_h),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:u,layout:l,latestValues:c}=s;if(!(!o||!u||!l)){if(this!==s&&this.layout&&l&&Ry(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||at();const f=qt(this.layout.layoutBox.x);u.x.min=s.target.x.min,u.x.max=u.x.min+f;const d=qt(this.layout.layoutBox.y);u.y.min=s.target.y.min,u.y.max=u.y.min+d}$t(o,u),Un(o,c),Oa(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new I_),this.sharedNodes.get(s).add(o);const l=o.options.initialPromotionConfig;o.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:u}=s;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(o=!0),!o)return;const l={};for(let c=0;c<Ph.length;c++){const f="rotate"+Ph[c];u[f]&&(l[f]=u[f],s.setStaticValue(f,0))}s.render();for(const c in l)s.setStaticValue(c,l[c]);s.scheduleRender()}getProjectionStyles(s){var o,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $_;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=ji(s==null?void 0:s.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=ji(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!an(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=Sh(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:v,y:h}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${h.origin*100}% 0`,f.animationValues?l.opacity=f===this?(u=(o=d.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in ps){if(d[g]===void 0)continue;const{correct:p,applyTo:m}=ps[g],y=l.transform==="none"?d[g]:p(d[g],f);if(m){const b=m.length;for(let w=0;w<b;w++)l[m[w]]=y}else l[g]=y}return this.options.layoutId&&(l.pointerEvents=f===this?ji(s==null?void 0:s.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Dh),this.root.sharedNodes.clear()}}}function H_(t){t.updateLayout()}function W_(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:i}=t.options,s=r.source!==t.layout.source;i==="size"?Ht(f=>{const d=s?r.measuredBox[f]:r.layoutBox[f],v=qt(d);d.min=n[f].min,d.max=d.min+v}):Ry(i,r.layoutBox,n)&&Ht(f=>{const d=s?r.measuredBox[f]:r.layoutBox[f],v=qt(n[f]);d.max=d.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+v)});const o=$n();Oa(o,n,r.layoutBox);const u=$n();s?Oa(u,t.applyTransform(a,!0),r.measuredBox):Oa(u,n,r.layoutBox);const l=!Ay(o);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:v}=f;if(d&&v){const h=at();Va(h,r.layoutBox,d.layoutBox);const g=at();Va(g,n,v.layoutBox),ky(h,g)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=h,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:u,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function G_(t){sn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function K_(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Y_(t){t.clearSnapshot()}function Dh(t){t.clearMeasurements()}function X_(t){t.isLayoutDirty=!1}function Z_(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ah(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function j_(t){t.resolveTargetDelta()}function Q_(t){t.calcProjection()}function J_(t){t.resetRotation()}function e2(t){t.removeLeadSnapshot()}function kh(t,e,r){t.translate=Xe(e.translate,0,r),t.scale=Xe(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Bh(t,e,r,n){t.min=Xe(e.min,r.min,n),t.max=Xe(e.max,r.max,n)}function t2(t,e,r,n){Bh(t.x,e.x,r.x,n),Bh(t.y,e.y,r.y,n)}function r2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const n2={duration:.45,ease:[.4,0,.1,1]},Rh=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Mh=Rh("applewebkit/")&&!Rh("chrome/")?Math.round:tt;function Lh(t){t.min=Mh(t.min),t.max=Mh(t.max)}function a2(t){Lh(t.x),Lh(t.y)}function Ry(t,e,r){return t==="position"||t==="preserve-aspect"&&!Pl(Ch(e),Ch(r),.2)}const i2=By({attachResizeListener:(t,e)=>mr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wu={current:void 0},My=By({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wu.current){const t=new i2({});t.mount(window),t.setOptions({layoutScroll:!0}),Wu.current=t}return Wu.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),s2={pan:{Feature:T_},drag:{Feature:x_,ProjectionNode:My,MeasureLayout:Py}},o2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function u2(t){const e=o2.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}function kl(t,e,r=1){const[n,a]=u2(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const s=i.trim();return py(s)?parseFloat(s):s}else return bl(a)?kl(a,e,r+1):a}function l2(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(a=>{const i=a.get();if(!bl(i))return;const s=kl(i,n);s&&a.set(s)});for(const a in e){const i=e[a];if(!bl(i))continue;const s=kl(i,n);s&&(e[a]=s,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:e,transitionEnd:r}}const c2=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ly=t=>c2.has(t),f2=t=>Object.keys(t).some(Ly),Ih=t=>t===Sn||t===me,Oh=(t,e)=>parseFloat(t.split(", ")[e]),Vh=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return Oh(a[1],e);{const i=n.match(/^matrix\((.+)\)$/);return i?Oh(i[1],t):0}},d2=new Set(["x","y","z"]),v2=vi.filter(t=>!d2.has(t));function h2(t){const e=[];return v2.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const aa={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Vh(4,13),y:Vh(5,14)};aa.translateX=aa.x;aa.translateY=aa.y;const p2=(t,e,r)=>{const n=e.measureViewportBox(),a=e.current,i=getComputedStyle(a),{display:s}=i,o={};s==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(l=>{o[l]=aa[l](n,i)}),e.render();const u=e.measureViewportBox();return r.forEach(l=>{const c=e.getValue(l);c&&c.jump(o[l]),t[l]=aa[l](u,i)}),t},g2=(t,e,r={},n={})=>{e={...e},n={...n};const a=Object.keys(e).filter(Ly);let i=[],s=!1;const o=[];if(a.forEach(u=>{const l=t.getValue(u);if(!t.hasValue(u))return;let c=r[u],f=Ea(c);const d=e[u];let v;if(ms(d)){const h=d.length,g=d[0]===null?1:0;c=d[g],f=Ea(c);for(let p=g;p<h&&d[p]!==null;p++)v?Ac(Ea(d[p])===v):v=Ea(d[p])}else v=Ea(d);if(f!==v)if(Ih(f)&&Ih(v)){const h=l.get();typeof h=="string"&&l.set(parseFloat(h)),typeof d=="string"?e[u]=parseFloat(d):Array.isArray(d)&&v===me&&(e[u]=d.map(parseFloat))}else f!=null&&f.transform&&(v!=null&&v.transform)&&(c===0||d===0)?c===0?l.set(v.transform(c)):e[u]=f.transform(d):(s||(i=h2(t),s=!0),o.push(u),n[u]=n[u]!==void 0?n[u]:e[u],l.jump(d))}),o.length){const u=o.indexOf("height")>=0?window.pageYOffset:null,l=p2(e,t,o);return i.length&&i.forEach(([c,f])=>{t.getValue(c).set(f)}),t.render(),Ks&&u!==null&&window.scrollTo({top:u}),{target:l,transitionEnd:n}}else return{target:e,transitionEnd:n}};function m2(t,e,r,n){return f2(e)?g2(t,e,r,n):{target:e,transitionEnd:n}}const y2=(t,e,r,n)=>{const a=l2(t,e,n);return e=a.target,n=a.transitionEnd,m2(t,e,r,n)},Bl={current:null},Iy={current:!1};function b2(){if(Iy.current=!0,!!Ks)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bl.current=t.matches;t.addListener(e),e()}else Bl.current=!1}function w2(t,e,r){const{willChange:n}=e;for(const a in e){const i=e[a],s=r[a];if(Nt(i))t.addValue(a,i),xs(n)&&n.add(a);else if(Nt(s))t.addValue(a,na(i,{owner:t})),xs(n)&&n.remove(a);else if(s!==i)if(t.hasValue(a)){const o=t.getValue(a);!o.hasAnimated&&o.set(i)}else{const o=t.getStaticValue(a);t.addValue(a,na(o!==void 0?o:i,{owner:t}))}}for(const a in r)e[a]===void 0&&t.removeValue(a);return e}const Fh=new WeakMap,Oy=Object.keys(Za),x2=Oy.length,Nh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],T2=wc.length;class E2{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>He.render(this.render,!1,!0);const{latestValues:o,renderState:u}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=s,this.isControllingVariants=Xs(r),this.isVariantNode=wm(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(r,{});for(const f in c){const d=c[f];o[f]!==void 0&&Nt(d)&&(d.set(o[f],!1),xs(l)&&l.add(f))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,Fh.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Iy.current||b2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Fh.delete(this.current),this.projection&&this.projection.unmount(),Cr(this.notifyUpdate),Cr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=Cn.has(e),a=r.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&He.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,a,i){let s,o;for(let u=0;u<x2;u++){const l=Oy[u],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:v}=Za[l];d&&(s=d),c(r)&&(!this.features[l]&&f&&(this.features[l]=new f(this)),v&&(o=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:v}=r;this.projection.setOptions({layoutId:u,layout:l,alwaysMeasureLayout:!!c||f&&zn(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:v})}return o}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Nh.length;n++){const a=Nh[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=e["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=w2(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<T2;n++){const a=wc[n],i=this.props[a];(Xa(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=na(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=Dc(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Nt(i)?i:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Fc),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class Vy extends E2{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:a},i){let s=zP(n,e||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),s&&(s=a(s))),i){FP(this,n,s);const o=y2(this,n,s,r);r=o.transitionEnd,n=o.target}return{transition:e,transitionEnd:r,...n}}}function C2(t){return window.getComputedStyle(t)}class S2 extends Vy{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Cn.has(r)){const n=Mc(r);return n&&n.default||0}else{const n=C2(e),a=(Cm(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Cy(e,r)}build(e,r,n,a){Ec(e,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,r){return _c(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,a){km(e,r,n,a)}}class P2 extends Vy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Cn.has(r)){const n=Mc(r);return n&&n.default||0}return r=Bm.has(r)?r:yc(r),e.getAttribute(r)}measureInstanceViewportBox(){return at()}scrapeMotionValuesFromProps(e,r){return Mm(e,r)}build(e,r,n,a){Sc(e,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(e,r,n,a){Rm(e,r,n,a)}mount(e){this.isSVGTag=Pc(e.tagName),super.mount(e)}}const _2=(t,e)=>Tc(t)?new P2(e,{enableHardwareAcceleration:!1}):new S2(e,{enableHardwareAcceleration:!0}),D2={layout:{ProjectionNode:My,MeasureLayout:Py}},A2={...t_,...xS,...s2,...D2},Fy=kC((t,e)=>uS(t,e,A2,_2));function Ny(){const t=Ot(!1);return mc(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function k2(){const t=Ny(),[e,r]=ia(0),n=jn(()=>{t.current&&r(e+1)},[e]);return[jn(()=>He.postRender(n),[n]),e]}class B2 extends Kt{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function R2({children:t,isPresent:e}){const r=sa(),n=Ot(null),a=Ot({width:0,height:0,top:0,left:0});return ei(()=>{const{width:i,height:s,top:o,left:u}=a.current;if(e||!n.current||!i||!s)return;n.current.dataset.motionPopId=r;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${o}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[e]),Me(B2,{isPresent:e,childRef:n,sizeRef:a},Cs(t,{ref:n}))}const Gu=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:s})=>{const o=Lm(M2),u=sa(),l=Jt(()=>({id:u,initial:e,isPresent:r,custom:a,onExitComplete:c=>{o.set(c,!0);for(const f of o.values())if(!f)return;n&&n()},register:c=>(o.set(c,!1),()=>o.delete(c))}),i?void 0:[r]);return Jt(()=>{o.forEach((c,f)=>o.set(f,!1))},[r]),cr(()=>{!r&&!o.size&&n&&n()},[r]),s==="popLayout"&&(t=Me(R2,{isPresent:r},t)),Me(Gs.Provider,{value:l},t)};function M2(){return new Map}function L2(t){return cr(()=>()=>t(),[])}const on=t=>t.key||"";function I2(t,e){t.forEach(r=>{const n=on(r);e.set(n,r)})}function O2(t){const e=[];return Hl.forEach(t,r=>{oa(r)&&e.push(r)}),e}const V2=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:s="sync"})=>{const o=ht(xc).forceRender||k2()[0],u=Ny(),l=O2(t);let c=l;const f=Ot(new Map).current,d=Ot(c),v=Ot(new Map).current,h=Ot(!0);if(mc(()=>{h.current=!1,I2(l,v),d.current=c}),L2(()=>{h.current=!0,v.clear(),f.clear()}),h.current)return Me(Yt,null,c.map(y=>Me(Gu,{key:on(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:s},y)));c=[...c];const g=d.current.map(on),p=l.map(on),m=g.length;for(let y=0;y<m;y++){const b=g[y];p.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(c=[]),f.forEach((y,b)=>{if(p.indexOf(b)!==-1)return;const w=v.get(b);if(!w)return;const T=g.indexOf(b);let E=y;if(!E){const x=()=>{f.delete(b);const C=Array.from(v.keys()).filter(S=>!p.includes(S));if(C.forEach(S=>v.delete(S)),d.current=l.filter(S=>{const D=on(S);return D===b||C.includes(D)}),!f.size){if(u.current===!1)return;o(),n&&n()}};E=Me(Gu,{key:on(w),isPresent:!1,onExitComplete:x,custom:e,presenceAffectsLayout:i,mode:s},w),f.set(b,E)}c.splice(T,0,E)}),c=c.map(y=>{const b=y.key;return f.has(b)?y:Me(Gu,{key:on(y),isPresent:!0,presenceAffectsLayout:i,mode:s},y)}),Me(Yt,null,f.size?c:c.map(y=>Cs(y)))},F2=()=>{const t=Ot(null),{stickies:e}=Qu();return cr(()=>{if(!t.current)return;const r=bn({container:t.current,elements:e.map(n=>({data:{id:n.id,label:n.title,color:n.color}})),style:[{selector:"node",style:{"background-color":"data(color)",label:"data(label)","text-valign":"center","text-halign":"center",color:"#fff","font-size":10,width:24,height:24,"border-width":2,"border-color":"#fff","text-outline-width":2,"text-outline-color":"#2226"}}],layout:{name:"grid",fit:!0,padding:10},userZoomingEnabled:!1,userPanningEnabled:!1,boxSelectionEnabled:!1});return r.on("tap","node",function(n){const a=n.target,i=document.querySelector(`[data-id="${a.id()}"]`);i&&i.scrollIntoView({behavior:"smooth",block:"center"})}),()=>{r.destroy()}},[e]),Me(Fy.div,{className:"fixed top-4 right-4 z-50 bg-black/40 rounded-lg shadow-lg p-2 backdrop-blur-sm border border-white/20",style:{width:160,height:160},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}},Me("div",{ref:t,style:{width:"100%",height:"100%"}}))},N2=()=>{const{stickies:t}=Qu();return Me("div",{className:"relative min-h-screen bg-gray-50"},Me("button",{className:"fixed bottom-8 right-8 bg-green-700 text-white px-6 py-3 rounded-full shadow-lg hover:bg-green-800 transition",onClick:()=>{const r={id:`sticky_${Date.now()}`,title:"New Sticky",color:"#14532d",content:{context:"Type your idea here..."}};Qu.getState().addSticky(r)}},"+ New Sticky"),Me("div",{className:"sticky-notes flex flex-wrap gap-4 p-8"},Me(V2,null,t.map(e=>Me(Fy.div,{key:e.id,"data-id":e.id,className:"sticky-note rounded-lg shadow-lg p-4 min-w-[220px] max-w-xs bg-white/80 border border-gray-200 hover:shadow-xl transition-all duration-200",style:{background:e.color},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},layout:!0},Me("h3",{className:"font-bold text-lg mb-1 truncate"},e.title),Me("p",{className:"text-gray-700 text-sm break-words"},e.content.context))))),Me(F2,null))};Xn(Me(N2,null),document.getElementById("root"));
